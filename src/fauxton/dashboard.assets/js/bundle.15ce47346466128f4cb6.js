/*! For license information please see bundle.15ce47346466128f4cb6.js.LICENSE.txt */
(self.webpackChunkfauxton=self.webpackChunkfauxton||[]).push([[23],{25272:(e,t,n)=>{"use strict";var r=n(14521),o=n.n(r);const i={root:"/",version:"1.0",host:"../",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","replication-user-password-auth-label":"Username and password","replication-username-input-placeholder":"Username","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match.","create-db-partitioned-help":"This is an advanced feature. If you are unsure whether you need a partitioned database, you probably do not. A partitioned database requires a partition key for every document, where the document _id format is '&lt;partition_key&gt;:&lt;doc_key&gt;'. A partition is a logical grouping of documents. Partition queries are often faster than global ones."}}};var a=n(66820),c=n.n(a);const s={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard",MEMBERSHIP:"./docs/cluster/nodes.html",SEARCH_INDEXES:"./docs/ddocs/search.html",SEARCH_INDEX_QUERIES:"./docs/ddocs/search.html#queries"}};var u=n(95393),l=n.n(u),p={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a=e;if(e)for(var c;c=o.exec(a);)n[i(c[1])]=i(c[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){return encodeURIComponent(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},queryParams:function(e){return l()(e)},queryString:function(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),l()(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===p.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+p.safeURLName(t)}return p.safeURLName(e)},localStorageSet:function(e,t){(c().isObject(t)||c().isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(c().has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}};const f=p;var d=n(52198),m=n.n(d),h=n(900),y=(n(35581),new(n(35481).B)),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){return Promise.resolve({url:e,options:t})}(e,(0,a.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"})).then((function(e){return fetch(e.url,e.options).then((function(e){return y.next(e),n.raw?e:e.json()}))}))},v=function(e){return b(e,"GET",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},g=function(e){return b(e,"DELETE",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),b(e,"POST",n)},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),b(e,"PUT",n)},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(e,t,(0,a.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))},S={};S.removeSpecialCharacters=f.removeSpecialCharacters,S.safeURL=f.safeURLName,S.imageUrl=function(e){return e},S.getDocUrl=function(e){return c().has(s.DOC_URLS,e)?s.DOC_URLS[e]:"#"},S.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e<512)return e+" bytes";for(var n=["KB","MB","GB","TB","PB","EB","ZB","YB"],r=0;e>=512&&r<n.length;)r+=1,e/=1024;return e.toFixed(t)+" "+n[r-1]},S.formatDate=function(e){return m()(e,"X").format("MMM Do, h:mm:ss a")},S.getDateFromNow=function(e){return m()(e,"X").fromNow()},S.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},S.getApiUrl=function(e){return i.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),h.resolve(window.location.href,i.host+e)},S.getServerUrl=function(e){return i.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),i.host+e},S.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return h.resolve(t+n,i.host)},S.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=S.getServerUrl("/_uuids?count=".concat(e));return v(t)},S.isIE1X=function(){return 11==document.documentMode||10==document.documentMode};const D=S;var N=n(15027),P=n.n(N);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(null,arguments)}var k={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){k.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){k.reduxDispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){k.reduxDispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=A({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),k.reduxDispatch&&k.reduxDispatch({type:"ADD_NOTIFICATION",options:{info:e}})},showPermanentNotification:function(e){k.reduxDispatch({type:"SHOW_PERMANENT_NOTIFICATION",options:{msg:e}})},config:function(e){return c().extend(this,e)},Deferred:function(){return $.Deferred()},when:function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},addonExtensions:{initialize:function(){},RouteObjects:{},Views:{}},addon:function(e){return c().extend(c().clone(k.addonExtensions),e)}};k.View=P().View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var x={fetchOnce:function(e){var t=c().extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};k.Model=P().Model.extend({}),k.Collection=P().Collection.extend({}),c().each([k.Model,k.Collection],(function(e){c().extend(e.prototype,x)}));var I=c().extend({},P().Events);k.registerExtension=function(e,t){I[e]||(I[e]=[]),I.trigger("add:"+e,t),I[e].push(t)},k.unRegisterExtension=function(e){var t=I[e];t&&(I.trigger("remove:"+e,t),delete I[e])},k.getExtensions=function(e){var t=I[e];return t||(t=[]),t},k.removeExtensionItem=function(e,t,n){var r=I[e];if(r){var o=arguments[arguments.length-1];c().isObject(t)&&!n&&(o=function(e){return c().isEqual(e,t)}),r=c().filter(r,(function(e){return!o(e)})),I[e]=r,I.trigger("removeItem:"+e,t)}},k.extensions=I,k.setSession=function(e){k.session=e},k.reducers={},k.addReducers=function(e){k.reducers=R(R({},k.reducers),e)},k.middlewares=[],k.addMiddleware=function(e){e&&"function"==typeof e&&k.middlewares.push(e)};const L=k;var M=n(45073),U=n.n(M),q={};const B=P().Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){q[e]=t},removeBeforeUnload:function(e){delete q[e]},navigate:function(e,t){var n=!0,r=c().find(c().map(q,(function(e){return e()})),(function(e){if(e)return!0}));if(r&&(n=window.confirm(r)),t&&t.redirect)return window.location=e;n&&(P().Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach((function(r){t.route(r,r.toString(),(function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=e.prototype.getRouteRoles(r);(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new(U())((function(t,n){return L.session.getSession().then((function(){!function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")}(L.session,e)?n():t()})).catch((function(e){n(e),function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&L.navigate("/login?urlback=".concat(e),{replace:!0}),L.navigate("/login",{replace:!0})}()}))}))})(c).then((function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(r)||(n.activeRouteObject=new e(r,i));var o=n.activeRouteObject.routeCallback(r,i);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:o,roles:c,route:r.toString()},n.trigger("new-component",t.currentRouteOptions)}),(function(){}))}))}))},setModuleRoutes:function(e){var t=this;c().each(e,(function(e){e&&(e.initialize(),e.RouteObjects&&c().each(e.RouteObjects,t.addModuleRouteObject.bind(t)))}))},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],P().history.on("route",(function(){this.lastPages.push(P().history.fragment),this.lastPages.length>5&&this.lastPages.shift()}),this)}});var V=n(19834);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}var K=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};K.extend=P().Model.extend;var H=["routes","roles"];c().extend(K.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return c().isFunction(this[e])?this[e]():this[e]},_configure:function(e){var t=this;c().each(c().intersection(c().keys(e),H),(function(n){t[n]=e[n]}))},getRouteUrls:function(){return c().keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n=this.get("routes")[e];return("object"===F(n)?this[n.route]:this[n]).apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===F(t)&&t.roles?t.roles:this.roles}});const z=K;var G=function(){this.initialize.apply(this,arguments),c().bindAll(this)};G.extend=P().Model.extend,c().extend(G.prototype,P().Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}});const W=G;var X=[],Q=0;const J={register:function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return Q+=1,X.push(e),e.dispatchId=Q,Q},dispatch:function(e){X.forEach((function(t){t(e)}))},unregister:function(e){var t=(0,a.findIndex)(X,(function(t){return t.dispatchId===e}));-1!==t&&X.splice(t,1)}};function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(null,arguments)}P().$=o(),P().ajax=function(){return P().$.ajax.apply(P().$,arguments)},Y(L,{Router:B,RouteObject:z,utils:f,Store:W,dispatcher:J,Promise:U(),Events:c().extend({},P().Events)}),L.constants=s,L.dispatch=J.dispatch,L.navigate=function(e,t){var n=c().extend({trigger:!0},t);L.router.navigate(e,n),n.trigger&&L.router.trigger("trigger-update")},L.beforeUnload=function(){L.router.beforeUnload.apply(L.router,arguments)},L.removeBeforeUnload=function(){L.router.removeBeforeUnload.apply(L.router,arguments)},L.addRoute=function(e){L.router.route(e.route,e.name,e.callback)};var Z={};L.registerUrls=function(e,t){Z[e]=t},L.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?decodeURIComponent(e):e}},L.urls=function(e,t){var n,r=L.getExtensions("urls:interceptors"),o=arguments;return c().find(r,(function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)})),c().isUndefined(n)?Z[e]?Z[e][t]?(o=Array.prototype.slice.call(arguments,2),n=Z[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},L.getIndexTypePropNames=function(){var e=L.getExtensions("IndexTypes:propNames");return e.push("views"),e};const ee=L;function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(null,arguments)}n(71269),c().isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),te(i,{utils:f,getParams:ee.utils.getParams,helpers:D}),ee.config({addHeaderLink:function(e){ee.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){ee.reduxDispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){ee.reduxDispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){ee.reduxDispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){ee.reduxDispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){ee.reduxDispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}});const ne=i;var re=n(39471),oe=n(71559);const ie="SHOW_NOTIFICATION_CENTER",ae="HIDE_NOTIFICATION_CENTER",ce="CLEAR_SINGLE_NOTIFICATION",se="CLEAR_ALL_NOTIFICATIONS",ue="SELECT_NOTIFICATION_FILTER";var le=n(19174),pe=n(38713),fe=n.n(pe),de=n(3118),me=n(59336),he=n(77758),ye=n(90396),be=n.n(ye);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ne(r.key),r)}}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function we(e){var t=Oe();return function(){var n,r=Se(e);if(t){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}(this,n)}}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oe=function(){return!!e})()}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function De(e,t,n){return(t=Ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){var t=function(e){if("object"!=ve(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ve(t)?t:t+""}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(o,e);var t,n,r=we(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return De(Ee(e=r.call.apply(r,[this].concat(n))),"state",{open:!1}),De(Ee(e),"handleClick",(function(t){var n=!e.state.open;e.setState({open:n}),e.props.onClick({isOpen:n,event:t})})),e}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=this.state.open?"fonticon-down-open":"fonticon-right-open",o=be()("faux--accordion__item-content","collapse",{in:this.state.open});return re.createElement("li",{className:"faux--accordion__item",onClick:this.handleClick},re.createElement("button",{type:"button",className:"faux--accordion__item-header",onClick:this.handleClick},re.createElement("i",{className:r}),re.createElement("span",null,n)),re.createElement(he.A,{in:this.state.open},re.createElement("div",{className:o},t)))}}])&&ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(re.Component);De(Pe,"propTypes",{title:fe().string.isRequired}),De(Pe,"defaultProps",{onClick:function(){}});var Ce=n(86835),Te=n(27930);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ve(r.key),r)}}function ke(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Le(e){var t=Ue();return function(){var n,r=qe(e);if(t){var o=qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Me(e)}(this,n)}}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function Be(e,t,n){return(t=Ve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e){var t=function(e){if("object"!=Re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}var Fe=function(e){xe(n,e);var t=Le(n);function n(){var e;je(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Be(Me(e=t.call.apply(t,[this].concat(o))),"getBadges",(function(){return e.props.elements.map(function(e,t){return re.createElement(Ke,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge,showClose:this.props.showClose,showTooltip:!!this.props.tagExplanations,tooltip:this.props.tagExplanations?this.props.tagExplanations[e]:""})}.bind(Me(e)))})),Be(Me(e),"removeBadge",(function(t,n){e.props.removeBadge(t,n)})),e}return ke(n,[{key:"render",value:function(){return re.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),n}(re.Component);Be(Fe,"propTypes",{elements:fe().array.isRequired,removeBadge:fe().func.isRequired,showClose:fe().bool,tagExplanations:fe().object}),Be(Fe,"defaultProps",{getLabel:function(e){return e},getId:function(e){return e},showClose:!1,tagExplanations:null});var Ke=function(e){xe(n,e);var t=Le(n);function n(){var e;je(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Be(Me(e=t.call.apply(t,[this].concat(o))),"remove",(function(t){t.preventDefault(),e.props.remove(e.props.label,e.props.id)})),e}return ke(n,[{key:"render",value:function(){var e="badge "+this.props.label.replace(" ","-"),t=re.createElement(Ce.A,{id:"graveyard-tooltip"},this.props.tooltip);return re.createElement("li",{className:e},re.createElement("div",{className:"remove-filter"},this.props.showTooltip?re.createElement(Te.A,{placement:"top",overlay:t},re.createElement("span",null,this.props.label)):re.createElement("span",null,this.props.label),this.props.showClose?re.createElement("a",{href:"#",onClick:this.remove,"data-bypass":"true",className:"ms-1"},"Ã—"):null))}}]),n}(re.Component);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function We(e){var t=Xe();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}function Je(e){var t=function(e){if("object"!=He(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==He(t)?t:t+""}Be(Ke,"propTypes",{label:fe().string.isRequired,remove:fe().func.isRequired,showClose:fe().bool,showTooltip:fe().bool,tooltip:fe().string}),Be(Ke,"defaultProps",{showClose:!1,showTooltip:!1,tooltip:""});var Ye,$e,Ze,et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(o,e);var t,n,r=We(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,r=e.innerClasses,o=e.selected,i=e.containerClasses,a=e.title,c=e.disabled,s=e.text,u=e.toggleCallback,l=e.active,p=o||l?"js-headerbar-togglebutton-selected":"";return re.createElement("button",{title:a,disabled:c,onClick:u,className:"button ".concat(i," ").concat(p)},re.createElement("i",{className:"".concat(t," ").concat(n," ").concat(r)}),re.createElement("span",null,s))}}])&&ze(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(re.Component);Ye=et,Ze={innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"},($e=Je($e="defaultProps"))in Ye?Object.defineProperty(Ye,$e,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Ye[$e]=Ze;var tt=n(25903),nt=n(27321),rt=["onClick","id","children","disabled"];function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(null,arguments)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dt(r.key),r)}}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ct(e,t)}function st(e){var t=lt();return function(){var n,r=pt(e);if(t){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ut(e)}(this,n)}}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lt=function(){return!!e})()}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}function ft(e,t,n){return(t=dt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(e){var t=function(e){if("object"!=ot(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:t+""}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(n,e);var t=st(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ft(ut(e=t.call.apply(t,[this].concat(o))),"getIcon",(function(){return e.props.icon?re.createElement("i",{className:"fonticon "+e.props.icon}):null})),e}return function(e,t){t&&at(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.id,r=e.children,o=e.disabled,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rt);return re.createElement("button",it({onClick:t,type:"button",disabled:o,className:"toolbar-btn","data-id":this.props["data-id"],id:n},i),this.getIcon(),r)}}]),n}(re.Component);function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ot(r.key),r)}}function bt(e,t){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bt(e,t)}function vt(e){var t=_t();return function(){var n,r=wt(e);if(t){var o=wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gt(e)}(this,n)}}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_t=function(){return!!e})()}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}function Et(e,t,n){return(t=Ot(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){var t=function(e){if("object"!=ht(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ht(t)?t:t+""}ft(mt,"propTypes",{id:fe().string,icon:fe().string,style:fe().object,"data-id":fe().string,onClick:fe().func,disabled:fe().bool}),ft(mt,"defaultProps",{disabled:!1,style:{},"data-id":null,onClick:function(){}});var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(n,e);var t=vt(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Et(gt(e=t.call.apply(t,[this].concat(o))),"getMultiSelectOptions",(function(){return e.props.hasSelectedItem?re.createElement(mt,{icon:e.props.bulkIcon,title:e.props.buttonTitle,"aria-label":e.props.buttonTitle,onClick:e.props.removeItem}):null})),Et(gt(e),"getPopupContent",(function(){return re.createElement("ul",{className:"bulk-action-component-popover-actions"},re.createElement("li",{onClick:e.selectAll},re.createElement("i",{className:"fonticon fonticon-cancel"})," ",e.props.dropdownContentText))})),Et(gt(e),"selectAll",(function(){e.bulkActionPopover.hide(),e.props.selectAll()})),Et(gt(e),"getOverlay",(function(){return re.createElement(Te.A,{ref:function(t){return e.bulkActionPopover=t},trigger:"click",placement:"bottom",rootClose:!0,overlay:re.createElement(tt.A,{id:"bulk-action-component-popover",title:e.props.title},e.getPopupContent())},re.createElement("div",{className:"arrow-button"},re.createElement("i",{className:"fonticon fonticon-play"})))})),Et(gt(e),"getMasterSelector",(function(){return re.createElement("div",{className:"bulk-action-component-panel"},re.createElement(nt.A.Check,{checked:e.props.isChecked,onChange:e.props.toggleSelect,disabled:e.props.disabled,type:"checkbox"}),e.props.enableOverlay?re.createElement("div",{className:"separator"}):null,e.props.enableOverlay?e.getOverlay():null)})),e}return function(e,t){t&&yt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"bulk-action-component"},re.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}]),n}(re.Component);Et(St,"propTypes",{hasSelectedItem:fe().bool.isRequired,removeItem:fe().func.isRequired,selectAll:fe().func,toggleSelect:fe().func.isRequired,isChecked:fe().bool.isRequired,disabled:fe().bool}),Et(St,"defaultProps",{disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1});var Dt=n(59990),Nt=n(34295),Pt=n.n(Nt);const Ct="CMPNTS_DATABASES_SHOWDELETE_MODAL",Tt={deleteDatabase:function(e,t){var n=this,r=ee.urls("databaseBaseURL","server",e,"");g(r).then((function(r){if(!r.ok){var o=r.reason||"";throw new Error(o)}n.showDeleteDatabaseModal({showModal:!0}),ee.addNotification({msg:'The database "'+e+'" has been deleted.',clear:!0,escape:!1}),Backbone.history.loadUrl(ee.urls("allDBs","app")),t&&t()})).catch((function(e){ee.addNotification({msg:"Could not delete the database. "+e.message,type:"error",clear:!0})}))},showDeleteDatabaseModal:function(e){ee.dispatch({type:Ct,options:e})}};var Rt=function(e,t){var n="#"+ee.urls("databaseBaseURL","app",ee.url.encode(e))+(t?"/_partition/"+encodeURIComponent(t):"");return{title:ne.i18n.en_US["new-mango-index"],url:n+"/_index",icon:"fonticon-plus-circled"}},jt=function(e){return"designDoc"===e.navItem&&"Views"===e.designDocSection&&e.indexName},At=function(e,t){var n=t;return t&&e.options&&!1===e.options.partitioned&&(n=!1),n};const kt=function(e){return _.isArray(e)?e[1]:e},xt=function(e,t){var n=ee.getExtensions("sidebar:links"),r="#"+ee.urls("databaseBaseURL","app",ee.url.encode(e)),o="",i="";return t&&(o="/_partition/"+encodeURIComponent(t),i="?partitionKey="+encodeURIComponent(t)),[{title:"Add New",links:n.reduce((function(e,t){return e.push({title:t.title,url:r+o+"/"+t.url,icon:"fonticon-plus-circled"}),e}),[{title:"New Doc",url:r+"/_new"+i,icon:"fonticon-plus-circled"},{title:"New View",url:r+o+"/new_view",icon:"fonticon-plus-circled"},Rt(e,t)])}]},It=function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:ee.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:function(){Tt.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})}}]},Lt=function(e,t){var n=encodeURIComponent(e),r=ee.urls("new","newDocument",n);return t&&(r=r+"?partitionKey="+encodeURIComponent(t)),r},Mt=At,Ut=function(e){return JSON.parse('"'+e+'"')},qt=function(e,t){var n=e.split("\n"),r=!1;return n.length>t&&(r=!0,e=(n=n.slice(0,t)).join("\n")),{isTruncated:r,content:e}},Bt=function(e,t){if(!t)return!1;var n=!1;if(e&&jt(t)){var r="_design/"+t.designDocName,o=e.find((function(e){return e._id===r}));n=void 0!==o&&o.views&&void 0!==o.views[t.indexName]&&void 0!==o.views[t.indexName].reduce}return n},Vt=function(e,t,n){if(!t)return!1;var r=!1;if(e&&jt(t)){var o="_design/"+t.designDocName,i=e.find((function(e){return e._id===o}));i&&(r=At(i,n))}return r},Ft=jt;function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function zt(e,t){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zt(e,t)}function Gt(e){var t=Xt();return function(){var n,r=Qt(e);if(t){var o=Qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wt(e)}(this,n)}}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xt=function(){return!!e})()}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}function Jt(e,t,n){return(t=Yt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(e){var t=function(e){if("object"!=Kt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kt(t)?t:t+""}var $t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}(n,e);var t=Gt(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Jt(Wt(e=t.call.apply(t,[this].concat(o))),"state",{editorInitialized:!1}),Jt(Wt(e),"initAceEditor",(function(t){e.editor=Pt().edit(t),e.editor.setShowPrintMargin(!1),e.editor.setOption("highlightActiveLine",!0),e.editor.setOption("wrap",!!e.props.wordWrapEnabled),e.editor.setTheme("ace/theme/idle_fingers");var n=Ut(e.props.value);e.editor.setValue(n,-1),e.state.editorInitialized||e.setState({editorInitialized:!0})})),Jt(Wt(e),"closeModal",(function(t){t&&t.preventDefault(),e.props.onClose()})),Jt(Wt(e),"save",(function(){e.props.onSave(e.editor.getValue())})),Jt(Wt(e),"getSaveBtn",(function(){return e.state.editorInitialized&&re.createElement(de.A,{id:"string-edit-save-btn",onClick:e.save,variant:"cf-primary"},re.createElement("i",{className:"fonticon-circle-check"}),"Modify Text")})),e}return function(e,t){t&&Ht(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this;return re.createElement(Dt.A,{dialogClassName:"string-editor-modal",show:this.props.visible,onHide:this.closeModal,scrollable:!0},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,"Edit Value ",re.createElement("span",{id:"string-edit-header"}))),re.createElement(Dt.A.Body,null,re.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),re.createElement("div",{id:"string-editor-wrapper"},re.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",className:"cancel-link",onClick:this.closeModal},"Cancel"),this.getSaveBtn()))}}]),n}(re.Component);Jt($t,"propTypes",{value:fe().string.isRequired,visible:fe().bool.isRequired,onClose:fe().func.isRequired,onSave:fe().func.isRequired,wordWrapEnabled:fe().bool.isRequired}),Jt($t,"defaultProps",{visible:!1,onClose:function(){},onSave:function(){}});var Zt=n(41849);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,un(r.key),r)}}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e){var t=an();return function(){var n,r=cn(e);if(t){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}(this,n)}}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(an=function(){return!!e})()}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}function sn(e,t,n){return(t=un(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e){var t=function(e){if("object"!=en(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==en(t)?t:t+""}Pt().config.setModuleUrl("ace/theme/idle_fingers",n(10934)),Pt().config.setModuleUrl("ace/theme/dawn",n(66847)),Pt().config.setModuleUrl("ace/mode/json",n(56701)),Pt().config.setModuleUrl("ace/mode/json_worker",n(49294)),Pt().config.setModuleUrl("ace/mode/mango_worker",n(79246)),Pt().config.setModuleUrl("ace/mode/javascript",n(21392)),Pt().config.setModuleUrl("ace/mode/javascript_worker",n(33991)),Pt().config.setModuleUrl("ace/ext/static_highlight",n(85754)),Pt().config.setModuleUrl("ace/ext/searchbox",n(68358)),Pt().config.setModuleUrl("ace/mode/mango",n(51743)),Pt().config.set("useStrictCSP",!0);var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(n,e);var t=rn(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return sn(on(e=t.call.apply(t,[this].concat(o))),"state",{originalCode:e.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""}),sn(on(e),"hasChanged",(function(){return!_.isEqual(e.state.originalCode,e.getValue())})),sn(on(e),"clearChanges",(function(){e.setState({originalCode:e.getValue()})})),sn(on(e),"setupAce",(function(t,n){e.editor=Pt().edit(e.ace),e.editor.commands.bindKeys({"Ctrl-L|Command-L":null,"Ctrl-Shift-L|Command-Shift-L":"gotoline"}),n&&e.setValue(t.defaultCode),e.editor.autoScrollEditorIntoView=t.autoScrollEditorIntoView,e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.ignorableErrors&&e.removeIgnorableAnnotations(),e.addCommands()})),sn(on(e),"addCommands",(function(){_.each(e.props.editorCommands,(function(t){e.editor.commands.addCommand(t)}))})),sn(on(e),"setupEvents",(function(){e.props.stringEditModalEnabled&&(e.editor.on("changeSelection",_.bind(e.showHideEditStringGutterIcon,on(e))),e.editor.getSession().on("changeBackMarker",_.bind(e.showHideEditStringGutterIcon,on(e))),e.editor.getSession().on("changeScrollTop",_.bind(e.updateEditStringGutterIconPosition,on(e)))),e.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",e.quitWarningMsg),ee.beforeUnload("editor_"+e.props.id,e.quitWarningMsg))})),sn(on(e),"onBlur",(function(){e.props.blur(e.getValue())})),sn(on(e),"onContentChange",(function(){e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.change(e.getValue())})),sn(on(e),"quitWarningMsg",(function(){if(e.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."})),sn(on(e),"removeEvents",(function(){e.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",e.quitWarningMsg),ee.removeBeforeUnload("editor_"+e.props.id))})),sn(on(e),"setHeightToLineCount",(function(){var t=e.editor.getSession().getDocument().getLength(),n=t>e.props.maxLines?e.props.maxLines:t;e.editor.setOptions({maxLines:n,minLines:e.props.minLines})})),sn(on(e),"getAnnotations",(function(){return e.editor.getSession().getAnnotations()})),sn(on(e),"isIgnorableError",(function(t){return-1!==_.indexOf(e.props.ignorableErrors,t)})),sn(on(e),"removeIgnorableAnnotations",(function(){var t=e.isIgnorableError;e.editor.getSession().on("changeAnnotation",function(){var e=this.editor.getSession().getAnnotations(),n=_.reduce(e,(function(e,n){return t(n.raw)||e.push(n),e}),[]);e.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(on(e)))})),sn(on(e),"showHideEditStringGutterIcon",(function(){return e.hasErrors()||!e.parseLineForStringMatch()?(e.setState({stringEditIconVisible:!1}),!1):(e.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:e.getGutterIconPosition()}}),!0)})),sn(on(e),"updateEditStringGutterIconPosition",(function(){e.state.stringEditIconVisible&&e.setState({stringEditIconStyle:{top:e.getGutterIconPosition()}})})),sn(on(e),"getGutterIconPosition",(function(){var t=e.getRowHeight(),n=e.editor.session.getScrollTop();return t*e.documentToScreenRow(e.getSelectionStart().row)-n+"px"})),sn(on(e),"parseLineForStringMatch",(function(){var t=e.getSelectionStart().row,n=e.getSelectionEnd().row;if(t>=0&&n>=0&&t===n&&e.isRowExpanded(t)){var r=e.getLine(t).match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(r)return r}return!1})),sn(on(e),"openStringEditModal",(function(){var t=e.parseLineForStringMatch()[3].trim();","===t.substring(t.length-1)&&(t=t.substring(0,t.length-1).trim()),t=t.substring(1,t.length-1),e.setState({stringEditModalVisible:!0,stringEditModalValue:t})})),sn(on(e),"saveStringEditModal",(function(t){var n=e.parseLineForStringMatch(),r=n[1]||"",o=n[2]||"",i=n[3],a="";","===i.substring(i.length-1)&&(a=","),e.replaceCurrentLine(r+o+JSON.stringify(t)+a+"\n"),e.closeStringEditModal()})),sn(on(e),"closeStringEditModal",(function(){e.setState({stringEditModalVisible:!1})})),sn(on(e),"hasErrors",(function(){return!_.every(e.getAnnotations(),(function(t){return e.isIgnorableError(t.raw)||"error"!==t.type}))})),sn(on(e),"setReadOnly",(function(t){e.editor.setReadOnly(t)})),sn(on(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),sn(on(e),"getValue",(function(){return e.editor.getValue()})),sn(on(e),"getEditor",(function(){return on(e)})),sn(on(e),"getLine",(function(t){return e.editor.session.getLine(t)})),sn(on(e),"getSelectionStart",(function(){return e.editor.getSelectionRange().start})),sn(on(e),"getSelectionEnd",(function(){return e.editor.getSelectionRange().end})),sn(on(e),"getRowHeight",(function(){return e.editor.renderer.layerConfig.lineHeight})),sn(on(e),"isRowExpanded",(function(t){return!e.editor.getSession().isRowFolded(t)})),sn(on(e),"documentToScreenRow",(function(t){return e.editor.getSession().documentToScreenRow(t,0)})),sn(on(e),"replaceCurrentLine",(function(t){e.editor.getSelection().selectLine(),e.editor.insert(t),e.editor.getSelection().moveCursorUp()})),sn(on(e),"onAceLoad",(function(t){e.ace=t})),e}return function(e,t){t&&tn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return re.createElement("div",null,re.createElement(Zt.Ay,{name:this.props.id,className:"js-editor",mode:this.props.mode,theme:this.props.theme,onLoad:_.bind(this.onAceLoad,this),onBlur:_.bind(this.onBlur,this),onChange:_.bind(this.onContentChange,this),editorProps:{$blockScrolling:1/0,useSoftTabs:!0},readOnly:this.props.disabled,showPrintMargin:this.props.showPrintMargin,highlightActiveLine:this.props.highlightActiveLine,width:"100%",height:"100%",tabSize:2,fontSize:this.props.fontSize,focus:this.props.autoFocus,setOptions:{wrap:this.props.wordWrapEnabled}}),re.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible||this.props.disabled,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},re.createElement("i",{className:"icon fonticon-pencil"})),re.createElement($t,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,wordWrapEnabled:this.props.wordWrapEnabled,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}]),n}(re.Component);sn(ln,"defaultProps",{id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",disabled:!1,showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,wordWrapEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}});var pn=n(84612),fn=n.n(pn);function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wn(r.key),r)}}function hn(e,t){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hn(e,t)}function yn(e){var t=vn();return function(){var n,r=gn(e);if(t){var o=gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bn(e)}(this,n)}}function bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vn=function(){return!!e})()}function gn(e){return gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gn(e)}function _n(e,t,n){return(t=wn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wn(e){var t=function(e){if("object"!=dn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dn(t)?t:t+""}var En=fn().js_beautify?fn().js_beautify:fn(),On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}(n,e);var t=yn(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return _n(bn(e=t.call.apply(t,[this].concat(o))),"noOfLines",(function(){return e.props.code.split(/\r\n|\r|\n/).length})),_n(bn(e),"canBeautify",(function(){return 1===e.noOfLines()})),_n(bn(e),"beautify",(function(t){t.preventDefault();var n=En(e.props.code);e.props.beautifiedCode(n)})),_n(bn(e),"getTooltip",(function(){return re.createElement(Ce.A,{id:"tooltip"},"Switch to editable code format.")})),e}return function(e,t){t&&mn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return re.createElement(Te.A,{placement:"right",overlay:e},re.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-cf-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}]),n}(re.Component);function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,An(r.key),r)}}function Nn(e,t){return Nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nn(e,t)}function Pn(e){var t=Tn();return function(){var n,r=Rn(e);if(t){var o=Rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cn(e)}(this,n)}}function Cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tn=function(){return!!e})()}function Rn(e){return Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rn(e)}function jn(e,t,n){return(t=An(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function An(e){var t=function(e){if("object"!=Sn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sn(t)?t:t+""}var kn={dark:"idle_fingers",light:"dawn"},xn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(n,e);var t=Pn(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return jn(Cn(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{theme:e.getZenTheme(),code:e.props.defaultCode}})),jn(Cn(e),"getZenTheme",(function(){var e=ne.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e})),jn(Cn(e),"onChange",(function(){e.setState(e.getStoreState())})),jn(Cn(e),"exitZenMode",(function(){e.props.onExit(e.getValue())})),jn(Cn(e),"getValue",(function(){return e.ace.getValue()})),jn(Cn(e),"toggleTheme",(function(){var t="dark"===e.state.theme?"light":"dark";e.setState({theme:t,code:e.getValue()}),ne.utils.localStorageSet("zenTheme",t)})),jn(Cn(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),jn(Cn(e),"state",e.getStoreState()),e}return function(e,t){t&&Dn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],r=re.createElement(Ce.A,{id:"tooltip"},"Exit zen mode (`esc`)"),o=re.createElement(Ce.A,{id:"tooltip"},"Switch zen theme");return re.createElement("div",{className:t},re.createElement("div",{className:"zen-mode-controls"},re.createElement("ul",null,re.createElement("li",null,re.createElement(Te.A,{placement:"left",overlay:r},re.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),re.createElement("li",null,re.createElement(Te.A,{placement:"left",overlay:o},re.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),re.createElement("div",{className:"tooltips"})),re.createElement(ln,{ref:function(t){return e.ace=t},autoFocus:!0,theme:kn[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}]),n}(re.Component);function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ln.apply(null,arguments)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hn(r.key),r)}}function Un(e,t){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Un(e,t)}function qn(e){var t=Vn();return function(){var n,r=Fn(e);if(t){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==In(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bn(e)}(this,n)}}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vn=function(){return!!e})()}function Fn(e){return Fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fn(e)}function Kn(e,t,n){return(t=Hn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hn(e){var t=function(e){if("object"!=In(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==In(t)?t:t+""}jn(xn,"defaultProps",{mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1});var zn=["Missing name in function declaration.","['{a}'] is better written in dot notation."],Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}(n,e);var t=qn(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Kn(Bn(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(){return{zenModeEnabled:!1,code:e.props.defaultCode}})),Kn(Bn(e),"getZenModeIcon",(function(){if(e.props.allowZenMode)return re.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:e.enterZenMode})})),Kn(Bn(e),"getCheatsheetIcon",(function(){return e.props.showCheatSheetIcon?re.createElement("span",{className:"fonticon fonticon-bookmark cheatsheet-icon",title:"Show cheatsheet",onClick:e.props.onCheatsheatIconClick}):null})),Kn(Bn(e),"getDocIcon",(function(){if(e.props.docLink)return re.createElement("a",{className:"help-link","data-bypass":"true",href:e.props.docLink,target:"_blank",rel:"noopener noreferrer"},re.createElement("i",{className:"fonticon-help-circled"}))})),Kn(Bn(e),"getZenModeOverlay",(function(){if(e.state.zenModeEnabled)return re.createElement(xn,{defaultCode:e.state.code,mode:e.props.mode,ignorableErrors:zn,onExit:e.exitZenMode})})),Kn(Bn(e),"enterZenMode",(function(){e.setState({zenModeEnabled:!0,code:e.codeEditor.getValue()})})),Kn(Bn(e),"exitZenMode",(function(t){e.setState({zenModeEnabled:!1}),e.getEditor().setValue(t)})),Kn(Bn(e),"getEditor",(function(){return e.codeEditor})),Kn(Bn(e),"getValue",(function(){return e.getEditor().getValue()})),Kn(Bn(e),"beautify",(function(t){e.setState({code:t}),e.getEditor().setValue(t)})),Kn(Bn(e),"update",(function(){e.getEditor().setValue(e.state.code)})),Kn(Bn(e),"state",e.getStoreState()),e}return function(e,t){t&&Mn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="";this.props.className&&(t=this.props.className);var n={};return this.props.setHeightToLineCount?(n.setHeightToLineCount=!0,n.maxLines=1e3):(n.setHeightToLineCount=!1,n.minLines=30),re.createElement("div",{className:t},re.createElement("label",null,re.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon(),this.getCheatsheetIcon()),re.createElement(ln,Ln({id:this.props.id,ref:function(t){return e.codeEditor=t},mode:this.props.syntaxMode,defaultCode:this.state.code,showGutter:!0,ignorableErrors:zn,blur:this.props.blur},n)),re.createElement(On,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}]),n}(re.Component);function Wn(e){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qn(r.key),r)}}function Qn(e){var t=function(e){if("object"!=Wn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wn(t)?t:t+""}function Jn(e,t){return Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jn(e,t)}function Yn(e){var t=$n();return function(){var n,r=Zn(e);if(t){var o=Zn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($n=function(){return!!e})()}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zn(e)}Kn(Gn,"defaultProps",{id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,syntaxMode:"javascript",onCheatsheatIconClick:function(){},showCheatSheetIcon:!1,setHeightToLineCount:!0,blur:function(){}});var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jn(e,t)}(n,e);var t=Yn(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Xn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"bordered-box"},re.createElement("div",{className:"padded-box"},this.props.children))}}]),n}(re.Component);const tr="LAYOUT_TABLE",nr="LAYOUT_METADATA",rr="LAYOUT_JSON",or="MangoIndex",ir="MangoQueryResult",ar="view",cr="truncated",sr="full",ur="small-font",lr="large-font",pr="medium-font";function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_r(r.key),r)}}function mr(e,t){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mr(e,t)}function hr(e){var t=br();return function(){var n,r=vr(e);if(t){var o=vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yr(e)}(this,n)}}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(br=function(){return!!e})()}function vr(e){return vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vr(e)}function gr(e,t,n){return(t=_r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e){var t=function(e){if("object"!=fr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fr(t)?t:t+""}var wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mr(e,t)}(n,e);var t=hr(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gr(yr(e=t.call.apply(t,[this].concat(o))),"onChange",(function(){e.props.docChecked(e.props.doc.id,e.props.doc._rev)})),gr(yr(e),"getUrlFragment",(function(){return e.props.children?re.createElement("div",{className:"doc-edit-symbol float-end",title:"Edit document"},e.props.children):""})),gr(yr(e),"getExtensionIcons",(function(){var t=ee.getExtensions("DocList:icons");return _.map(t,(function(t,n){return re.createElement(t,{doc:e.props.doc,key:n})}))})),gr(yr(e),"getDocumentTypeIcon",(function(){return e.props.docType===or?-1!==e.props.docContent.indexOf('"partitioned": true')?re.createElement("i",{className:"fonticon-documents",title:"Partitioned index"}):re.createElement("i",{className:"fonticon-document",title:"Global index"}):null})),gr(yr(e),"getCheckbox",(function(){return e.props.isDeletable?re.createElement("div",{className:"checkbox inline"},re.createElement("input",{id:"checkbox-"+e.props.docIdentifier,checked:e.props.checked,"data-checked":e.props.checked,type:"checkbox",className:"form-check-input",onChange:e.onChange}),re.createElement("label",{className:"visually-hidden",htmlFor:"checkbox-"+e.props.docIdentifier},"Select document ",e.props.docIdentifier)):re.createElement("div",{className:"checkbox-dummy"})})),gr(yr(e),"onClick",(function(t){e.props.onClick(e.props.docIdentifier,e.props.doc,t)})),gr(yr(e),"getDocContent",(function(){if(_.isEmpty(e.props.docContent))return null;var t=e.props.docContent,n=!1;if(e.props.truncate){var r=qt(e.props.docContent,e.props.maxRows);n=r.isTruncated,t=r.content}var o=e.props.resultsStyle.fontSize,i=be()("prettyprint",{"prettyprint--small":o===ur,"prettyprint--large":o===lr});return re.createElement("div",{className:"doc-data"},re.createElement("pre",{className:i},t),n?re.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)})),e}return function(e,t){t&&dr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{"data-id":this.props.docIdentifier,className:"row gx-0 doc-row"},re.createElement("div",{className:"col-auto"},this.getCheckbox()),re.createElement("div",{className:"col doc-item"},re.createElement("header",{onClick:this.onClick},re.createElement("span",{className:"header-keylabel"},this.getDocumentTypeIcon(),this.props.keylabel),re.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),re.createElement("div",{className:"doc-item-extension-icons float-end"},this.getExtensionIcons())),this.getDocContent()))}}]),n}(re.Component);gr(wr,"propTypes",{docIdentifier:fe().string.isRequired,docType:fe().string,docChecked:fe().func.isRequired,truncate:fe().bool,maxRows:fe().number,resultsStyle:fe().object}),gr(wr,"defaultProps",{truncate:!0,maxRows:500,resultsStyle:{fontSize:pr},docType:ar});var Er=function(){return re.createElement("div",{className:"loading-lines"},re.createElement("div",{id:"line1"}," "),re.createElement("div",{id:"line2"}," "),re.createElement("div",{id:"line3"}," "),re.createElement("div",{id:"line4"}," "))};function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jr(r.key),r)}}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function Nr(e){var t=Cr();return function(){var n,r=Tr(e);if(t){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pr(e)}(this,n)}}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cr=function(){return!!e})()}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}function Rr(e,t,n){return(t=jr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e){var t=function(e){if("object"!=Or(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Or(t)?t:t+""}var Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(n,e);var t=Nr(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Rr(Pr(e=t.call.apply(t,[this].concat(o))),"getIcon",(function(){return e.props.showIcon?re.createElement("i",{className:"icon "+e.props.customIcon}):null})),e}return function(e,t){t&&Sr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.variant,r=e.id,o=e.text,i=e.disabled,a=e.style;return re.createElement(de.A,{onClick:t,type:"submit",style:a,disabled:i,variant:"cf-"+n,"data-id":this.props["data-id"],id:r},this.getIcon(),o)}}]),n}(re.Component);Rr(Ar,"propTypes",{showIcon:fe().bool,id:fe().string,customIcon:fe().string,style:fe().object,variant:fe().oneOf(["primary","secondary","danger"]),"data-id":fe().string,onClick:fe().func,disabled:fe().bool}),Rr(Ar,"defaultProps",{disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",variant:"primary",style:{},"data-id":null,onClick:function(){}});var kr=n(24524);function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fr(r.key),r)}}function Lr(e,t){return Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lr(e,t)}function Mr(e){var t=qr();return function(){var n,r=Br(e);if(t){var o=Br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ur(e)}(this,n)}}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qr=function(){return!!e})()}function Br(e){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Br(e)}function Vr(e,t,n){return(t=Fr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fr(e){var t=function(e){if("object"!=xr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xr(t)?t:t+""}var Kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lr(e,t)}(n,e);var t=Mr(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Vr(Ur(e=t.call.apply(t,[this].concat(o))),"createSectionLinks",(function(t){return t?t.map((function(t,n){return e.createEntry(t,n)})):null})),Vr(Ur(e),"createEntry",(function(e,t){var n=null==e.url?"button":"a";return re.createElement(kr.A.Item,{as:n,key:t,href:e.url,onClick:e.onClick,className:"py-2 ps-0"},re.createElement("div",{className:"ms-0"},re.createElement("span",{className:be()("ms-2 align-middle icon",e.icon,{"fonticon-placeholder":!e.icon})},e.title)))})),Vr(Ur(e),"createSectionTitle",(function(e,t){return e?re.createElement(kr.A.Header,{key:t},e):null})),Vr(Ur(e),"createSection",(function(){return e.props.links.map((function(t,n){return t.title&&t.links?[e.createSectionTitle(t.title,"title_"+n),e.createSectionLinks(t.links)]:e.createEntry(t,"el"+n)}))})),e}return function(e,t){t&&Ir(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.createSection(),t="button"===this.props.toggleType?Hr:zr;return re.createElement(kr.A,{id:this.props.id?this.props.id:"dropdown-menu"},re.createElement(kr.A.Toggle,{as:t,icon:this.props.icon}),re.createElement(kr.A.Menu,{className:"pt-0 dropdown-arrow"},e))}}]),n}(re.Component);Vr(Kr,"defaultProps",{icon:"fonticon-plus-circled",hideArrow:!1,toggleType:"link"}),Vr(Kr,"propTypes",{icon:fe().string,hideArrow:fe().bool,links:fe().array.isRequired,toggleType:fe().string.isRequired});var Hr=re.forwardRef((function(e,t){var n=e.children,r=e.onClick,o=e.icon;return re.createElement(de.A,{className:"dropdown-toggle",ref:t,onClick:function(e){e.preventDefault(),r(e)},variant:"cf-secondary"},re.createElement("i",{className:o}),n)})),zr=re.forwardRef((function(e,t){var n=e.children,r=e.onClick,o=e.icon;return re.createElement("a",{ref:t,className:"dropdown-toggle cursor-pointer icon "+o,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:function(e){e.preventDefault(),r(e)}},n)})),Gr=n(62396);function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xr.apply(null,arguments)}function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,io(r.key),r)}}function Yr(e,t,n){return t&&Jr(e.prototype,t),n&&Jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zr(e,t)}function Zr(e,t){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zr(e,t)}function eo(e){var t=no();return function(){var n,r=ro(e);if(t){var o=ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return to(e)}(this,n)}}function to(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function no(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(no=function(){return!!e})()}function ro(e){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ro(e)}function oo(e,t,n){return(t=io(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function io(e){var t=function(e){if("object"!=Wr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wr(t)?t:t+""}var ao=function(e){$r(n,e);var t=eo(n);function n(e){var r;return Qr(this,n),oo(to(r=t.call(this,e)),"getChildren",(function(e){var t=e[0].style,n="tray show-tray "+r.props.className;return re.createElement("div",{key:"1",id:r.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:n},r.props.children)})),oo(to(r),"willEnter",(function(){return{opacity:(0,le.oz)(1),top:(0,le.oz)(64)}})),oo(to(r),"willLeave",(function(){return{opacity:(0,le.oz)(0),top:(0,le.oz)(30)}})),oo(to(r),"getDefaultStyles",(function(){return[{key:"1",style:{opacity:0,top:30}}]})),oo(to(r),"getStyles",(function(e){return e?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:r.willEnter()}]})),e.container||(r.container=to(r)),r}return Yr(n,[{key:"render",value:function(){return re.createElement(Gr.A,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",target:this.props.container,rootClose:!0,onEnter:this.props.onEnter},re.createElement(le.S6,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),n}(re.Component);oo(ao,"propTypes",{contentVisible:fe().bool.isRequired,closeTray:fe().func.isRequired,onEnter:fe().func,container:fe().object}),oo(ao,"defaultProps",{onEnter:function(){}});var co=function(e){$r(n,e);var t=eo(n);function n(){var e;Qr(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return oo(to(e=t.call.apply(t,[this].concat(o))),"renderChildren",(function(){return re.Children.map(e.props.children,(function(t){var n={};return Object.keys(e.props).filter((function(t){return Object.prototype.hasOwnProperty.call(e.props,t)})).map((function(t){return n[t]=e.props[t]})),re.cloneElement(t,n)}))})),e}return Yr(n,[{key:"render",value:function(){return re.createElement("div",null,this.renderChildren())}}]),n}(re.Component);function so(e){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bo(r.key),r)}}function lo(e,t){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lo(e,t)}function po(e){var t=mo();return function(){var n,r=ho(e);if(t){var o=ho(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==so(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fo(e)}(this,n)}}function fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mo=function(){return!!e})()}function ho(e){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ho(e)}function yo(e,t,n){return(t=bo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bo(e){var t=function(e){if("object"!=so(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=so(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==so(t)?t:t+""}oo(co,"defaultProps",{className:""});var vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(n,e);var t=po(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return yo(fo(e=t.call.apply(t,[this].concat(o))),"state",{inputValue:"",disableSubmit:!0}),yo(fo(e),"close",(function(t){t&&t.preventDefault(),e.setState({inputValue:"",disableSubmit:!0}),e.props.showHide({showModal:!1})})),yo(fo(e),"open",(function(){e.props.showHide({showModal:!0})})),yo(fo(e),"getDatabaseName",(function(){return e.props.modalProps.dbId.trim()})),yo(fo(e),"onInputChange",(function(t){var n=t.target.value.trim();e.setState({inputValue:n}),e.setState({disableSubmit:n!==e.getDatabaseName()})})),yo(fo(e),"onDeleteClick",(function(t){t.preventDefault(),Tt.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),yo(fo(e),"onInputKeypress",(function(t){13===t.keyCode&&!0!==e.state.disableSubmit&&Tt.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),e}return function(e,t){t&&uo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,r=e?re.createElement("p",{style:{color:"#d14"},className:"warning"},re.createElement("b",null,"You are about to delete a system database, be careful!")):null;return re.createElement(Dt.A,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,"Confirm Deletion")),re.createElement(Dt.A.Body,null,r,re.createElement("p",null,"Warning: This action will permanently delete ",re.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),re.createElement("input",{type:"text",className:"form-control",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#",onClick:this.close,"data-bypass":"true",variant:"cf-cancel",className:"cancel-link"},"Cancel"),re.createElement(de.A,{id:"delete-db-btn",disabled:this.state.disableSubmit,onClick:this.onDeleteClick,variant:"cf-danger"},re.createElement("i",{className:"fonticon fonticon-trash"})," Delete Database")))}}]),n}(re.Component);yo(vo,"propTypes",{showHide:fe().func.isRequired,modalProps:fe().object,onSuccess:fe().func});var go=function(e){var t=e.selected,n=e.text,r=e.onChange,o=e.iconClass,i=e.badgeText,a=t?"tab-element-checked":"",c=null;return i&&(c=re.createElement("span",{className:"tab-element-badge"},i)),re.createElement("li",{className:"component-tab-element ".concat(a)},re.createElement("label",null,re.createElement("div",{className:"tab-element-content"},re.createElement("i",{className:o}),re.createElement("input",{type:"radio",value:n,checked:t,onChange:r}),n,c),re.createElement("div",{className:"tab-element-indicator-wrapper"},re.createElement("div",{className:"tab-element-indicator"}))))};go.propTypes={selected:fe().bool.isRequired,text:fe().string.isRequired,onChange:fe().func.isRequired,iconClass:fe().string,badgeText:fe().string};var _o,wo=function(e){var t=e.children;return re.createElement("ul",{className:"component-tab-element-wrapper"},t)},Eo=n(62972);function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function So(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Do(r.key),r)}}function Do(e){var t=function(e){if("object"!=Oo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oo(t)?t:t+""}function No(e,t){return No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},No(e,t)}function Po(e){var t=To();return function(){var n,r=Ro(e);if(t){var o=Ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Oo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Co(e)}(this,n)}}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function To(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(To=function(){return!!e})()}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ro(e)}var jo=function(){_o&&window.clearInterval(_o)},Ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&No(e,t)}(n,e);var t=Po(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={value:r.props.startValue},r.updatePollingFreq=r.updatePollingFreq.bind(Co(r)),r}return function(e,t){t&&So(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){jo()}},{key:"setPollingCounter",value:function(e){var t,n,r=this.props,o=r.min,i=r.max,a=r.onPoll;this.setState({value:e}),0===e||e<o||e>i?jo():(t=1e3*e,n=function(){return a()},jo(),_o=window.setInterval(n,t))}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,r=e.max,o=e.valueUnits,i=this.state.value,a=function(e,t,n,r){var o=parseInt(e,10);if(0===o||o>n||o<r)return"off";if(o<60&&"minute"===t)return"".concat(o," seconds");var i=o;return"minute"===t&&(i=Math.floor(o/60)),"".concat(i," ").concat(1===i?t:"".concat(t,"s"))}(i,o,r,n),c="off"===a?"faux__polling-info-value--off":"faux__polling-info-value--active";return re.createElement("div",{className:"faux__polling"},re.createElement("div",{className:"faux__polling-info"},re.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),re.createElement("span",{className:"faux__polling-info-value faux__polling-info-value ".concat(c)},a)),re.createElement(Eo.A,{className:"faux__polling-info-slider",min:n,max:r+t,step:t,defaultValue:i,onChange:this.updatePollingFreq}))}}]),n}(re.Component);Ao.defaultProps={startValue:0,min:0,valueUnits:"minute"},Ao.propTypes={startValue:fe().number,valueUnits:fe().string,min:fe().number,max:fe().number.isRequired,stepSize:fe().number.isRequired,onPoll:fe().func.isRequired};var ko=function(e){var t=e.refresh;return re.createElement("div",{className:"faux__refresh-btn"},re.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},re.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))};ko.propTypes={refresh:fe().func.isRequired};var xo,Io=n(87393),Lo=n.n(Io);function Mo(e){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qo(r.key),r)}}function qo(e){var t=function(e){if("object"!=Mo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mo(t)?t:t+""}function Bo(e,t){return Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bo(e,t)}function Vo(e){var t=Fo();return function(){var n,r=Ko(e);if(t){var o=Ko(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Mo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fo=function(){return!!e})()}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ko(e)}var Ho=function(e,t){(xo=new(Lo())("#copy-"+e)).on("success",(function(){t()}))},zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bo(e,t)}(n,e);var t=Vo(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Uo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){Ho(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){xo.destroy()}},{key:"componentDidUpdate",value:function(){Ho(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?re.createElement("i",{"aria-hidden":"true",className:"fonticon-copy"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return re.createElement("button",{"aria-label":"Copy to Clipboard",className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?re.createElement("p",null,re.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}]),n}(re.Component);function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xo(r.key),r)}}function Xo(e){var t=function(e){if("object"!=Go(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Go(t)?t:t+""}function Qo(e,t){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qo(e,t)}function Jo(e){var t=Yo();return function(){var n,r=$o(e);if(t){var o=$o(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Go(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Yo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yo=function(){return!!e})()}function $o(e){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$o(e)}zo.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},zo.propTypes={text:fe().string.isRequired,displayType:fe().oneOf(["icon","text","input"]),uniqueKey:fe().string.isRequired,onClipboardClick:fe().func.isRequired};var Zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qo(e,t)}(n,e);var t=Jo(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Wo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,r=n.map((function(e,n){return re.createElement(go,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){ee.navigate(e.route,{redirect:!0})},iconClass:""})})),o=n.reduce((function(e,n){return n.name===t?n:e}),{});return o.component?re.createElement("div",{className:"tab__wrapper"},re.createElement(wo,null,r),re.createElement("div",{className:"tab__container"},re.createElement(o.component,null))):null}}]),n}(re.Component);Zo.propTypes={tabs:fe().array.isRequired,selectedTab:fe().string.isRequired};var ei=n(12307);function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oi(e,t,n){return(t=ai(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ai(r.key),r)}}function ai(e){var t=function(e){if("object"!=ti(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ti(t)?t:t+""}function ci(e,t){return ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ci(e,t)}function si(e){var t=ui();return function(){var n,r=li(e);if(t){var o=li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ti(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ui(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ui=function(){return!!e})()}function li(e){return li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},li(e)}var pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}(n,e);var t=si(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).lastCall=void 0,r}return function(e,t){t&&ii(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,r){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout((function(){e(n,r)}),400)}:function(){}}},{key:"render",value:function(){var e=this.wrapThrottler(this.props.loadOptions).bind(this),t=ri(ri({},this.props),{},{loadOptions:e,onBlurResetsInput:!1});return re.createElement(ei.Ay.Async,t)}}]),n}(re.Component);const fi={Accordion:function(e){var t=e.children,n=e.className,r=e.style,o=be()("faux--accordion",n);return re.createElement("ul",{className:o,style:r},t)},AccordionItem:Pe,BadgeList:Fe,Badge:Ke,BulkActionComponent:St,ConfirmButton:Ar,ToggleHeaderButton:et,CodeEditorPanel:Gn,CodeEditor:ln,StringEditModal:$t,ZenModeOverlay:xn,Beautify:On,PaddedBorderedBox:er,Polling:Ao,Document:wr,LoadLines:Er,MenuDropDown:Kr,TrayContents:ao,TrayWrapper:co,connectToStores:function(e,t,n){var r=function(r){$r(i,r);var o=eo(i);function i(){var e;Qr(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return oo(to(e=o.call.apply(o,[this].concat(r))),"state",n(e.props)),oo(to(e),"onChange",(function(){e.setState(n(e.props))})),oo(to(e),"handleStoresChanged",(function(){e.setState(n(e.props))})),e}return Yr(i,[{key:"componentDidMount",value:function(){var e=this;t.forEach((function(t){t.on("change",e.onChange,e)}))}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return re.createElement(e,Xr({},this.state,this.props))}}]),i}(re.Component);return r},DeleteDatabaseModal:vo,TabElement:go,TabElementWrapper:wo,RefreshBtn:ko,Copy:zo,TabWindowWrapper:Zo,ThrottledReactSelectAsync:pi,ToolbarButton:mt};function di(e){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(e)}function mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wi(r.key),r)}}function hi(e,t){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hi(e,t)}function yi(e){var t=vi();return function(){var n,r=gi(e);if(t){var o=gi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bi(e)}(this,n)}}function bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vi=function(){return!!e})()}function gi(e){return gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gi(e)}function _i(e,t,n){return(t=wi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e){var t=function(e){if("object"!=di(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==di(t)?t:t+""}var Ei=fi.Copy,Oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hi(e,t)}(n,e);var t=yi(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return _i(bi(e=t.call.apply(t,[this].concat(o))),"clearNotification",(function(){var t=e.props.item.toastId;e.props.clearSingleNotification(t)})),e}return function(e,t){t&&mi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props.item.time.fromNow(),t="fonticon "+{success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"}[this.props.item.type],n="all"!==this.props.filter&&this.props.filter!==this.props.item.type;return re.createElement("li",{"aria-hidden":n},re.createElement("div",{className:"flex-layout flex-row"},re.createElement("span",{className:t}),re.createElement("div",{className:"flex-body"},re.createElement("p",null,this.props.item.cleanMsg),re.createElement("div",{className:"notification-actions"},re.createElement("span",{className:"time-elapsed"},e),re.createElement("span",{className:"divider"},"|"),re.createElement(Ei,{uniqueKey:(0,me.A)(),text:this.props.item.cleanMsg,displayType:"text"}))),re.createElement("button",{type:"button",onClick:this.clearNotification},"Ã—")))}}]),n}(re.Component);function Si(e){return Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Si(e)}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ai(r.key),r)}}function Ni(e,t){return Ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ni(e,t)}function Pi(e){var t=Ti();return function(){var n,r=Ri(e);if(t){var o=Ri(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}(this,n)}}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ti(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ti=function(){return!!e})()}function Ri(e){return Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ri(e)}function ji(e,t,n){return(t=Ai(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ai(e){var t=function(e){if("object"!=Si(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Si(t)?t:t+""}_i(Oi,"propTypes",{item:fe().object.isRequired,filter:fe().string.isRequired,clearSingleNotification:fe().func.isRequired});var ki=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ni(e,t)}(n,e);var t=Pi(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ji(Ci(e=t.call.apply(t,[this].concat(o))),"getNotifications",(function(t){var n;return n=t.length||e.props.notifications.length?t.map((function(t){var n=t.key,r=t.data,o=t.style;return re.createElement(Oi,{item:r,filter:e.props.filter,clearSingleNotification:e.props.clearSingleNotification,key:n,style:o})})):re.createElement("li",{className:"no-notifications"},"No notifications."),re.createElement("ul",{className:"notification-list"},n)})),ji(Ci(e),"getStyles",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.props.notifications.map((function(n){var r=t.find((function(e){return e.key===n.toastId.toString()})),o=!r&&{opacity:0,height:0};return o||n.type!==e.props.filter&&"all"!==e.props.filter?n.type!==e.props.filter&&(o={opacity:(0,le.oz)(0,le.v4.stiff),height:(0,le.oz)(0,le.v4.stiff)}):o={opacity:(0,le.oz)(1,le.v4.stiff),height:(0,le.oz)(61,le.v4.stiff)},{key:n.toastId.toString(),style:o,data:n}}))})),e}return function(e,t){t&&Di(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this;if(!this.props.isVisible&&0===this.props.style.x)return null;var t={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};t[this.props.filter]+=" selected";var n="notification-page-mask ".concat(this.props.isVisible?" visible":"");return re.createElement("div",{id:"notification-center"},re.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate(".concat(this.props.style.x,"px)")}},re.createElement("header",{className:"flex-layout flex-row"},re.createElement("span",{className:"fonticon fonticon-bell"}),re.createElement("h1",{className:"flex-body"},"Notifications"),re.createElement("button",{"aria-label":"Hide Notifications Center",type:"button",onClick:this.props.hideNotificationCenter},"Ã—")),re.createElement("ul",{"aria-label":"Filters",className:"notification-filter flex-layout flex-row"},re.createElement("li",{className:t.all,title:"All notifications","data-filter":"all",onClick:function(){return e.props.selectNotificationFilter("all")}},"All"),re.createElement("li",{className:t.success,title:"Success notifications","data-filter":"success",onClick:function(){return e.props.selectNotificationFilter("success")}},re.createElement("span",{className:"fonticon fonticon-ok-circled"})),re.createElement("li",{className:t.error,title:"Error notifications","data-filter":"error",onClick:function(){return e.props.selectNotificationFilter("error")}},re.createElement("span",{className:"fonticon fonticon-attention-circled"})),re.createElement("li",{className:t.info,title:"Info notifications","data-filter":"info",onClick:function(){return e.props.selectNotificationFilter("info")}},re.createElement("span",{className:"fonticon fonticon-info-circled"}))),re.createElement("div",{className:"flex-body"},re.createElement(le.S6,{styles:this.getStyles},this.getNotifications)),re.createElement("footer",null,re.createElement(de.A,{type:"button",variant:"cf-secondary",onClick:this.props.clearAllNotifications},"Clear All"))),re.createElement("div",{className:n,onClick:this.props.hideNotificationCenter}))}}]),n}(re.Component);function xi(e){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(e)}function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ii.apply(null,arguments)}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ki(r.key),r)}}function Mi(e,t){return Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mi(e,t)}function Ui(e){var t=Bi();return function(){var n,r=Vi(e);if(t){var o=Vi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qi(e)}(this,n)}}function qi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bi=function(){return!!e})()}function Vi(e){return Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vi(e)}function Fi(e,t,n){return(t=Ki(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ki(e){var t=function(e){if("object"!=xi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xi(t)?t:t+""}ji(ki,"propTypes",{isVisible:fe().bool.isRequired,filter:fe().string.isRequired,notifications:fe().array.isRequired,hideNotificationCenter:fe().func.isRequired,selectNotificationFilter:fe().func.isRequired,clearAllNotifications:fe().func.isRequired,clearSingleNotification:fe().func.isRequired});var Hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mi(e,t)}(n,e);var t=Ui(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Fi(qi(e=t.call.apply(t,[this].concat(o))),"getStyles",(function(){var t={key:"1",style:{x:320}};return e.props.isVisible?t.style={x:(0,le.oz)(0)}:t.style={x:(0,le.oz)(320)},[t]})),Fi(qi(e),"getNotificationCenterPanel",(function(t){var n=t.map((function(t){var n=t.style;return re.createElement(ki,Ii({key:"1",style:n},e.props))}));return re.createElement("aside",{"aria-label":"Notifications"},n)})),e}return function(e,t){t&&Li(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement(le.S6,{styles:this.getStyles},this.getNotificationCenterPanel)}}]),n}(re.Component);const zi=(0,oe.Ng)((function(e){var t=e.notifications;return{isVisible:t.notificationCenterVisible,filter:t.selectedNotificationFilter,notifications:t.notifications}}),(function(e){return{hideNotificationCenter:function(){e((function(e){e({type:ae})}))},selectNotificationFilter:function(t){e(function(e){return function(t){t({type:ue,options:{filter:e}})}}(t))},clearAllNotifications:function(){e((function(e){e({type:se})}))},clearSingleNotification:function(t){e(function(e){return function(t){t({type:ce,options:{toastId:e}})}}(t))}}}))(Hi);function Gi(e){return Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gi(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zi(r.key),r)}}function Xi(e,t){return Xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xi(e,t)}function Qi(e){var t=Ji();return function(){var n,r=Yi(e);if(t){var o=Yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ji=function(){return!!e})()}function Yi(e){return Yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yi(e)}function $i(e,t,n){return(t=Zi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zi(e){var t=function(e){if("object"!=Gi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Gi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gi(t)?t:t+""}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xi(e,t)}(n,e);var t=Qi(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Wi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getContent",value:function(){return re.createElement("p",{className:"perma-warning__content"},this.props.message)}},{key:"render",value:function(){return this.props.visible&&this.props.message?re.createElement("div",{id:"perma-warning"},this.getContent()):null}}]),n}(re.Component);$i(ea,"defaultProps",{visible:!1}),$i(ea,"propTypes",{visible:fe().bool.isRequired,message:fe().node});const ta=(0,oe.Ng)((function(e){var t=e.notifications;return{visible:t.permanentNotificationVisible,message:t.permanentNotificationMessage}}))(ea);var na=function(e){var t=e.version;return t?re.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on Â ",re.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),re.createElement("div",null,"v. ",t),re.createElement("a",{href:"https://docs.couchdb.org/en/latest/whatsnew/".concat(t.split(".").slice(0,2).join("."),".html")},"What's New?")):null};na.propTypes={version:fe().string};const ra=na;var oa=function(e){var t=e.toggleMenu,n=e.isMinimized,r=be()("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"fonticon-menu":"fonticon-menu_close";return re.createElement("div",{"aria-expanded":!n,"aria-label":"Toggle Navigation Menu",className:r,onClick:t,role:"button",tabIndex:"0"},re.createElement("i",{"aria-hidden":"true",className:"faux-navbar__burger__icon "+o}))};oa.propTypes={toggleMenu:fe().func.isRequired,isMinimized:fe().bool.isRequired};const ia=oa;var aa=function(e){var t=e.link,n=e.active,r=e.isMinimized,o=n===t.title,i=be()("faux-navbar__link",{"faux-navbar__link--active":o},{"faux-navbar__link--inactive":!o},{"faux-navbar--wide":!r},{"faux-navbar--narrow":r}),a=r?null:re.createElement("span",{className:"faux-navbar__text"},t.title),c=null;return t.icon&&(c=re.createElement("i",{"aria-hidden":"true",className:be()(t.icon,"fonticon faux-navbar__icon")})),re.createElement("a",{"aria-current":o?"page":null,"aria-label":t.title,className:i,href:t.href,target:t.target?"_blank":null,rel:"noreferrer noopener","data-bypass":t.target?"true":null},re.createElement("div",{"data-nav-name":t.title,className:be()("faux-navbar__itemarea",{"faux-navbar__icon-badge":t.badge})},c,a))};aa.propTypes={link:fe().object.isRequired,active:fe().string,isMinimized:fe().bool.isRequired};const ca=aa;var sa=function(e){var t=e.isMinimized,n=be()("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return re.createElement("div",{className:"faux-navbar__brand"},re.createElement("div",{className:n}))};sa.propTypes={isMinimized:fe().bool.isRequired};const ua=sa;var la=function(e){var t=e.username,n=e.isMinimized,r=be()("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return re.createElement("a",{className:"faux-logout__link",href:"#/logout"},re.createElement("div",{className:r},re.createElement("span",{className:"faux-navbar__logout__text"},"Log Out"),"Â ",n?null:re.createElement("span",{title:t,className:"faux-navbar__logout__username"},c().escape(t))))};la.propTypes={username:fe().string,isMinimized:fe().bool.isRequired};const pa=la;var fa=function(e){var t=e.isMinimized,n=be()("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return re.createElement("a",{className:"faux-login__link",href:"#/login"},re.createElement("div",{className:n},re.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};fa.propTypes={isMinimized:fe().bool.isRequired};const da=fa;function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ya(r.key),r)}}function ya(e){var t=function(e){if("object"!=ma(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ma(t)?t:t+""}function ba(e,t){return ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ba(e,t)}function va(e){var t=ga();return function(){var n,r=_a(e);if(t){var o=_a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ma(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ga(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ga=function(){return!!e})()}function _a(e){return _a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_a(e)}var wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ba(e,t)}(n,e);var t=va(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&ha(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,r=t.isMinimized;return e.map((function(e,t){return re.createElement(ca,{key:t,link:e,active:n,isMinimized:r})}))}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,r=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,i=e.activeLink,a=e.username,c=e.isNavBarVisible,s=e.toggleNavbarMenu;if(!c)return null;var u=this.createLinks(this.props.navLinks),l=this.createLinks(this.props.bottomNavLinks),p=this.createLinks(this.props.footerNavLinks),f=be()("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),d=o?re.createElement(da,{active:i,isMinimized:t}):re.createElement(pa,{username:a,isMinimized:t});return re.createElement("div",{className:f},re.createElement("nav",null,re.createElement("div",{className:"faux-navbar__linkcontainer"},re.createElement(ia,{isMinimized:t,toggleMenu:s}),re.createElement("div",{className:"faux-navbar__links"},u,l),re.createElement("div",{className:"faux-navbar__footer"},re.createElement(ua,{isMinimized:t}),re.createElement("div",null,p),re.createElement(ra,{version:n}),r?d:null))))}}]),n}(re.Component);wa.propTypes={activeLink:fe().string,isMinimized:fe().bool.isRequired,version:fe().string,username:fe().string,navLinks:fe().array,bottomNavLinks:fe().array,footerNavLinks:fe().array,isNavBarVisible:fe().bool,isLoginSectionVisible:fe().bool.isRequired,isLoginVisibleInsteadOfLogout:fe().bool.isRequired,toggleNavbarMenu:fe().func.isRequired};const Ea=wa,Oa="TOGGLE_NAVBAR_MENU",Sa="NAVBAR_SET_VERSION_INFO",Da="NAVBAR_ACTIVE_LINK";const Na=(0,oe.Ng)((function(e){var t=e.navigation,n=ee.session.user();return{navLinks:t.navLinks,bottomNavLinks:t.bottomNavLinks,footerNavLinks:t.footerNavLinks,activeLink:t.activeLink,version:t.version,isMinimized:t.isMinimized,isNavBarVisible:t.navBarVisible,isLoginSectionVisible:t.loginSectionVisible,isLoginVisibleInsteadOfLogout:t.loginVisibleInsteadOfLogout,username:n&&n.name?n.name:""}}),(function(e){return{toggleNavbarMenu:function(){e((function(e){e({type:Oa})}))}}}))(Ea);var Pa=n(43420);function Ca(e){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(e)}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ua(r.key),r)}}function ja(e,t,n){return t&&Ra(e.prototype,t),n&&Ra(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ka(e,t)}function ka(e,t){return ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ka(e,t)}function xa(e){var t=La();return function(){var n,r=Ma(e);if(t){var o=Ma(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ia(e)}(this,n)}}function Ia(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function La(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(La=function(){return!!e})()}function Ma(e){return Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ma(e)}function Ua(e){var t=function(e){if("object"!=Ca(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ca(t)?t:t+""}var qa=function(e){Aa(n,e);var t=xa(n);function n(e){var r;return Ta(this,n),function(e,t,n){(t=Ua(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ia(r=t.call(this,e)),"onKeydown",(function(e){27===(e.keyCode||e.which)&&Pa.oR.dismiss()})),r.state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&r.props.setNavbarActiveLink(r.state.routerOptions.selectedHeader),r}return ja(n,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",(function(t){e.setState({routerOptions:t}),e.props.setNavbarActiveLink(e.state.routerOptions.selectedHeader)})),this.props.router.on("trigger-update",(function(){e.forceUpdate()})),document.addEventListener("keydown",this.onKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown)}},{key:"render",value:function(){return this.state.routerOptions&&this.state.routerOptions.component||null}}]),n}(re.Component),Ba=function(e){Aa(n,e);var t=xa(n);function n(e){return Ta(this,n),t.call(this,e)}return ja(n,[{key:"render",value:function(){var e=be()({closeMenu:this.props.isPrimaryNavMinimized}),t=be()({"app-container__with-perm-notification":this.props.isPermanentNotificationShowing});return re.createElement("div",null,re.createElement(Pa.N9,{className:"toastify-toast-container",position:"top-right",autoClose:5e3,closeButton:!1,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),re.createElement(ta,null),re.createElement("div",{id:"notifications"},re.createElement(zi,null)),re.createElement("div",{id:"main",className:e},re.createElement("div",{id:"app-container",className:t},re.createElement("div",{className:"wrapper"},re.createElement("div",{role:"main",className:"pusher"},re.createElement(qa,{router:this.props.router,setNavbarActiveLink:this.props.setNavbarActiveLink})),re.createElement("div",{id:"primary-navbar"},re.createElement(Na,null))))))}}]),n}(re.Component);const Va=(0,oe.Ng)((function(e){var t=e.navigation,n=e.notifications;return{isPrimaryNavMinimized:t.isMinimized,isPermanentNotificationShowing:n.permanentNotificationVisible}}),(function(e){return{setNavbarActiveLink:function(t){var n;e((n=t,function(e){e({type:Da,name:n})}))}}}))(Ba);var Fa=n(87601),Ka=n(66376);function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){Wa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wa(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ha(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ha(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xa={isMinimized:!0,activeLink:null,version:null,navLinks:[],footerNavLinks:[],bottomNavLinks:[],navBarVisible:!0,loginSectionVisible:!1,loginVisibleInsteadOfLogout:!0};function Qa(e,t,n){var r=Ja(e,t),o=r.links,i=r.sectionName,a=!1,c=o.map((function(e){return e.title===t.title?(a=!0,Ga(Ga({},e),{},{badge:n})):e}));if(!a)return e;var s=Ga({},e);return s[i]=c,s}function Ja(e,t){var n=e.navLinks,r="navLinks";return t.bottomNav&&(n=e.bottomNavLinks,r="bottomNavLinks"),t.footerNav&&(n=e.footerNavLinks,r="footerNavLinks"),{links:n,sectionName:r}}function Ya(e){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(e)}function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){ec(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ec(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ya(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ya(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tc={notifications:[],notificationCenterVisible:!1,selectedNotificationFilter:"all",permanentNotificationVisible:!1,permanentNotificationMessage:""},nc=0,rc=["success","error","info"],oc=["all","success","error","info"];function ic(e,t){var n=e.notifications,r=n.slice();if((t=Za({},t)).toastId=++nc,t.time=m()(),t.cleanMsg=ne.utils.stripHTML(t.msg),!0!==t.escape&&!1!==t.escape&&(t.escape=!0),t.clear){var o=_.map(n,"toastId");setTimeout((function(){o.forEach((function(e){return Pa.oR.dismiss(e)}))}),800)}return r.unshift(t),(0,Pa.oR)(re.createElement("span",null,t.msg),t),r}function ac(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.toastId===t}));if(-1===r)return n;var o=[].concat(n);return o.splice(r,1),Pa.oR.dismiss(t),o}var cc=ee.addon();cc.initialize=function(){var e=new cc.VersionInfo;e.fetch().then((function(){!function(e){ee.reduxDispatch({type:Sa,version:e})}(e.get("version"))}))},cc.VersionInfo=Backbone.Model.extend({url:function(){return ne.host}}),ee.addReducers({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NAVBAR_LINK":return function(e,t){var n=Ga({},e);return t.top&&!t.bottomNav?(n.navLinks=[].concat(n.navLinks),n.navLinks.unshift(t),n):t.top&&t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.unshift(t),n):t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.push(t),n):t.footerNav?(n.footerNavLinks=[].concat(n.footerNavLinks),n.footerNavLinks.push(t),n):(n.navLinks=[].concat(n.navLinks),n.navLinks.push(t),n)}(e,t.link);case Oa:return Ga(Ga({},e),{},{isMinimized:!e.isMinimized});case"UPDATE_NAVBAR_LINK":return function(e,t){var n=Ja(e,t),r=n.links,o=n.sectionName,i=!1,a=r.map((function(e){return e.id===t.id?(i=!0,Ga(Ga({},e),{},{title:t.title,href:t.href})):e}));if(!i)return e;var c=Ga({},e);return c[o]=a,c}(e,t.link);case"REMOVE_NAVBAR_LINK":return function(e,t){var n=Ja(e,t),r=n.links,o=n.sectionName,i=r.filter((function(e){return e.id!==t.id}));if(i.length===r.length)return e;var a=Ga({},e);return a[o]=i,a}(e,t.link);case"SHOW_NAVBAR_LINK_BADGE":return Qa(e,t.link,!0);case"HIDE_NAVBAR_LINK_BADGE":return Qa(e,t.link,!1);case Sa:return Ga(Ga({},e),{},{version:t.version});case Da:return Ga(Ga({},e),{},{activeLink:t.name});case"NAVBAR_HIDE":return Ga(Ga({},e),{},{navBarVisible:!1});case"NAVBAR_SHOW":return Ga(Ga({},e),{},{navBarVisible:!0});case"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION":return Ga(Ga({},e),{},{loginSectionVisible:t.visible});case"NAVBAR_SHOW_LOGIN_BUTTON":return Ga(Ga({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!0});case"NAVBAR_SHOW_LOGOUT_BUTTON":return Ga(Ga({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!1});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tc,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case"ADD_NOTIFICATION":return-1===rc.indexOf(n.info.type)?e:Za(Za({},e),{},{notifications:ic(e,n.info)});case se:return Pa.oR.dismiss(),Za(Za({},e),{},{notifications:[]});case ce:return Za(Za({},e),{},{notifications:ac(e,n.toastId)});case ie:return Za(Za({},e),{},{notificationCenterVisible:!0});case ae:return Za(Za({},e),{},{notificationCenterVisible:!1});case ue:return-1===oc.indexOf(n.filter)?e:Za(Za({},e),{},{selectedNotificationFilter:n.filter});case"SHOW_PERMANENT_NOTIFICATION":return Za(Za({},e),{},{permanentNotificationVisible:!0,permanentNotificationMessage:n.msg});case"HIDE_PERMANENT_NOTIFICATION":return Za(Za({},e),{},{permanentNotificationVisible:!1});default:return e}}});const sc=cc,uc={DATABASES_SETPAGE:"DATABASES_SETPAGE",DATABASES_SETLIMIT:"DATABASES_SETLIMIT",DATABASES_SET_PROMPT_VISIBLE:"DATABASES_SET_PROMPT_VISIBLE",DATABASES_STARTLOADING:"DATABASES_STARTLOADING",DATABASES_LOADCOMPLETE:"DATABASES_LOADCOMPLETE",DATABASES_UPDATE:"DATABASES_UPDATE",DATABASES_PARTITIONED_DB_AVAILABLE:"DATABASES_PARTITIONED_DB_AVAILABLE",DATABASES_FETCH_SELECTED_DB_METADATA:"DATABASES_FETCH_SELECTED_DB_METADATA",DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS:"DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS"};var lc=P().Collection.extend({constructor:function(){P().Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=c().result(this,"url").split("?")[1]||"";this.paging=c().defaults(t.paging||{},{defaultParams:c().defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=c().clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var r=c().clone(e);return r.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(r.limit=Math.min(this.paging.defaultParams.limit,r.limit)),r.limit=n+1,r.skip=Math.max(r.skip,0),r},pageSizeReset:function(e,t){var n=c().defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return c().reduce(t,(function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e}),{})},_iterate:function(e,t){var n=c().defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=this,n=c().result(this,"url").split("?")[0];c().each(["startkey","endkey","key"],(function(n){c().has(e,n)&&t.shouldStringify(e[n])&&(e[n]=JSON.stringify(e[n]))})),this.url=n+"?"+ne.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),P().Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});const pc=lc;function fc(){return fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fc.apply(null,arguments)}var dc=ee.addon();dc.Doc=ee.Model.extend({idAttribute:"_id",documentation:function(){return ee.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return ee.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0),this.partitionKey=t.partitionKey},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return ne.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!(!this.isDdoc()||"query"!==this.get("language")&&(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDDocPartitionedOption:function(e){if(!this.isDdoc())return!1;var t=this.get("options");return t||(t={}),t.partitioned=e,this.set({options:t}),!0},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("views");r||(r={},this.set({language:"javascript"}));var o=r[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,r[e]=o,this.set({views:r}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new dc.Doc(e,{database:this.database})):this},safeID:function(){return ne.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return g(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=fc({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),dc.AllDocs=pc.extend({model:dc.Doc,documentation:function(){return ee.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+ne.utils.queryParams(t):this.params&&(n="?"+ne.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),ee.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map((function(e){return{_id:e.id,_rev:e.get("_rev")}}));return new dc.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return this.viewMeta&&this.viewMeta.update_seq||!1},parse:function(e){var t=e.rows,n=_.filter(t,(function(e){return e.value}));return e.rows=_.map(n,(function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t})),pc.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}});const mc=dc;var hc;mc.QueryParams=(hc=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],(function(e){_.has(n,e)&&(n[e]=t(n[e]))})),n},{parse:function(e){return hc(e,JSON.parse)},stringify:function(e){return hc(e,JSON.stringify)}}),mc.DdocInfo=ee.Model.extend({idAttribute:"_id",documentation:function(){return ee.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),ee.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){return ne.utils.getSafeIdForDoc(this.id)}}),mc.NewDoc=mc.Doc.extend({fetch:function(){var e=this,t=this.partitionKey?this.partitionKey+":":"";return D.getUUID().then((function(n){return n.uuids?e.set("_id",t+n.uuids[0]):e.set("_id",t+"enter_document_id"),n})).catch((function(){e.set("_id",t+"enter_document_id")}))}}),mc.BulkDeleteDoc=ee.Model.extend({idAttribute:"_id"}),mc.BulkDeleteDocCollection=ee.Collection.extend({model:mc.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return ee.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new ee.Promise((function(n,r){w(e.url(),t).then((function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,r)})).catch((function(){var t=_.reduce(e.toArray(),(function(e,t){return e.push(t.id),e}),[]);e.trigger("error",t),r(t)}))}))},handleResponse:function(e,t,n){var r=_.reduce(e,(function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e}),{errorIds:[],successIds:[]});this.removeDocuments(r.successIds),r.errorIds.length&&this.trigger("error",r.errorIds),_.isEmpty(r.successIds)?n(r.errorIds):t(r),this.trigger("updated")},removeDocuments:function(e){var t=this;_.each(e,(function(e){t.remove(t.get(e))})),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),mc.MangoBulkDeleteDocCollection=mc.BulkDeleteDocCollection.extend({url:function(){return D.getServerUrl("/".concat(this.databaseId,"/_index/_bulk_delete"))},createPayload:function(e){var t=e.filter((function(e){return"_all_docs"!==e._id})).map((function(e){return e._id}));return{docids:t}}});const yc=mc;var bc=ee.addon();bc.DocLimit=100,bc.Model=ee.Model.extend({partitioned:!1,setPartitioned:function(e){this.partitioned=e},documentation:function(){return ee.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new yc.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return ne.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+bc.DocLimit:"apiurl"===e?D.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?ee.urls("changes","app",this.safeID(),"","?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?ee.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():this.partitioned?D.getServerUrl("/"+this.safeID())+"?partitioned=true":D.getServerUrl("/"+this.safeID())},safeID:function(){return ne.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new bc.Changes({database:this,params:e}),this.changes}}),bc.Changes=ee.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return ee.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+ne.utils.queryParams(this.params)),e||(e="server"),ee.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}});const vc=bc;function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gc.apply(null,arguments)}var _c=vc.Model,wc=ee.Store.extend({initialize:function(){this.reset()},reset:function(){var e;this._loading=!1,this._promptVisible=!1,this._page=1,this._limit=((e=ne.utils.localStorageGet("fauxton:dbs_per_page"))||(e=ee.constants.MISC.DEFAULT_PAGE_SIZE),e),this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[],this._partitionedDatabasesAvailable=!1},getPage:function(){return this._page},getLimit:function(){return this._limit},setLimit:function(e){this._limit=e,ne.utils.localStorageSet("fauxton:dbs_per_page",e)},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e,t){var n=new _c({id:e,name:e});return n.setPartitioned(t),n},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map((function(t){var n=e._databaseDetails.filter((function(e){return e.db_name===t}));return gc({},{id:t,encodedId:encodeURIComponent(t),url:ee.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)},e._getDetails(n[0]))}))},_getDetails:function(e){if(!e)return{};var t=ee.getExtensions("DatabaseList:dbSizeReportFieldName"),n="active";t.length>0&&(n=t[0]);var r=e.sizes,o=r&&r[n]||r&&r.active||r&&r.external||e.data_size||0;return{dataSize:D.formatSize(o),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count,isPartitioned:e.props&&!0===e.props.partitioned}},isPartitionedDatabasesAvailable:function(){return this._partitionedDatabasesAvailable},dispatch:function(e){switch(e.type){case uc.DATABASES_SETPAGE:this._page=e.options.page;break;case uc.DATABASES_SETLIMIT:this.setLimit(e.options.limit);break;case uc.DATABASES_SET_PROMPT_VISIBLE:this.setPromptVisible(e.options.visible);break;case uc.DATABASES_STARTLOADING:this.setLoading(!0);break;case uc.DATABASES_LOADCOMPLETE:this.setLoading(!1);break;case uc.DATABASES_UPDATE:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;case uc.DATABASES_PARTITIONED_DB_AVAILABLE:this._partitionedDatabasesAvailable=e.options.available;break;default:return}this.triggerChange()}}),Ec=new wc;Ec.dispatchToken=ee.dispatcher.register(Ec.dispatch.bind(Ec));const Oc={databasesStore:Ec,DatabasesStoreConstructor:wc};var Sc=function(e){var t=ee.urls("databaseBaseURL","server",e);return v(t)};function Dc(e,t){var n=[],r=[],o=0;e.forEach((function(i){Nc(ee.urls("databaseBaseURL","server",i)).then((function(e){n.push(e)})).catch((function(){r.push(i)})).then((function(){++o===e.length&&Tc({dbList:e,databaseDetails:n,failedDbs:r,fullDbList:t})}))}))}function Nc(e){return v(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))}function Pc(){return Nc(ee.urls("allDBs","server"))}function Cc(e,t,n){var r=(t-1)*n,o=t*n;return e.slice(r,o)}function Tc(e){ee.dispatch({type:uc.DATABASES_UPDATE,options:e})}const Rc={getDatabaseList:Pc,paginate:Cc,getDatabaseDetails:Dc,fetch:Nc,updateDatabases:Tc,init:function(e){var t=this,n=e.page,r=e.limit;this.setStartLoading(),this.setPage(n),r&&this.setLimit(r),Pc().then((function(e){var o=Cc(e,n,r);t.updateDatabases({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:e}),Dc(o,e)}))},setPage:function(e){ee.dispatch({type:uc.DATABASES_SETPAGE,options:{page:e}})},setLimit:function(e){ee.dispatch({type:uc.DATABASES_SETLIMIT,options:{limit:e}})},setStartLoading:function(){ee.dispatch({type:uc.DATABASES_STARTLOADING})},setLoadComplete:function(){ee.dispatch({type:uc.DATABASES_LOADCOMPLETE})},createNewDatabase:function(e,t){if(_.isNull(e)||0===e.trim().length)ee.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});else{e=e.trim(),ee.dispatch({type:uc.DATABASES_SET_PROMPT_VISIBLE,options:{visible:!1}});var n=Oc.databasesStore.obtainNewDatabaseModel(e,t);ee.addNotification({msg:"Creating database."}),n.save().done((function(){ee.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=ee.urls("allDocs","app",ne.utils.safeURLName(e));ne.router.navigate(t,{trigger:!0})})).fail((function(e){var t=JSON.parse(e.responseText).reason;ee.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})}))}},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=ee.urls("allDocs","app",ne.utils.safeURLName(e),"");return setTimeout((function(){ee.navigate(t)}))}},fetchAllDbsWithKey:function(e,t){var n="?"+ne.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"é¦™"),limit:30}),r=D.getServerUrl("/_all_dbs".concat(n));v(r).then((function(e){var n=e.map((function(e){return{value:e,label:e}}));t(null,{options:n})}))},setPartitionedDatabasesAvailable:function(e){var t={type:uc.DATABASES_PARTITIONED_DB_AVAILABLE,options:{available:e}};ee.dispatch(t),ee.reduxDispatch(t)},checkPartitionedQueriesIsAvailable:function(){var e=this,t=ee.getExtensions(du.PARTITONED_DB_CHECK_EXTENSION).map((function(e){return e()}));ee.Promise.all(t).then((function(t){var n=t.every((function(e){return!0===e}));e.setPartitionedDatabasesAvailable(n)})).catch((function(){}))},fetchSelectedDatabaseInfo:function(e){ee.reduxDispatch({type:uc.DATABASES_FETCH_SELECTED_DB_METADATA}),Sc(e).then((function(e){if(!e.db_name){var t=e.reason?e.reason:"";throw new Error("Failed to fetch database info. "+t)}ee.reduxDispatch({type:uc.DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS,options:{metadata:e}})})).catch((function(e){ee.addNotification({msg:e.message,type:"error",clear:!0})}))}};function jc(e){return jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(e)}function Ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mc(r.key),r)}}function kc(e,t){return kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kc(e,t)}function xc(e){var t=Ic();return function(){var n,r=Lc(e);if(t){var o=Lc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==jc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ic(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ic=function(){return!!e})()}function Lc(e){return Lc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lc(e)}function Mc(e){var t=function(e){if("object"!=jc(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=jc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jc(t)?t:t+""}var Uc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kc(e,t)}(n,e);var t=xc(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Ac(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.props.visible?"":" hide");return re.createElement("div",{className:e,onClick:this.props.onClick})}}]),n}(re.Component);!function(e,t,n){(t=Mc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Uc,"propTypes",{onClick:fe().func.isRequired,visible:fe().bool.isRequired});const qc=(0,oe.Ng)((function(e){return{visible:!e.notifications.notificationCenterVisible}}),(function(e){return{onClick:function(){e((function(e){e({type:ie})}))}}}))(Uc);var Bc=function(e){var t=e.endpoint;return t?re.createElement("div",{className:"faux__jsonlink"},re.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},re.createElement("span",{className:"faux__jsonlink-link-brackets"},"{Â }"),re.createElement("span",{className:"faux__jsonlink-link-label"},"JSON"))):null},Vc=function(e){var t=e.docURL;return t?re.createElement("div",{className:"faux__doclink"},re.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},re.createElement("i",{className:"icon fonticon-bookmark"}))):null},Fc=function(e){var t=e.crumbs;return re.createElement("div",{className:"faux-header__breadcrumbs"},function(e){var t=e.length-1;return e.map((function(e,n){var r=[re.createElement(Kc,{key:n},e.name)];return e.link&&(r=[re.createElement(Kc,{key:n},re.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&r.push(re.createElement(Hc,{key:"divider_"+n})),r):r}))}(t))};Fc.propTypes={crumbs:fe().array.isRequired};var Kc=function(e){var t=e.children;return re.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},Hc=function(){return re.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})},zc=function(e){var t=e.docURL,n=e.endpoint;return re.createElement("div",{className:"faux__jsondoc-wrapper"},re.createElement(Bc,{endpoint:n}),re.createElement(Vc,{docURL:t}))},Gc=function(e){var t=e.children;return re.createElement("div",{id:"dashboard",className:"one-pane "},t)},Wc=function(e){var t=e.showApiUrl,n=e.docURL,r=e.endpoint,o=e.crumbs,i=e.children,a="right-header-flex";return D.isIE1X()&&(a+=" "+a+"--ie1X"),re.createElement("header",null,re.createElement("div",{className:"flex-layout flex-row"},re.createElement("div",{id:"breadcrumbs",className:"flex-body"},re.createElement(Fc,{crumbs:o})),re.createElement("div",{id:"right-header"},re.createElement("div",{className:a},i)),t?re.createElement(zc,{docURL:n,endpoint:r}):null,re.createElement("div",{id:"notification-center-btn"},re.createElement(qc,null))))};Wc.defaultProps={showApiUrl:!0,crumbs:[]},Wc.propTypes={docURL:fe().string,endpoint:fe().string,crumbs:fe().array};var Xc=function(e){var t=e.children;return re.createElement("div",{className:"content-area container-fluid"},re.createElement("div",{id:"tabs"}),re.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},Qc=function(e){var t=e.children;return re.createElement("div",{className:"faux__onepane-footer"},t)},Jc=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return re.createElement(Gc,null,re.createElement(Wc,{crumbs:o,endpoint:r,docURL:n}),re.createElement(Xc,null,t),re.createElement(Qc,null))},Yc=function(e){var t=e.children;return re.createElement("div",{id:"dashboard-content"},t)},$c=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return re.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},re.createElement(Wc,{crumbs:o,endpoint:r,docURL:n}),re.createElement(Yc,null,t))},Zc={};Zc.DeleteDbModalStore=ee.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=ne.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){e.type===Ct&&(this.setDeleteModal(e.options),this.triggerChange())}}),Zc.deleteDbModalStore=new Zc.DeleteDbModalStore,Zc.deleteDbModalStore.dispatchToken=ee.dispatcher.register(Zc.deleteDbModalStore.dispatch.bind(Zc.deleteDbModalStore));const es=Zc;function ts(e){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ts(e)}function ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rs(r.key),r)}}function rs(e){var t=function(e){if("object"!=ts(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ts(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ts(t)?t:t+""}function os(e,t){return os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},os(e,t)}function is(e){var t=as();return function(){var n,r=cs(e);if(t){var o=cs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function as(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(as=function(){return!!e})()}function cs(e){return cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(e)}var ss=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&os(e,t)}(n,e);var t=is(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&ns(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,(function(e){return re.createElement("option",{value:e,key:e},e)}))}},{key:"render",value:function(){return re.createElement("div",{id:"per-page"},re.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label," Â ",re.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"form-select form-select-sm"},this.getOptions())))}}]),n}(re.Component);function us(e){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},us(e)}function ls(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ps(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_s(r.key),r)}}function fs(e,t,n){return t&&ps(e.prototype,t),n&&ps(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ds(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ms(e,t)}function ms(e,t){return ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ms(e,t)}function hs(e){var t=bs();return function(){var n,r=vs(e);if(t){var o=vs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ys(e)}(this,n)}}function ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bs=function(){return!!e})()}function vs(e){return vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vs(e)}function gs(e,t,n){return(t=_s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _s(e){var t=function(e){if("object"!=us(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=us(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==us(t)?t:t+""}ss.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},ss.propTypes={perPage:fe().number.isRequired,perPageChange:fe().func.isRequired,label:fe().string,options:fe().array};var ws=function(e){ds(n,e);var t=hs(n);function n(){var e;ls(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gs(ys(e=t.call.apply(t,[this].concat(o))),"getClasses",(function(){var t={js:"lang-js"},n="prettyprint";return _.has(t,e.props.lang)&&(n+=" "+t[e.props.lang]),n})),e}return fs(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return re.createElement("div",null,re.createElement("pre",{className:this.getClasses()},e))}}]),n}(re.Component);gs(ws,"defaultProps",{lang:"js"});var Es=function(e){ds(n,e);var t=hs(n);function n(){var e;ls(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gs(ys(e=t.call.apply(t,[this].concat(o))),"getVisiblePages",(function(t,n){var r,o;if(n<e.props.maxNavPages)r=1,o=n+1;else{var i=Math.floor(e.props.maxNavPages/2);o=t+i,(r=t-i)<=1&&(r=1,o=e.props.maxNavPages+1),o>n+1&&(r=n-(e.props.maxNavPages-1),o=n+1)}return{from:r,to:o}})),gs(ys(e),"createItemsForPage",(function(t){return _.range(t.from,t.to).map((function(t){return re.createElement("li",{key:t,className:"page-item "+(e.props.page===t?"active":"")},e.getLink(t,t))}))})),gs(ys(e),"getLink",(function(t,n,r){var o=r?"page-link ".concat(r):"page-link";return e.props.onClick?re.createElement("a",{className:o,onClick:e.getOnPageClick(t)},n):re.createElement("a",{className:o,href:e.props.urlPrefix+t+e.props.urlSuffix},n)})),gs(ys(e),"getTotalPages",(function(){return 0===e.props.total?1:Math.ceil(e.props.total/e.props.perPage)})),e}return fs(n,[{key:"getOnPageClick",value:function(e){var t=this;return function(n){n&&n.preventDefault(),t.props.onClick(e)}}},{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),r=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return re.createElement("ul",{className:"pagination"},re.createElement("li",{className:"page-item "+(1===this.props.page?"disabled":"")},this.getLink(r,"","fonticon-left-open")),n,re.createElement("li",{className:"page-item "+(this.props.page<e?"":"disabled")},this.getLink(o,"","fonticon-right-open")))}}]),n}(re.Component);gs(Es,"defaultProps",{perPage:ee.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10});var Os=function(e){ds(n,e);var t=hs(n);function n(){var e;ls(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gs(ys(e=t.call.apply(t,[this].concat(o))),"close",(function(t){t&&t.preventDefault(),e.props.onClose()})),e}return fs(n,[{key:"render",value:function(){var e=re.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t=this.props.onClose?re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",className:"cancel-link",onClick:this.close},"Cancel"):null,n=this.props.onSubmit?re.createElement(de.A,{variant:this.props.buttonVariant,onClick:this.props.onSubmit},re.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel):null;return re.createElement(Dt.A,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,this.props.title)),re.createElement(Dt.A.Body,null,e),re.createElement(Dt.A.Footer,null,t,n))}}]),n}(re.Component);gs(Os,"propTypes",{visible:fe().bool.isRequired,text:fe().oneOfType([fe().string,fe().element]).isRequired,onClose:fe().func.isRequired,onSubmit:fe().func.isRequired}),gs(Os,"defaultProps",{visible:!1,title:"Confirmation",text:"",successButtonLabel:"Ok",buttonVariant:"cf-primary"});const Ss={CodeFormat:ws,Pagination:Es,ConfirmationModal:Os};var Ds=n(92123);function Ns(e){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(e)}function Ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ms(r.key),r)}}function Ts(e,t,n){return t&&Cs(e.prototype,t),n&&Cs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&js(e,t)}function js(e,t){return js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},js(e,t)}function As(e){var t=xs();return function(){var n,r=Is(e);if(t){var o=Is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Ns(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ks(e)}(this,n)}}function ks(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xs=function(){return!!e})()}function Is(e){return Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Is(e)}function Ls(e,t,n){return(t=Ms(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ms(e){var t=function(e){if("object"!=Ns(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ns(t)?t:t+""}var Us=Oc.databasesStore,qs=es.deleteDbModalStore,Bs=fi.Accordion,Vs=fi.AccordionItem,Fs=fi.DeleteDatabaseModal,Ks=fi.ToggleHeaderButton,Hs=fi.TrayContents,zs=fi.ToolbarButton,Gs=function(e){Rs(n,e);var t=As(n);function n(e){var r;return Ps(this,n),Ls(ks(r=t.call(this,e)),"getStoreState",(function(){return{dbList:Us.getDbList(),loading:Us.isLoading(),showDeleteDatabaseModal:qs.getShowDeleteDatabaseModal(),showPartitionedColumn:Us.isPartitionedDatabasesAvailable(),page:Us.getPage(),limit:Us.getLimit()}})),Ls(ks(r),"onChange",(function(){r.setState(r.getStoreState())})),Ls(ks(r),"state",r.getStoreState()),r.reloadAfterDatabaseDeleted=r.reloadAfterDatabaseDeleted.bind(ks(r)),r}return Ts(n,[{key:"componentDidMount",value:function(){Us.on("change",this.onChange,this),qs.on("change",this.onChange,this),this.loadData()}},{key:"componentDidUpdate",value:function(e,t){t.page===this.state.page&&t.limit===this.state.limit||this.loadData()}},{key:"loadData",value:function(){Rc.init({page:this.state.page,limit:this.state.limit})}},{key:"componentWillUnmount",value:function(){Us.off("change",this.onChange,this),qs.off("change",this.onChange,this)}},{key:"reloadAfterDatabaseDeleted",value:function(){var e=this.state.page;e>1&&1===this.state.dbList.length&&(e-=1),Rc.init({page:e,limit:this.state.limit})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return re.createElement(Ws,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t,showPartitionedColumn:this.state.showPartitionedColumn,onDatabaseDeleted:this.reloadAfterDatabaseDeleted})}}]),n}(re.Component),Ws=function(e){Rs(n,e);var t=As(n);function n(){var e;Ps(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ls(ks(e=t.call.apply(t,[this].concat(o))),"createRows",(function(t){return t.map((function(t,n){return re.createElement(Xs,{item:t,key:n,showPartitionedColumn:e.props.showPartitionedColumn})}))})),Ls(ks(e),"getExtensionColumns",(function(){var e=ee.getExtensions("DatabaseTable:head");return _.map(e,(function(e,t){return re.createElement(e,{key:t})}))})),Ls(ks(e),"showDeleteDatabaseModal",(function(){Tt.showDeleteDatabaseModal({showDeleteModal:!e.props.showDeleteDatabaseModal.showDeleteModal})})),e}return Ts(n,[{key:"render",value:function(){if(this.props.loading)return re.createElement("div",{className:"view"},re.createElement(fi.LoadLines,null));var e=this.createRows(this.props.dbList);return re.createElement("div",{className:"view"},re.createElement(Fs,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal,onSuccess:this.props.onDatabaseDeleted}),re.createElement("table",{className:"table table-striped fauxton-table-list databases"},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",null,"Name"),re.createElement("th",null,"Size"),re.createElement("th",null,"# of Docs"),this.props.showPartitionedColumn?re.createElement("th",null,"Partitioned"):null,this.getExtensionColumns(),re.createElement("th",null,"Actions"))),re.createElement("tbody",null,e)))}}]),n}(re.Component);Ls(Ws,"propTypes",{dbList:fe().array.isRequired,showDeleteDatabaseModal:fe().object.isRequired,loading:fe().bool.isRequired,showPartitionedColumn:fe().bool.isRequired,onDatabaseDeleted:fe().func});var Xs=function(e){Rs(n,e);var t=As(n);function n(){var e;Ps(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ls(ks(e=t.call.apply(t,[this].concat(o))),"getExtensionColumns",(function(e){var t=ee.getExtensions("DatabaseTable:databaseRow");return _.map(t,(function(t,n){return re.createElement(t,{row:e,key:n})}))})),Ls(ks(e),"showDeleteDatabaseModal",(function(e){Tt.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})})),e}return Ts(n,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,r=e.url,o=e.dataSize,i=e.docCount,a=e.docDelCount,c=e.showTombstoneWarning,s=e.failed,u=e.isPartitioned,l=c?re.createElement(Qs,{docCount:i,docDelCount:a}):null;if(s)return re.createElement("tr",null,re.createElement("td",{"data-name":"database-load-fail-name"},n),re.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load."));var p=this.props.showPartitionedColumn?re.createElement("td",null,u?"Yes":"No"):null;return re.createElement("tr",null,re.createElement("td",null,re.createElement("a",{href:r},n)),re.createElement("td",null,o),re.createElement("td",null,i," ",l),p,this.getExtensionColumns(e),re.createElement("td",{className:"database-actions"},re.createElement(zs,{icon:"fonticon-replicate",title:"Replicate ".concat(n),"aria-label":"Replicate ".concat(n),onClick:function(){return ee.navigate("#/replication/_create/"+t)}}),re.createElement(zs,{icon:"fonticon-lock",title:"Set permission for ".concat(n),"aria-label":"Set permission for ".concat(n),onClick:function(){return ee.navigate("#/database/"+t+"/permissions")}}),re.createElement(zs,{icon:"fonticon-trash",title:"Delete ".concat(n),"aria-label":"Delete ".concat(n),onClick:this.showDeleteDatabaseModal.bind(this,n,t)})))}}]),n}(re.Component);Ls(Xs,"propTypes",{item:fe().shape({id:fe().string.isRequired,encodedId:fe().string.isRequired,url:fe().string.isRequired,failed:fe().bool.isRequired,dataSize:fe().string,docCount:fe().number,docDelCount:fe().number,isPartitioned:fe().bool,showTombstoneWarning:fe().bool}).isRequired,showPartitionedColumn:fe().bool.isRequired});var Qs=function(e){var t=e.docCount,n=e.docDelCount,r="This database has just ".concat(t," docs and ").concat(n," deleted docs"),o=re.createElement(Ce.A,{id:"graveyard-tooltip"},r);return re.createElement(Te.A,{placement:"top",overlay:o},re.createElement("i",{className:"js-db-graveyard fonticon fonticon-attention-circled",title:r}))},Js=function(e){Rs(n,e);var t=As(n);function n(e){var r;return Ps(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return Ts(n,[{key:"getStoreState",value:function(){return{showPartitionedOption:Us.isPartitionedDatabasesAvailable()}}},{key:"componentDidMount",value:function(){Us.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Us.off("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){return re.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},re.createElement($s,{loadOptions:Rc.fetchAllDbsWithKey}),re.createElement(Ys,{showPartitionedOption:this.state.showPartitionedOption,partitionedDbHelpText:this.props.partitionedDbHelpText}))}}]),n}(re.Component),Ys=function(e){Rs(n,e);var t=As(n);function n(e){var r;return Ps(this,n),(r=t.call(this,e)).state={isPromptVisible:!1,databaseName:"",partitionedSelected:!1},r.onTrayToggle=r.onTrayToggle.bind(ks(r)),r.closeTray=r.closeTray.bind(ks(r)),r.focusInput=r.focusInput.bind(ks(r)),r.onKeyUpInInput=r.onKeyUpInInput.bind(ks(r)),r.onChange=r.onChange.bind(ks(r)),r.onAddDatabase=r.onAddDatabase.bind(ks(r)),r.onTogglePartitioned=r.onTogglePartitioned.bind(ks(r)),r}return Ts(n,[{key:"getI18nText",value:function(e){return this.props.i18n?this.props.i18n[e]:""}},{key:"onTrayToggle",value:function(){this.setState({isPromptVisible:!this.state.isPromptVisible})}},{key:"closeTray",value:function(){this.setState({isPromptVisible:!1})}},{key:"focusInput",value:function(){this.newDbName.focus()}},{key:"onKeyUpInInput",value:function(e){13===e.which&&this.onAddDatabase()}},{key:"onChange",value:function(e){this.setState({databaseName:e.target.value})}},{key:"onAddDatabase",value:function(){var e=this.props.showPartitionedOption?this.state.partitionedSelected:void 0;Rc.createNewDatabase(this.state.databaseName,e)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedOption",value:function(){if(!this.props.showPartitionedOption)return null;var e=this.props.partitionedDbHelpText?re.createElement(Bs,{className:"partitioned-db-help"},re.createElement(Vs,{title:"Which should I choose?"},re.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.partitionedDbHelpText}}))):null;return re.createElement(nt.A.Group,{className:"mb-3",controlId:"formBasicCheckbox"},re.createElement(nt.A.Label,null,"Partitioning"),re.createElement("div",{key:"partition-radio",className:"mb-3"},re.createElement(nt.A.Check,{label:"Non-partitioned - recommended for most workloads",name:"group1",type:"radio",id:"non-partitioned-option",checked:!1===this.state.partitionedSelected,onChange:this.onTogglePartitioned}),re.createElement(nt.A.Check,{label:"Partitioned",name:"group1",type:"radio",id:"partitioned-option",checked:!0===this.state.partitionedSelected,onChange:this.onTogglePartitioned})),e)}},{key:"render",value:function(){var e=this,t=be()("new-database-tray",{"new-database-tray--expanded":this.props.showPartitionedOption});return re.createElement("div",null,re.createElement(Ks,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),re.createElement(Hs,{className:t,contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},re.createElement("div",{className:"tray-contents"},re.createElement("div",{className:"tray-header"},re.createElement("h3",null,"Create Database")),re.createElement("div",{className:"tray-body"},re.createElement(nt.A,null,re.createElement(nt.A.Group,{className:"mb-3"},re.createElement(nt.A.Label,{htmlFor:"js-new-database-name"},"Database name"),re.createElement(nt.A.Control,{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,placeholder:"database-name"})),this.partitionedOption())),re.createElement(Ds.A,{bsPrefix:"tray-footer"},re.createElement(de.A,{variant:"cf-cancel",id:"js-cancel-create-database",onClick:this.closeTray},"Cancel"),re.createElement(de.A,{variant:"cf-primary",id:"js-create-database",onClick:this.onAddDatabase},"Create")))))}}]),n}(re.Component);Ls(Ys,"defaultProps",{showPartitionedOption:!1}),Ls(Ys,"propTypes",{showPartitionedOption:fe().bool.isRequired,partitionedDbHelpText:fe().string});var $s=function(e){var t=e.loadOptions;return re.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},re.createElement("div",{className:"faux-header__searchboxcontainer"},re.createElement(fi.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;Rc.jumpToDatabase(t)}})))};$s.propTypes={loadOptions:fe().func.isRequired};var Zs=function(e){Rs(n,e);var t=As(n);function n(){var e;Ps(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ls(ks(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage(),limit:t.getLimit()}})),Ls(ks(e),"onChange",(function(){e.setState(e.getStoreState(e.props))})),Ls(ks(e),"state",e.getStoreState(e.props)),e}return Ts(n,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"onPageLinkClick",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(e,"&limit=").concat(this.state.limit);ee.navigate(t)}},{key:"onPerPageSelected",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(this.state.page,"&limit=").concat(e);ee.navigate(t)}},{key:"render",value:function(){var e=this.state,t=e.limit,n=e.page,r=e.totalAmountOfDatabases,o=1+(n-1)*t,i=Math.min(r,n*t),a=this.props.children;return re.createElement("footer",{className:"all-db-footer pagination-footer"},re.createElement("div",{id:"database-pagination"},re.createElement(Ss.Pagination,{page:n,total:r,perPage:t,onClick:this.onPageLinkClick.bind(this)})),re.createElement(ss,{label:"Databases per page",perPage:t,perPageChange:this.onPerPageSelected.bind(this)}),re.createElement("div",{className:"current-databases"},"Showing ",re.createElement("span",{className:"all-db-footer__range"},o,"â€“",i),"Â ofÂ ",re.createElement("span",{className:"all-db-footer__total-db-count"},r),"Â databases."),re.createElement("div",{className:"custom-db-footer-item"},a))}}]),n}(re.Component);Ls(Zs,"defaultProps",{linkPath:"_all_dbs",store:Us});const eu={DatabasesController:Gs,DatabaseTable:Ws,DatabaseRow:Xs,RightDatabasesHeader:Js,GraveyardInfo:Qs,AddDatabaseWidget:Ys,JumpToDatabaseWidget:$s,DatabasePagination:Zs};var tu=eu.RightDatabasesHeader,nu=eu.DatabasesController,ru=eu.DatabasePagination;const ou=function(){return re.createElement(Gc,null,re.createElement(Wc,{crumbs:[{name:"Databases"}],endpoint:ee.urls("allDBs","apiurl"),docURL:ee.constants.DOC_URLS.ALL_DBS},re.createElement(tu,{partitionedDbHelpText:ne.i18n.en_US["create-db-partitioned-help"]})),re.createElement(Xc,null,re.createElement(nu,null)),re.createElement(Qc,null,re.createElement(ru,null)))};var iu=ee.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:extra)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(e,t){var n=this.createParams(t),r=n.page,o=n.limit;return Rc.setPage(r),o&&Rc.setLimit(o),re.createElement(ou,null)},createParams:function(e){var t=1,n=void 0;if(e){var r=ne.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}});vc.RouteObjects=[iu];const au=vc;function cu(e){return cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(e)}function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){lu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lu(e,t,n){return(t=function(e){var t=function(e){if("object"!=cu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=cu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pu={partitionedDatabasesAvailable:!1,isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1};function fu(e){return e?"/_partition/".concat(e):""}au.initialize=function(){ee.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"}),Rc.checkPartitionedQueriesIsAvailable()},au.PARTITONED_DB_CHECK_EXTENSION="Databases:PartitionedDbCheck",ee.registerExtension(au.PARTITONED_DB_CHECK_EXTENSION,(function(){return v(D.getServerUrl("/")).then((function(e){return!(!e.features||-1===e.features.indexOf("partitioned"))||!(!e.features_flags||-1===e.features_flags.indexOf("partitioned"))})).catch((function(){return!1}))})),ee.addReducers({databases:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pu,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case uc.DATABASES_PARTITIONED_DB_AVAILABLE:return uu(uu({},t),{},{partitionedDatabasesAvailable:n.options.available});case uc.DATABASES_FETCH_SELECTED_DB_METADATA:return uu(uu({},t),{},{isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1});case uc.DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS:return uu(uu({},t),{},{isLoadingDbInfo:!1,dbInfo:n.options.metadata,isDbPartitioned:(e=n.options.metadata,!(!e||!e.props||!0!==e.props.partitioned))});default:return t}}}),au.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",ne.utils.safeURLName(t),"/_all_docs?limit="+au.DocLimit].join("")},ee.registerUrls("changes",{server:function(e,t){return D.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t,n){return"/database/"+e+fu(t)+"/_changes"+n},apiurl:function(e,t){return D.getApiUrl("/"+e+"/_changes"+t)}}),ee.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return D.getServerUrl("/_all_dbs".concat(e))},app:function(){return"_all_dbs"},apiurl:function(){return D.getApiUrl("/_all_dbs")}}),ee.registerUrls("databaseBaseURL",{server:function(e){return D.getServerUrl("/"+ne.utils.safeURLName(e))},apiurl:function(e){return D.getApiUrl("/"+ne.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),ee.registerUrls("permissions",{server:function(e){return D.getServerUrl("/"+e+"/_security")},app:function(e,t){return"/database/"+e+fu(t)+"/permissions"},apiurl:function(e){return D.getApiUrl("/"+e+"/_security")}});const du=au,mu="SIDEBAR_EXPAND_SELECTED_ITEM",hu="SIDEBAR_NEW_OPTIONS",yu="SIDEBAR_TOGGLE_CONTENT",bu="SIDEBAR_FETCHING",vu="SIDEBAR_SHOW_DELETE_INDEX_MODAL",gu="SIDEBAR_HIDE_DELETE_INDEX_MODAL",_u="SIDEBAR_SHOW_CLONE_INDEX_MODAL",wu="SIDEBAR_HIDE_CLONE_INDEX_MODAL",Eu="SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",Ou="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",Su="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED",Du="SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",Nu="SIDEBAR_UPDATED_DESIGN_DOCS",Pu=function(e){e.database.safeID()!==function(e){var t=e.sidebar;return!t||t.loading?"":t.database.safeID()}(ee.reduxState())&&ee.reduxDispatch({type:bu}),e.designDocs.fetch().then((function(){ee.reduxDispatch({type:hu,options:e})}),(function(t){var n="Unable to update the sidebar.";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist."),ee.navigate("/",{trigger:!0})}ee.addNotification({msg:n,type:"error",clear:!0})}))},Cu=function(e){ee.reduxDispatch({type:bu}),e.fetch().then((function(){ee.reduxDispatch({type:Nu,options:{designDocs:e}})}))},Tu=function(){ee.reduxDispatch({type:gu})},Ru=function(e){ee.reduxDispatch({type:mu,options:{selectedNavItem:e}})};var ju=ee.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new mc.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),Pu(t)},getCrumbs:function(e){return[{type:"back",link:ee.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=ne.getParams(e);return{urlParams:t,docParams:mc.QueryParams.parse(t)}}});const Au=ju;function ku(e){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(e)}function xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lu(r.key),r)}}function Iu(e,t,n){return t&&xu(e.prototype,t),n&&xu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lu(e){var t=function(e){if("object"!=ku(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ku(t)?t:t+""}var Mu=Iu((function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navItem=t,n){var r=n.designDocName,o=n.designDocSection,i=n.indexName;this.designDocName=r||"",this.designDocSection=o||"",this.indexName=i||""}}));function Uu(e){return Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uu(e)}function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bu(r.key),r)}}function Bu(e){var t=function(e){if("object"!=Uu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Uu(t)?t:t+""}function Vu(e,t){return Vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vu(e,t)}function Fu(e){var t=Hu();return function(){var n,r=zu(e);if(t){var o=zu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Uu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ku(e)}(this,n)}}function Ku(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hu=function(){return!!e})()}function zu(e){return zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zu(e)}var Gu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vu(e,t)}(n,e);var t=Fu(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).onTogglePartitioned=r.onTogglePartitioned.bind(Ku(r)),r}return function(e,t){t&&qu(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(ee.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map((function(e){return re.createElement("option",{key:e,value:e},e)})):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return re.createElement("div",{id:"new-ddoc-section",className:this.props.className},re.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),re.createElement(nt.A.Control,{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)}))}},{key:"getDocLink",value:function(){return this.props.docLink?re.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},re.createElement("i",{className:"fonticon-help-circled"})):null}},{key:"onTogglePartitioned",value:function(){this.props.onChangeNewDesignDocPartitioned(!this.props.newDesignDocPartitioned)}},{key:"getPartitionedCheckbox",value:function(){if(!this.props.isDbPartitioned)return null;var e="new-doc"!==this.props.selectedDesignDocName,t=e?this.props.selectedDesignDocPartitioned:this.props.newDesignDocPartitioned,n=e?this.props.selectedDesignDocPartitioned?"Design document is partitioned":"Design document is not partitioned":this.props.newDesignDocPartitioned?"New document will be partitioned":"New document will not be partitioned";return re.createElement("div",{className:"row"},re.createElement("div",{className:"ddoc-selector-partitioned "+this.props.className},re.createElement(nt.A.Check,{type:"checkbox",id:"js-ddoc-selector-partitioned",title:n,label:"Partitioned",checked:t,onChange:this.onTogglePartitioned,disabled:e})))}},{key:"render",value:function(){var e=re.createElement("optgroup",{label:"Select a document"},re.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return re.createElement(re.Fragment,null,re.createElement("div",{className:"row"},re.createElement("div",{className:this.props.className},re.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),re.createElement(nt.A.Select,{onChange:this.selectDesignDoc.bind(this),value:this.props.selectedDesignDocName,id:"faux__edit-view__design-doc"},e)),this.getNewDDocField()),this.getPartitionedCheckbox())}}]),n}(re.Component);function Wu(e){return Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qu(r.key),r)}}function Qu(e){var t=function(e){if("object"!=Wu(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wu(t)?t:t+""}function Ju(e,t){return Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ju(e,t)}function Yu(e){var t=$u();return function(){var n,r=Zu(e);if(t){var o=Zu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($u=function(){return!!e})()}function Zu(e){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zu(e)}Gu.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:"",className:"mb-3 col-12 col-lg-6 col-xxl-4"},Gu.propTypes={designDocList:fe().array.isRequired,onSelectDesignDoc:fe().func.isRequired,onChangeNewDesignDocName:fe().func.isRequired,selectedDesignDocName:fe().string.isRequired,selectedDesignDocPartitioned:fe().bool.isRequired,newDesignDocName:fe().string.isRequired,newDesignDocPartitioned:fe().bool.isRequired,designDocLabel:fe().string,docURL:fe().string};var el=ne.helpers.getDocUrl,tl=fi.CodeEditorPanel,nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ju(e,t)}(n,e);var t=Yu(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Xu(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getOptionsList",value:function(){return this.props.reduceOptions.map((function(e,t){return re.createElement("option",{key:t,value:e},e)}))}},{key:"getReduceValue",value:function(){return this.props.hasReduce?this.props.hasCustomReduce?this.reduceEditor.getValue():this.props.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){this.props.updateReduceCode(e)}},{key:"selectChange",value:function(e){this.props.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e,t=this,n=this.getOptionsList();return this.props.hasCustomReduce&&this.props.customReducerSupported?e=re.createElement(tl,{ref:function(e){return t.reduceEditor=e},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.props.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)}):this.props.customReducerSupported||(e=re.createElement("div",{className:"reduce-editor-warning"},re.createElement("label",null,"Partitioned views do not support custom reduce functions."))),re.createElement("div",{className:"row"},re.createElement("div",{className:"mb-3 col-12 col-lg-6 col-xxl-4"},re.createElement("label",{htmlFor:"reduce-function-selector"},re.createElement("span",null,"Reduce (optional)"),re.createElement("a",{className:"help-link","data-bypass":"true",href:el("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},re.createElement("i",{className:"fonticon-help-circled"}))),re.createElement(nt.A.Select,{onChange:this.selectChange.bind(this),id:"reduce-function-selector",value:this.props.reduceSelectedOption},n)),e)}}]),n}(re.Component);function rl(e){return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(e)}function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ol.apply(null,arguments)}function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,al(r.key),r)}}function al(e){var t=function(e){if("object"!=rl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=rl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rl(t)?t:t+""}function cl(e,t){return cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cl(e,t)}function sl(e){var t=ll();return function(){var n,r=pl(e);if(t){var o=pl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==rl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ul(e)}(this,n)}}function ul(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ll(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ll=function(){return!!e})()}function pl(e){return pl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pl(e)}nl.defaultProps={customReducerSupported:!0},nl.propTypes={reduceOptions:fe().array.isRequired,hasReduce:fe().bool.isRequired,hasCustomReduce:fe().bool.isRequired,customReducerSupported:fe().bool,reduce:fe().string,reduceSelectedOption:fe().string.isRequired,updateReduceCode:fe().func.isRequired,selectReduceChanged:fe().func.isRequired};var fl=ne.helpers.getDocUrl,dl=fi.CodeEditorPanel,ml=fi.ConfirmButton,hl=fi.LoadLines,yl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cl(e,t)}(n,e);var t=sl(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).saveView=r.saveView.bind(ul(r)),r.viewChange=r.viewChange.bind(ul(r)),r.updateMapCode=r.updateMapCode.bind(ul(r)),r}return function(e,t){t&&il(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(e){this.props.map!==e.map&&this.mapEditor&&this.mapEditor.update()}},{key:"isPartitionedView",value:function(){return"new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned}},{key:"isCustomReduceSupported",value:function(){return!(this.props.isDbPartitioned&&this.props.reduce&&!this.props.reduce.startsWith("_")&&("new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned))}},{key:"saveView",value:function(e){if(e.preventDefault(),this.designDocSelector.validate())if(this.isCustomReduceSupported()){var t=this.isPartitionedView()&&this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=ee.urls("view","showView",this.props.database.safeID(),t,this.props.saveDesignDoc.safeID(),encodeURIComponent(this.props.viewName));this.props.saveView({database:this.props.database,isNewView:this.props.isNewView,viewName:this.props.viewName,designDoc:this.props.saveDesignDoc,designDocId:this.props.designDocId,isNewDesignDoc:this.props.isNewDesignDoc,originalViewName:this.props.originalViewName,originalDesignDocName:this.props.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.props.designDocs},n)}else ee.addNotification({msg:"Partitioned views do not support custom reduce functions.",type:"error",clear:!0})}},{key:"viewChange",value:function(e){this.props.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){this.props.updateMapCode(e)}},{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if("new-doc"===this.props.designDocId||this.props.isNewView)return"#"+ee.urls("allDocs","app",e,t);var n=ne.utils.getSafeIdForDoc(this.props.designDocId),r=encodeURIComponent(this.props.viewName);return"#"+ee.urls("view","showView",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return re.createElement("div",{className:"define-view"},re.createElement(hl,null));var t=this.props.isNewView?"New View":"Edit View",n=this.props.isNewView?"Create Document and then Build Index":"Save Document and then Build Index";return re.createElement("div",{className:"define-view"},re.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView},re.createElement("h3",{className:"simple-header"},t),re.createElement("div",{className:"new-ddoc-section"},re.createElement(Gu,{ref:function(t){e.designDocSelector=t},designDocList:this.props.designDocList,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.designDocId,selectedDesignDocPartitioned:this.props.designDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:fl("DESIGN_DOCS")})),re.createElement("div",{className:"row"},re.createElement("div",{className:"mb-3 col-12 col-lg-6 col-xxl-4"},re.createElement("label",{htmlFor:"index-name"},re.createElement("span",null,"Index name"),re.createElement("a",{className:"help-link","data-bypass":"true",href:fl("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},re.createElement("i",{className:"fonticon-help-circled"}))),re.createElement(nt.A.Control,{type:"text",id:"index-name",value:this.props.viewName,onChange:this.viewChange,placeholder:"Index name"}))),re.createElement("div",{className:"mb-3"},re.createElement(dl,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:fl("MAP_FUNCS"),blur:this.updateMapCode,allowZenMode:!1,defaultCode:this.props.map})),re.createElement(nl,ol({ref:function(t){e.reduceEditor=t},customReducerSupported:this.isCustomReduceSupported()},this.props)),re.createElement("div",{className:"row mt-3"},re.createElement("div",{className:"col-12"},re.createElement(ml,{id:"save-view",text:n}),re.createElement(de.A,{href:this.getCancelLink(),variant:"cf-cancel",className:"index-cancel-link"},"Cancel")))))}}]),n}(re.Component);yl.propTypes={isLoading:fe().bool.isRequired,isNewView:fe().bool.isRequired,database:fe().object.isRequired,isDbPartitioned:fe().bool.isRequired,designDocId:fe().string.isRequired,newDesignDocName:fe().string.isRequired,viewName:fe().string.isRequired,isNewDesignDoc:fe().bool.isRequired,originalViewName:fe().string,originalDesignDocName:fe().string,designDocs:fe().object,saveDesignDoc:fe().object,partitionKey:fe().string,updateNewDesignDocName:fe().func.isRequired,changeViewName:fe().func.isRequired,updateMapCode:fe().func.isRequired};const bl="CLEAR_INDEX",vl="EDIT_INDEX",gl="SELECT_REDUCE_CHANGE",_l="VIEW_SAVED",wl="DESIGN_DOC_CHANGE",El="DESIGN_DOC_NEW_NAME_UPDATED",Ol="DESIGN_DOC_NEW_PARTITIONED_UPDATED",Sl="VIEW_NAME_CHANGE",Dl="VIEW_ADD_DESIGN_DOC",Nl="VIEW_UPDATE_MAP_CODE",Pl="VIEW_UPDATE_REDUCE_CODE";var Cl=function(e){return function(t){t({type:vl,options:e})}},Tl=function(e){return!e.isNewView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName},Rl=function(e){return function(t){t({type:Dl,designDoc:e.toJSON()})}},jl=function(e,t,n,r,o){var i=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;ee.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),a=e.get(n)||{};delete a[r];var c={};c[n]=a,e.set(c);var s,u=ee.getIndexTypePropNames(),l=_.some(u,(function(t){return e.get(t)&&_.keys(e.get(t)).length>0})),p=!1;return l?s=e.save():(s=e.destroy(),p=!0),s.then((function(){p&&t.remove(e.id),i.onSuccess()}),i.onError)},Al=function(e,t){return e.find((function(e){return e.id===t})).dDocModel()},kl=function(e,t,n,r,o,i){if("new-doc"===t){var a={_id:"_design/"+n,views:{},language:"javascript"},c=new yc.Doc(a,{database:o});return i&&c.setDDocPartitionedOption(r),c}var s=e.find((function(e){return e.id===t}));return s?s.dDocModel():null};const xl={helpers:{findDesignDoc:Al,getDesignDoc:kl},safeDeleteIndex:jl,selectReduceChanged:function(e){return function(t){t({type:gl,reduceSelectedOption:e})}},changeViewName:function(e){return function(t){t({type:Sl,name:e})}},editIndex:Cl,dispatchClearIndex:function(){ee.reduxDispatch({type:bl})},dispatchFetchDesignDocsBeforeEdit:function(e){e.designDocs.fetch({reset:!0}).then((function(){Cl(e)(ee.reduxDispatch)}),(function(t){var n="Error";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist"),ee.navigate("/",{trigger:!0})}ee.addNotification({msg:n,type:"error",clear:!0})}))},shouldRemoveDdocView:Tl,saveView:function(e,t){return function(n){var r=e.designDoc;r.setDdocView(e.viewName,e.map,e.reduce),ee.addNotification({msg:"Saving View...",type:"info",clear:!0}),Tl(e)&&r.removeDdocView(e.originalViewName),r.save().then((function(){if(ee.addNotification({msg:"View Saved.",type:"success",clear:!0}),!e.isNewView&&e.originalDesignDocName!==e.designDocId){var o=Al(e.designDocs,e.originalDesignDocName);jl(o,e.designDocs,"views",e.originalViewName,{onSuccess:function(){Cu(e.designDocs)}})}"new-doc"===e.designDocId&&Rl(r),Cu(e.designDocs),n({type:_l}),ee.navigate(t,{trigger:!0})}),(function(e){ee.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: ".concat(e.responseJSON.reason):""),type:"error",clear:!0})}))}},addDesignDoc:Rl,deleteView:function(e){return jl(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=ee.urls("allDocs","app",e.database.safeID());ee.navigate(t)}Cu(e.designDocs),ee.addNotification({msg:'The "'+e.indexName+'" view has been deleted.',type:"info",escape:!1,clear:!0}),Tu()}})},cloneView:function(e){var t=kl(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.newDesignDocPartitioned,e.database,e.isDbPartitioned),n=t.get("views");if(n&&_.has(n,e.newIndexName))ee.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=Al(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.views[e.sourceIndexName],t.set({views:n}),t.save().then((function(){e.onComplete(),ee.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),Cu(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;ee.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},gotoEditViewPage:function(e,t,n,r){ee.navigate("#"+ee.urls("view","edit",encodeURIComponent(e),t?encodeURIComponent(t):"",encodeURIComponent(n),encodeURIComponent(r)))},updateMapCode:function(e){return function(t){t({type:Nl,code:e})}},updateReduceCode:function(e){return function(t){t({type:Pl,code:e})}},selectDesignDoc:function(e){return function(t){t({type:wl,options:{value:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:El,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:Ol,options:{value:e}})}}};function Il(e){return Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(e)}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){Ul(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ul(e,t,n){return(t=function(e){var t=function(e){if("object"!=Il(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Il(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ql="function (doc) {\n  emit(doc._id, 1);\n}",Bl=["_sum","_count","_stats","_approx_count_distinct","_top_1","_top_10","_top_100","_bottom_1","_bottom_10","_bottom_100","_first","_last"],Vl=Bl.concat(["CUSTOM","NONE"]),Fl={designDocs:new Backbone.Collection,isLoading:!0,view:{reduce:"",map:ql},database:{id:"0"},designDocId:"",isNewDesignDoc:!1,newDesignDocName:"",newDesignDocPartitioned:!0,isNewView:!1,viewName:"",originalViewName:"",originalDesignDocName:"",reduceOptions:Vl};function Kl(e){return e.view.reduce?Hl(e)?"CUSTOM":e.view.reduce:"NONE"}function Hl(e){return!(!e.view.reduce||-1!==Bl.indexOf(e.view.reduce))}function zl(e,t){if("new-doc"===e.designDocId){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new yc.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}if(!e.designDocs)return null;var o=e.designDocs.find((function(t){return t.id===e.designDocId}));return o?o.dDocModel():null}function Gl(e){return e.designDocs?e.designDocs.filter((function(e){return!e.isMangoDoc()})).map((function(e){return e.id})):[]}const Wl={IndexEditorContainer:(0,oe.Ng)((function(e,t){var n,r,o,i=e.indexEditor,a=e.databases,c=(n=i,r=a.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.designDocId===e.id})))&&Mt(o.get("doc"),r));return{database:i.database,isNewView:i.isNewView,viewName:i.viewName,designDocs:i.designDocs,designDocList:Gl(i),originalViewName:i.originalViewName,originalDesignDocName:i.originalDesignDocName,isNewDesignDoc:i.isNewDesignDoc,designDocId:i.designDocId,designDocPartitioned:c,newDesignDocName:i.newDesignDocName,newDesignDocPartitioned:i.newDesignDocPartitioned,saveDesignDoc:zl(i,a.isDbPartitioned),map:i.view.map,isLoading:i.isLoading,reduce:i.view.reduce,reduceOptions:i.reduceOptions,reduceSelectedOption:Kl(i),hasCustomReduce:Hl(i),hasReduce:!!i.view.reduce,isDbPartitioned:a.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{saveView:function(t,n){e(xl.saveView(t,n))},changeViewName:function(t){e(xl.changeViewName(t))},updateMapCode:function(t){e(xl.updateMapCode(t))},selectDesignDoc:function(t){e(xl.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(xl.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(xl.updateNewDesignDocPartitioned(t))},updateReduceCode:function(t){e(xl.updateReduceCode(t))},selectReduceChanged:function(t){e(xl.selectReduceChanged(t))}}}))(yl),IndexEditor:yl,ReduceEditor:nl,DesignDocSelector:Gu};function Xl(e){return Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xl(e)}function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,np(r.key),r)}}function Jl(e,t){return Jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jl(e,t)}function Yl(e){var t=Zl();return function(){var n,r=ep(e);if(t){var o=ep(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Xl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $l(e)}(this,n)}}function $l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zl=function(){return!!e})()}function ep(e){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ep(e)}function tp(e,t,n){return(t=np(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function np(e){var t=function(e){if("object"!=Xl(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Xl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xl(t)?t:t+""}var rp=Wl.DesignDocSelector,op=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jl(e,t)}(n,e);var t=Yl(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),tp($l(r=t.call(this,e)),"submit",(function(){r.designDocSelector.validate()&&(""!==r.props.newIndexName?r.props.submit():ee.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}))})),tp($l(r),"close",(function(e){e&&e.preventDefault(),r.props.close()})),tp($l(r),"setNewIndexName",(function(e){r.props.setNewCloneIndexName(e.target.value)})),r.props.setNewCloneIndexName(""),r}return function(e,t){t&&Ql(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this;return re.createElement(Dt.A,{dialogClassName:"clone-index-modal",id:"clone-index-modal",show:this.props.visible,onHide:this.close},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,this.props.title)),re.createElement(Dt.A.Body,null,re.createElement("form",{className:"form",method:"post",onSubmit:this.submit},re.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),re.createElement(rp,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.selectedDesignDoc,selectedDesignDocPartitioned:this.props.selectedDesignDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,className:"mb-3 col-12"}),re.createElement("div",{className:"row pt-0"},re.createElement("div",{className:"col-12"},re.createElement("label",{htmlFor:"new-index-name",className:"form-label mb-0 text-capitalize"},this.props.indexLabel," Name"),re.createElement("input",{type:"text",placeholder:"New view name",value:this.props.newIndexName,className:"form-control",id:"new-index-name",onChange:this.setNewIndexName}))))),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#",variant:"cf-cancel",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),re.createElement(de.A,{onClick:this.submit,"data-bypass":"true",variant:"cf-primary",className:"save"},re.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}]),n}(re.Component);function ip(e){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(e)}function ap(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dp(r.key),r)}}function cp(e,t){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cp(e,t)}function sp(e){var t=lp();return function(){var n,r=pp(e);if(t){var o=pp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ip(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return up(e)}(this,n)}}function up(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lp=function(){return!!e})()}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pp(e)}function fp(e,t,n){return(t=dp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dp(e){var t=function(e){if("object"!=ip(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ip(t)?t:t+""}tp(op,"propTypes",{visible:fe().bool.isRequired,title:fe().string,close:fe().func.isRequired,submit:fe().func.isRequired,designDocArray:fe().array.isRequired,selectedDesignDoc:fe().string.isRequired,newDesignDocName:fe().string.isRequired,newIndexName:fe().string.isRequired,indexLabel:fe().string.isRequired,selectDesignDoc:fe().func.isRequired,updateNewDesignDocName:fe().func.isRequired,setNewCloneIndexName:fe().func.isRequired}),tp(op,"defaultProps",{title:"Clone Index",visible:!1});var mp=fi.MenuDropDown,hp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cp(e,t)}(n,e);var t=sp(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return fp(up(e=t.call.apply(t,[this].concat(o))),"state",{placement:"bottom"}),fp(up(e),"setPlacement",(function(t){var n=document.getElementById(t).getBoundingClientRect().top+150>window.innerHeight?"top":"bottom";e.setState({placement:n})})),fp(up(e),"getItemLinks",(function(t){return[{title:"Manage View",links:[{title:"Edit",icon:"fonticon-file-code-o",onClick:function(){e.indexAction("edit",{indexName:t,onEdit:e.props.onEdit})}},{title:"Clone",icon:"fonticon-files-o",onClick:function(){e.indexAction("clone",{indexName:t,onClone:e.props.onClone})}},{title:"Delete",icon:"fonticon-trash",onClick:function(){e.indexAction("delete",{indexName:t,onDelete:e.props.onDelete})}}]}]})),fp(up(e),"createItems",(function(){var t=e.props.items.sort();return _.map(t,(function(t,n){var r=ee.urls(e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.designDocName));e.props.selectedPartitionKey&&(r=ee.urls("partitioned_"+e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.selectedPartitionKey),encodeURIComponent(e.props.designDocName)));var o=e.props.selectedIndex===t?"active":"",i=e.getItemLinks(t);return re.createElement("li",{className:o,key:n},re.createElement("a",{id:e.props.designDocName+"_"+t,href:"#/"+r+encodeURIComponent(t),className:"toggle-view"},t),re.createElement("div",{className:"new-button add-dropdown sidebar-sub-item"},re.createElement(mp,{links:i,icon:"fonticon-wrench"})))}))})),fp(up(e),"indexAction",(function(t,n){switch(t){case"delete":e.props.showDeleteIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onDelete);break;case"clone":e.props.showCloneIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onClone);break;case"edit":n.onEdit(e.props.database.id,e.props.selectedPartitionKey,e.props.designDocName,n.indexName)}})),fp(up(e),"toggle",(function(){e.props.toggle(e.props.designDocName,e.props.title)})),e}return function(e,t){t&&ap(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,r="nav-design-function-"+this.props.designDocName+this.props.selector;return re.createElement("li",{id:r},re.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},re.createElement("div",{className:"fonticon-play"}),n),re.createElement(he.A,{in:this.props.isExpanded},re.createElement("ul",{className:t},this.createItems())))}}]),n}(re.Component);function yp(e){return yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(e)}function bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sp(r.key),r)}}function vp(e,t){return vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vp(e,t)}function gp(e){var t=wp();return function(){var n,r=Ep(e);if(t){var o=Ep(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==yp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _p(e)}(this,n)}}function _p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wp=function(){return!!e})()}function Ep(e){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ep(e)}function Op(e,t,n){return(t=Sp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sp(e){var t=function(e){if("object"!=yp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yp(t)?t:t+""}fp(hp,"propTypes",{urlNamespace:fe().string.isRequired,indexLabel:fe().string.isRequired,database:fe().object.isRequired,designDocName:fe().string.isRequired,items:fe().array.isRequired,isExpanded:fe().bool.isRequired,selectedIndex:fe().string.isRequired,onDelete:fe().func.isRequired,onClone:fe().func.isRequired,showDeleteIndexModal:fe().func.isRequired,showCloneIndexModal:fe().func.isRequired,isPartitioned:fe().bool.isRequired,selectedPartitionKey:fe().string});var Dp=fi.MenuDropDown,Np=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vp(e,t)}(n,e);var t=gp(n);function n(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Op(_p(r=t.call(this,e)),"indexList",(function(){return _.map(r.state.updatedSidebarListTypes,(function(e,t){var n=_.has(r.props.toggledSections,e.name)&&r.props.toggledSections[e.name],o="";return r.props.selectedNavInfo.designDocSection===e.name&&(o=r.props.selectedNavInfo.indexName),re.createElement(hp,{icon:e.icon,isExpanded:n,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:o,toggle:r.props.toggle,database:r.props.database,designDocName:r.props.designDocName,key:t,title:e.name,selector:e.selector,items:_.keys(r.props.designDoc[e.selector]),isPartitioned:r.props.isPartitioned,selectedPartitionKey:r.props.selectedPartitionKey,showDeleteIndexModal:r.props.showDeleteIndexModal,showCloneIndexModal:r.props.showCloneIndexModal})}))})),Op(_p(r),"toggle",(function(e){e.preventDefault(),r.props.toggle(r.props.designDocName)})),Op(_p(r),"getNewButtonLinks",(function(){var e=r.props.selectedPartitionKey?encodeURIComponent(r.props.selectedPartitionKey):"",t=ee.urls("databaseBaseURL","app",encodeURIComponent(r.props.database.id))+(e?"/_partition/"+e:""),n=r.props.designDocName;return[{title:"Add New",links:ee.getExtensions("sidebar:links").reduce((function(e,o){return r.props.isPartitioned&&!o.showForPartitionedDDocs||e.push({title:o.title,url:"#"+t+"/"+o.url+"/"+encodeURIComponent(n),icon:"fonticon-plus-circled"}),e}),[{title:"New View",url:"#"+ee.urls("new","addView",encodeURIComponent(r.props.database.id),e,encodeURIComponent(n)),icon:"fonticon-plus-circled"}])}]})),r.state={updatedSidebarListTypes:r.props.sidebarListTypes},_.isEmpty(r.state.updatedSidebarListTypes)||_.has(r.state.updatedSidebarListTypes[0],"selector")&&"views"!==r.state.updatedSidebarListTypes[0].selector){var o=r.state.updatedSidebarListTypes;o.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:xl.deleteView,onClone:xl.cloneView,onEdit:xl.gotoEditViewPage}),r.state={updatedSidebarListTypes:o}}return r}return function(e,t){t&&bp(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var r=this.props.designDocName,o=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",i=ee.urls("designDocs","app",encodeURIComponent(this.props.database.id),o,r),a="metadata"===this.props.selectedNavInfo.designDocSection?"active":"",c=this.props.isPartitioned?"Partitioned design document":"Global design document",s=this.props.isPartitioned?"fonticon-documents":"fonticon-document";return re.createElement("li",{className:"nav-header"},re.createElement("div",{id:"sidebar-tab-"+r,className:t},re.createElement("div",{id:"nav-header-"+r,onClick:this.toggle,className:"accordion-list-item"},re.createElement("div",{className:"fonticon-play"}),re.createElement("p",{className:"design-doc-name"},re.createElement("span",{title:"_design/"+r},re.createElement("i",{className:s,title:c}),r))),re.createElement("div",{className:"new-button add-dropdown"},re.createElement(Dp,{links:e}))),re.createElement(he.A,{in:this.props.isExpanded},re.createElement("ul",{className:n,id:"design-doc-menu-".concat(this.props.designDocName)},re.createElement("li",{className:a},re.createElement("a",{href:"#/"+i,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}]),n}(re.Component);function Pp(e){return Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(e)}function Cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ip(r.key),r)}}function Tp(e,t){return Tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tp(e,t)}function Rp(e){var t=Ap();return function(){var n,r=kp(e);if(t){var o=kp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Pp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jp(e)}(this,n)}}function jp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ap(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ap=function(){return!!e})()}function kp(e){return kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kp(e)}function xp(e,t,n){return(t=Ip(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ip(e){var t=function(e){if("object"!=Pp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Pp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pp(t)?t:t+""}Op(Np,"propTypes",{database:fe().object.isRequired,sidebarListTypes:fe().array.isRequired,isExpanded:fe().bool.isRequired,isPartitioned:fe().bool.isRequired,selectedPartitionKey:fe().string,selectedNavInfo:fe().object.isRequired,toggledSections:fe().object.isRequired,designDocName:fe().string.isRequired,showDeleteIndexModal:fe().func.isRequired,showCloneIndexModal:fe().func.isRequired});var Lp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tp(e,t)}(n,e);var t=Rp(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),xp(jp(r=t.call(this,e)),"designDocList",(function(){return _.map(r.props.designDocs,(function(e,t){var n=decodeURIComponent(e.safeId),o=Mt(e,r.props.isDbPartitioned),i=!1,a={};_.has(r.props.toggledSections,n)&&(i=r.props.toggledSections[n].visible,a=r.props.toggledSections[n].indexGroups);var c={};return"designDoc"===r.props.selectedNav.navItem&&r.props.selectedNav.designDocName===n&&(c=r.props.selectedNav),re.createElement(Np,{toggle:r.props.toggle,sidebarListTypes:r.sidebarListTypes,isExpanded:i,toggledSections:a,selectedNavInfo:c,selectedPartitionKey:r.props.selectedPartitionKey,isPartitioned:o,key:t,designDoc:e,designDocName:n,database:r.props.database,showDeleteIndexModal:r.props.showDeleteIndexModal,showCloneIndexModal:r.props.showCloneIndexModal})}))}));var o=ee.getExtensions("sidebar:list");return r.sidebarListTypes=_.isUndefined(o)?[]:o,r}return function(e,t){t&&Cp(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("ul",{className:"nav flex-column"},this.designDocList())}}]),n}(re.Component);function Mp(e){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(e)}function Up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zp(r.key),r)}}function qp(e,t){return qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qp(e,t)}function Bp(e){var t=Fp();return function(){var n,r=Kp(e);if(t){var o=Kp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Mp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vp(e)}(this,n)}}function Vp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fp=function(){return!!e})()}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kp(e)}function Hp(e,t,n){return(t=zp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zp(e){var t=function(e){if("object"!=Mp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mp(t)?t:t+""}xp(Lp,"propTypes",{database:fe().object.isRequired,toggle:fe().func.isRequired,designDocs:fe().array,toggledSections:fe().object,selectedNav:fe().shape({designDocName:fe().string,designDocSection:fe().string,indexName:fe().string,navItem:fe().string}).isRequired,isDbPartitioned:fe().bool.isRequired,selectedPartitionKey:fe().string,showDeleteIndexModal:fe().func.isRequired,showCloneIndexModal:fe().func.isRequired});var Gp=fi.MenuDropDown,Wp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qp(e,t)}(n,e);var t=Bp(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Hp(Vp(e=t.call.apply(t,[this].concat(o))),"getNewButtonLinks",(function(){return xt(e.props.databaseName,e.props.selectedPartitionKey)})),Hp(Vp(e),"buildDocLinks",(function(){var t=ee.urls("base","app",e.props.databaseName);return ee.getExtensions("docLinks").map((function(n){return re.createElement("li",{key:n.url,className:e.getNavItemClass(n.url)},re.createElement("a",{id:n.url,href:t+n.url},n.title))}))})),Hp(Vp(e),"getNavItemClass",(function(t){return t===e.props.selectedNavItem?"active":""})),e}return function(e,t){t&&Up(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.buildDocLinks(),t=ee.url.encode(this.props.databaseName),n=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",r="#"+ee.urls("changes","app",t,n,""),o="#"+ee.urls("permissions","app",t,n),i=ee.urls("allDocs","app",t,n,""),a=ee.urls("mango","query-app",t,n),c=ne.i18n.en_US["run-query-with-mango"],s=this.getNewButtonLinks();return re.createElement("ul",{className:"nav flex-column"},re.createElement("li",{className:this.getNavItemClass("all-docs")},re.createElement("a",{id:"all-docs",href:"#/"+i,className:"toggle-view"},"All Documents"),re.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},re.createElement(Gp,{links:s}))),re.createElement("li",{className:this.getNavItemClass("mango-query")},re.createElement("a",{id:"mango-query",href:"#"+a,className:"toggle-view"},c)),re.createElement("li",{className:this.getNavItemClass("permissions")},re.createElement("a",{id:"permissions",href:o},"Permissions")),re.createElement("li",{className:this.getNavItemClass("changes")},re.createElement("a",{id:"changes",href:r},"Changes")),e,re.createElement("li",{className:this.getNavItemClass("design-docs")},re.createElement("a",{id:"design-docs",href:"#/"+i+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),re.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},re.createElement(Gp,{links:s}))))}}]),n}(re.Component);function Xp(e){return Xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(e)}function Qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nf(r.key),r)}}function Jp(e,t){return Jp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jp(e,t)}function Yp(e){var t=Zp();return function(){var n,r=ef(e);if(t){var o=ef(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Xp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $p(e)}(this,n)}}function $p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zp=function(){return!!e})()}function ef(e){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ef(e)}function tf(e,t,n){return(t=nf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nf(e){var t=function(e){if("object"!=Xp(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Xp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xp(t)?t:t+""}Hp(Wp,"propTypes",{databaseName:fe().string.isRequired,selectedNavItem:fe().string.isRequired,selectedPartitionKey:fe().string});var rf=fi.DeleteDatabaseModal,of=fi.LoadLines,af=Ss.ConfirmationModal,cf=es.deleteDbModalStore,sf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jp(e,t)}(n,e);var t=Yp(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),tf($p(r=t.call(this,e)),"onChange",(function(){var e=r.getDeleteDbStoreState();r.setState(e)})),tf($p(r),"showDeleteDatabaseModal",(function(e){Tt.showDeleteDatabaseModal(e)})),tf($p(r),"deleteIndex",(function(){var e="designDoc"===r.props.selectedNav.navItem&&"_design/"+r.props.selectedNav.designDocName===r.props.deleteIndexModalDesignDoc.id&&r.props.selectedNav.indexName===r.props.deleteIndexModalIndexName;r.props.deleteIndexModalOnSubmit({isOnIndex:e,indexName:r.props.deleteIndexModalIndexName,designDoc:r.props.deleteIndexModalDesignDoc,designDocs:r.props.designDocs,database:r.props.database})})),tf($p(r),"cloneIndex",(function(){r.props.cloneIndexModalOnSubmit({sourceIndexName:r.props.cloneIndexSourceIndexName,sourceDesignDocName:r.props.cloneIndexSourceDesignDocName,targetDesignDocName:r.props.cloneIndexModalSelectedDesignDoc,newDesignDocName:r.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:r.props.cloneIndexModalNewDesignDocPartitioned,isDbPartitioned:r.props.isDbPartitioned,newIndexName:r.props.cloneIndexModalNewIndexName,designDocs:r.props.designDocs,database:r.props.database,onComplete:r.props.hideCloneIndexModal})})),r.state=r.getDeleteDbStoreState(),r.deleteIndex=r.deleteIndex.bind($p(r)),r.cloneIndex=r.cloneIndex.bind($p(r)),r}return function(e,t){t&&Qp(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){cf.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){cf.off("change",this.onChange,this)}},{key:"getDeleteDbStoreState",value:function(){return{deleteDbModalProperties:cf.getShowDeleteDatabaseModal()}}},{key:"render",value:function(){return this.props.isLoading?re.createElement(of,null):re.createElement("nav",{className:"sidenav"},re.createElement(Wp,{selectedNavItem:this.props.selectedNav.navItem,databaseName:this.props.database.id,selectedPartitionKey:this.props.selectedPartitionKey}),re.createElement(Lp,{selectedNav:this.props.selectedNav,selectedPartitionKey:this.props.selectedPartitionKey,isDbPartitioned:this.props.isDbPartitioned,toggle:this.props.toggleContent,toggledSections:this.props.toggledSections,designDocs:this.props.designDocList,database:this.props.database,showDeleteIndexModal:this.props.showDeleteIndexModal,showCloneIndexModal:this.props.showCloneIndexModal}),re.createElement(rf,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),re.createElement(af,{title:"Confirm Deletion",visible:this.props.deleteIndexModalVisible,text:this.props.deleteIndexModalText,onClose:this.props.hideDeleteIndexModal,onSubmit:this.deleteIndex}),re.createElement(op,{visible:this.props.cloneIndexModalVisible,title:this.props.cloneIndexModalTitle,close:this.props.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.props.availableDesignDocIds,selectedDesignDoc:this.props.cloneIndexModalSelectedDesignDoc,selectedDesignDocPartitioned:this.props.cloneIndexModalSelectedDesignDocPartitioned,newDesignDocName:this.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:this.props.cloneIndexModalNewDesignDocPartitioned,newIndexName:this.props.cloneIndexModalNewIndexName,indexLabel:this.props.cloneIndexModalIndexLabel,selectDesignDoc:this.props.selectDesignDoc,updateNewDesignDocName:this.props.updateNewDesignDocName,updateNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,setNewCloneIndexName:this.props.setNewCloneIndexName,isDbPartitioned:this.props.isDbPartitioned}))}}]),n}(re.Component);tf(sf,"propTypes",{selectedNav:fe().shape({designDocName:fe().string,designDocSection:fe().string,indexName:fe().string,navItem:fe().string}).isRequired});const uf={SidebarController:sf,DesignDoc:Np,CloneIndexModal:op};function lf(e){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(e)}function pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(n),!0).forEach((function(t){df(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function df(e,t,n){return(t=function(e){var t=function(e){if("object"!=lf(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lf(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mf={designDocs:new Backbone.Collection,designDocList:[],selected:{navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},loading:!0,toggledSections:{},deleteIndexModalVisible:!1,deleteIndexModalDesignDocName:"",deleteIndexModalText:"",deleteIndexModalIndexName:"",deleteIndexModalOnSubmit:function(){},cloneIndexModalVisible:!1,cloneIndexDesignDocProp:"",cloneIndexModalTitle:"",cloneIndexModalSelectedDesignDoc:"",cloneIndexModalNewDesignDocName:"",cloneIndexModalNewDesignDocPartitioned:!0,cloneIndexModalNewIndexName:"",cloneIndexModalSourceIndexName:"",cloneIndexModalSourceDesignDocName:"",cloneIndexModalIndexLabel:"",cloneIndexModalOnSubmit:function(){}};function hf(e){if(!e)return[];var t=e.toJSON();t=_.filter(t,(function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}));var n=t.map((function(e){return e.safeId=ne.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)}));return n}function yf(e,t){var n=e.designDocs.find((function(t){return e.cloneIndexModalSelectedDesignDoc==t.id}));return!!n&&Mt(n.get("doc"),t)}function bf(e){return bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(e)}function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(e,t,n){return(t=function(e){var t=function(e){if("object"!=bf(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=bf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bf(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _f=function(e){var t=e.designDocs.filter((function(e){return!e.isMangoDoc()}));return _.map(t,(function(e){return e.id}))},wf=function(e){var t=e.designDocs.find((function(t){return"_design/"+e.deleteIndexModalDesignDocName===t.id}));return t?t.dDocModel():null},Ef=(0,oe.Ng)((function(e,t){var n,r,o,i=e.sidebar,a=e.databases;return{database:(n=i,n.loading?{}:n.database),selectedNav:(r=t.selectedNavItem,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(n),!0).forEach((function(t){gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({designDocName:"",designDocSection:"",indexName:"",navItem:""},r),o),designDocs:i.designDocs,designDocList:i.designDocList,availableDesignDocIds:_f(i),toggledSections:i.toggledSections,isLoading:i.loading||a.isLoadingDbInfo,selectedPartitionKey:t.selectedPartitionKey,isDbPartitioned:a.isDbPartitioned,deleteIndexModalVisible:i.deleteIndexModalVisible,deleteIndexModalText:i.deleteIndexModalText,deleteIndexModalOnSubmit:i.deleteIndexModalOnSubmit,deleteIndexModalIndexName:i.deleteIndexModalIndexName,deleteIndexModalDesignDoc:wf(i),cloneIndexModalVisible:i.cloneIndexModalVisible,cloneIndexModalTitle:i.cloneIndexModalTitle,cloneIndexModalSelectedDesignDoc:i.cloneIndexModalSelectedDesignDoc,cloneIndexModalSelectedDesignDocPartitioned:yf(i,a.isDbPartitioned),cloneIndexModalNewDesignDocName:i.cloneIndexModalNewDesignDocName,cloneIndexModalNewDesignDocPartitioned:i.cloneIndexModalNewDesignDocPartitioned,cloneIndexModalOnSubmit:i.cloneIndexModalOnSubmit,cloneIndexDesignDocProp:i.cloneIndexDesignDocProp,cloneIndexModalNewIndexName:i.cloneIndexModalNewIndexName,cloneIndexSourceIndexName:i.cloneIndexModalSourceIndexName,cloneIndexSourceDesignDocName:i.cloneIndexModalSourceDesignDocName,cloneIndexModalIndexLabel:i.cloneIndexModalIndexLabel}}),(function(e){return{toggleContent:function(t,n){e(function(e,t){return function(n){n({type:yu,designDoc:e,indexGroup:t})}}(t,n))},hideCloneIndexModal:function(){e((function(e){e({type:wu})}))},hideDeleteIndexModal:function(){e((function(e){e({type:gu})}))},showDeleteIndexModal:function(t,n,r,o){e(function(e,t,n,r){return function(o){o({type:vu,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:r}})}}(t,n,r,o))},showCloneIndexModal:function(t,n,r,o){e(function(e,t,n,r){return function(o){o({type:_u,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:r,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}}(t,n,r,o))},selectDesignDoc:function(t){e(function(e){return function(t){t({type:Eu,options:{value:e}})}}(t))},updateNewDesignDocName:function(t){e(function(e){return function(t){t({type:Ou,options:{value:e}})}}(t))},updateNewDesignDocPartitioned:function(t){e(function(e){return function(t){t({type:Su,options:{value:e}})}}(t))},setNewCloneIndexName:function(t){e(function(e){return function(t){t({type:Du,options:{value:e}})}}(t))}}}))(uf.SidebarController);const Of=Ef;var Sf=function(e){var t=e.title,n=e.url,r=e.icon,o=e.onClick,i=null==n?"button":"a";return re.createElement(kr.A.Item,{as:i,onClick:o,href:n},re.createElement("div",{className:"py-1 ms-1"},re.createElement("i",{className:"align-middle icon fonticon-fw "+r}),re.createElement("span",{className:"ms-2 align-middle"},t)))},Df=function(e){var t,n=e.dbName,r=(t=function(e,t){var n=xt(e,t);return function(e){return It(e)}(e).concat(n)}(n,e.partitionKey),t.map((function(e,t){if(e.title&&e.links){var n=e.links.map((function(e){return re.createElement(Sf,{key:e.title,title:e.title,url:e.url,icon:e.icon,onClick:e.onClick})}));return[re.createElement(kr.A.Header,{key:e.title},e.title),n]}return re.createElement(Sf,{key:t,title:e.title,url:e.url,icon:e.icon,onClick:e.onClick})})));return re.createElement("div",{className:"faux-header__doc-header-left"},re.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){ee.navigate("#/_all_dbs")}},re.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),re.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:n},n),re.createElement(kr.A,null,re.createElement(kr.A.Toggle,{id:"faux-header__doc-header-dropdown-toggle"},re.createElement("i",{className:"fonticon-vertical-ellipsis"})),re.createElement(kr.A.Menu,null,r)))};Df.propTypes={dbName:fe().string.isRequired,partitionKey:fe().string};const Nf=Df;function Pf(e){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(e)}function Cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tf(r.key),r)}}function Tf(e){var t=function(e){if("object"!=Pf(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pf(t)?t:t+""}function Rf(e,t){return Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rf(e,t)}function jf(e){var t=Af();return function(){var n,r=kf(e);if(t){var o=kf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Pf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Af(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Af=function(){return!!e})()}function kf(e){return kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kf(e)}n(13204);var xf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rf(e,t)}(n,e);var t=jf(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Cf(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"willEnter",value:function(){return{opacity:(0,le.oz)(1,le.v4.gentle),height:(0,le.oz)(160,le.v4.gentle)}}},{key:"willLeave",value:function(){return{opacity:(0,le.oz)(0,le.v4.gentle),height:(0,le.oz)(0,le.v4.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map((function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:re.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},re.createElement(Ss.CodeFormat,{code:t.props.code}))}));return re.createElement("span",null,n)}},{key:"render",value:function(){return re.createElement(le.S6,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}]),n}(re.Component);function If(e){return If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(e)}function Lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mf(r.key),r)}}function Mf(e){var t=function(e){if("object"!=If(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=If(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==If(t)?t:t+""}function Uf(e,t){return Uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uf(e,t)}function qf(e){var t=Bf();return function(){var n,r=Vf(e);if(t){var o=Vf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==If(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bf=function(){return!!e})()}function Vf(e){return Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vf(e)}xf.propTypes={code:fe().object.isRequired,codeVisible:fe().bool.isRequired};var Ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uf(e,t)}(n,e);var t=qf(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Lf(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,r=e.databaseName;if(t)return re.createElement("span",{className:"js-doc-id"},n);var o="#"+ee.urls("document","app",encodeURIComponent(r),encodeURIComponent(n));return re.createElement("a",{href:o,className:"text-break"},n)}}]),n}(re.Component);function Kf(e){return Kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kf(e)}function Hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zf(r.key),r)}}function zf(e){var t=function(e){if("object"!=Kf(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Kf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kf(t)?t:t+""}function Gf(e,t){return Gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gf(e,t)}function Wf(e){var t=Xf();return function(){var n,r=Qf(e);if(t){var o=Qf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Kf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xf=function(){return!!e})()}function Qf(e){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qf(e)}var Jf=fi.Copy,Yf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gf(e,t)}(n,e);var t=Wf(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={codeVisible:!1},r}return function(e,t){t&&Hf(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?re.createElement(Ss.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),ee.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,r=n.change,o=n.databaseName,i="change-wrapper"+(r.isNew?" new-change-row":"");return re.createElement("div",{className:i},re.createElement("div",{className:"change-box","data-id":r.id},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-2 fw-bold"},"seq"),re.createElement("div",{className:"col-8 change-sequence"},r.seq),re.createElement("div",{className:"col-2 align-middle text-end"},re.createElement(Jf,{uniqueKey:(0,me.A)(),text:r.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-2 fw-bold"},"id"),re.createElement("div",{className:"col-8"},re.createElement(Ff,{id:r.id,deleted:r.deleted,databaseName:o})),re.createElement("div",{className:"col-2 text-end"},re.createElement(Jf,{uniqueKey:(0,me.A)(),text:r.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-2 fw-bold"},"deleted"),re.createElement("div",{className:"col-10"},r.deleted?"True":"False")),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-2 fw-bold"},"changes"),re.createElement("div",{className:"col-10"},re.createElement(de.A,{variant:"cf-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),re.createElement(xf,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}]),n}(re.Component);function $f(e){return $f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(e)}function Zf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ed(r.key),r)}}function ed(e){var t=function(e){if("object"!=$f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$f(t)?t:t+""}function td(e,t){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},td(e,t)}function nd(e){var t=rd();return function(){var n,r=od(e);if(t){var o=od(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==$f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rd=function(){return!!e})()}function od(e){return od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},od(e)}Yf.propTypes={change:fe().object,databaseName:fe().string.isRequired};var id=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&td(e,t)}(n,e);var t=nd(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).props.loadChanges(r.props.databaseName),r}return function(e,t){t&&Zf(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"showingSubsetMsg",value:function(){var e=this.props,t=e.isShowingSubset,n=e.changes,r="";if(t){var o=n.length;r=re.createElement("p",{className:"changes-result-limit"},"Limiting results to ",re.createElement("b",null,o)," changes.")}return r}},{key:"getRows",value:function(){var e=this.props,t=e.changes,n=e.loaded,r=e.databaseName;return!t.length&&n?re.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map((function(e,t){return re.createElement(Yf,{change:e,key:t,databaseName:r})}))}},{key:"render",value:function(){return re.createElement("div",null,re.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}]),n}(re.Component);id.propTypes={changes:fe().array.isRequired,loaded:fe().bool.isRequired,databaseName:fe().string.isRequired,isShowingSubset:fe().bool.isRequired,loadChanges:fe().func.isRequired};const ad="UPDATE_CHANGES",cd="ADD_CHANGES_FILTER_ITEM",sd="REMOVE_CHANGES_FILTER_ITEM";var ud,ld,pd=function(e,t){var n=!ld;ld=kt(e.last_seq),t({type:ad,changes:e.results,seqNum:ld,resetChanges:n})};const fd=function(e){return function(t){!function(e,t){var n={limit:100};ud&&ud===t||(ud=t,ld=null),ld&&(n.since=ld);var r=ne.utils.queryParams(n),o=ne.utils.safeURLName(t),i=ee.urls("changes","server",o,"?"+r);v(i).then((function(t){if(t.error)throw new Error(t.reason||t.error);pd(t,e)})).catch((function(e){ee.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})}))}(t,e)}};const dd=(0,oe.Ng)((function(e,t){var n=e.changes;return{changes:n.filteredChanges,loaded:n.isLoaded,databaseName:t.databaseName,isShowingSubset:n.showingSubset}}),(function(e){return{loadChanges:function(t){e(fd(t))}}}))(id);var md=n(14441);function hd(e){return hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(e)}function yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bd(r.key),r)}}function bd(e){var t=function(e){if("object"!=hd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hd(t)?t:t+""}function vd(e,t){return vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vd(e,t)}function gd(e){var t=wd();return function(){var n,r=Ed(e);if(t){var o=Ed(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==hd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _d(e)}(this,n)}}function _d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wd=function(){return!!e})()}function Ed(e){return Ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ed(e)}var Od=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vd(e,t)}(n,e);var t=gd(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={filter:"",error:!1},r.submitForm=r.submitForm.bind(_d(r)),r}return function(e,t){t&&yd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout((function(){t.setState({error:!1})}),1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"render",value:function(){var e=this;return re.createElement("form",{onSubmit:this.submitForm},re.createElement(md.A,null,re.createElement(nt.A.Control,{id:"changes-filter-field",ref:function(t){return e.addItem=t},placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter,"aria-label":"sequence or ID value",type:"text"}),re.createElement(de.A,{type:"submit",variant:"cf-secondary","aria-label":"Filter results"},re.createElement("i",{className:"fonticon-filter"})," Filter")),re.createElement("div",{className:"help-block"}))}}]),n}(re.Component);function Sd(e){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(e)}function Dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nd(r.key),r)}}function Nd(e){var t=function(e){if("object"!=Sd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Sd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sd(t)?t:t+""}function Pd(e,t){return Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pd(e,t)}function Cd(e){var t=Rd();return function(){var n,r=jd(e);if(t){var o=jd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Sd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Td(e)}(this,n)}}function Td(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rd=function(){return!!e})()}function jd(e){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jd(e)}Od.propTypes={addFilter:fe().func.isRequired,hasFilter:fe().func.isRequired,tooltips:fe().string},Od.defaultProps={tooltip:""};var Ad=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pd(e,t)}(n,e);var t=Cd(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).addFilter=r.addFilter.bind(Td(r)),r.hasFilter=r.hasFilter.bind(Td(r)),r}return function(e,t){t&&Dd(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"addFilter",value:function(e){_.isEmpty(e)||this.props.addFilter(e)}},{key:"hasFilter",value:function(e){return-1!==this.props.filters.indexOf(e)}},{key:"render",value:function(){var e=this;return re.createElement("div",{className:"changes-header"},re.createElement(Od,{filter:function(t){return e.props.removeFilter(t)},addFilter:this.addFilter,hasFilter:this.hasFilter}),re.createElement(fi.BadgeList,{elements:this.props.filters,removeBadge:function(t){return e.props.removeFilter(t)},showClose:!0}))}}]),n}(re.Component);Ad.propTypes={filters:fe().array.isRequired,addFilter:fe().func.isRequired,removeFilter:fe().func.isRequired};const kd=(0,oe.Ng)((function(e){return{filters:e.changes.filters}}),(function(e){return{addFilter:function(t){e(function(e){return function(t){t({type:cd,filter:e})}}(t))},removeFilter:function(t){e(function(e){return function(t){t({type:sd,filter:e})}}(t))}}}))(Ad);function xd(e){return xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(e)}function Id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vd(r.key),r)}}function Ld(e,t){return Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ld(e,t)}function Md(e){var t=qd();return function(){var n,r=Bd(e);if(t){var o=Bd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ud(e)}(this,n)}}function Ud(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qd=function(){return!!e})()}function Bd(e){return Bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bd(e)}function Vd(e){var t=function(e){if("object"!=xd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xd(t)?t:t+""}var Fd=fi.LoadLines,Kd=fi.Copy,Hd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ld(e,t)}(n,e);var t=Md(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t,n){(t=Vd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ud(r=t.call(this,e)),"showCopiedMessage",(function(){ee.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})})),r.fetchDDocInfo(),r}return function(e,t){t&&Id(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(e){this.props.designDocInfo!==e.designDocInfo&&this.fetchDDocInfo()}},{key:"componentWillUnmount",value:function(){this.props.stopRefresh()}},{key:"fetchDDocInfo",value:function(){this.props.fetchDesignDocInfo({designDocName:this.props.designDocName,designDocInfo:this.props.designDocInfo})}},{key:"render",value:function(){if(this.props.isLoading)return re.createElement(Fd,null);if(this.props.showLoadError)return re.createElement("div",{className:"metadata-page"},re.createElement("header",null,re.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),re.createElement("section",{className:"container"},"Error retrieving metadata. Try reloading the page."));var e=this.props.viewIndex,t=e.sizes,n=t.active?t.active.toLocaleString("en"):0,r=t.external?t.external.toLocaleString("en"):0;return re.createElement("div",{className:"metadata-page"},re.createElement("header",null,re.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),re.createElement("section",{className:"container"},re.createElement("h3",null,"Index Information"),re.createElement("ul",null,re.createElement("li",null,re.createElement("span",{className:"item-title"},"Language:"),re.createElement("span",{className:"capitalize"},e.language)),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),re.createElement("ul",null,re.createElement("li",null,re.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Actual data size (bytes):"),n),re.createElement("li",null,re.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),r)),re.createElement("ul",null,re.createElement("li",null,re.createElement("span",{className:"item-title"},"MD5 Signature:"),re.createElement(Kd,{uniqueKey:(0,me.A)(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}]),n}(re.Component);Hd.propTypes={isLoading:fe().bool.isRequired,showLoadError:fe().bool.isRequired,viewIndex:fe().object,designDocName:fe().string.isRequired,stopRefresh:fe().func.isRequired,fetchDesignDocInfo:fe().func.isRequired};const zd={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_FETCHING_FAILED:"DESIGN_FETCHING_FAILED",DESIGN_REFRESH:"DESIGN_REFRESH"};var Gd,Wd=function(e,t){e.fetch().then((function(){t({type:zd.DESIGN_REFRESH,designDocInfo:e})}))},Xd=function(){Gd&&(window.clearInterval(Gd),Gd=void 0)};const Qd={fetchDesignDocInfo:function(e){var t=e.designDocName,n=e.designDocInfo;return function(e){return e({type:zd.DESIGN_FETCHING}),n.fetch().then((function(){!function(e,t){Xd(),Gd=window.setInterval((function(){Wd(e.designDocInfo,t)}),5e3),t({type:zd.DESIGN_DOC_MONITOR,options:e})}({designDocName:t,designDocInfo:n},e)})).catch((function(){e({type:zd.DESIGN_FETCHING_FAILED}),ee.addNotification({msg:"Error loading design document metadata.",type:"error",clear:!0})}))}},stopRefresh:Xd};const Jd=(0,oe.Ng)((function(e,t){var n=e.designDocInfo;return{isLoading:n.isLoading,showLoadError:n.showLoadError,viewIndex:n.viewIndex,designDocInfo:t.designDocInfo,designDocName:t.designDocName}}),(function(e){return{fetchDesignDocInfo:function(t){e(Qd.fetchDesignDocInfo(t))},stopRefresh:function(){Qd.stopRefresh()}}}))(Hd);function Yd(e){return Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(e)}function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zd(r.key),r)}}function Zd(e){var t=function(e){if("object"!=Yd(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Yd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yd(t)?t:t+""}function em(e,t){return em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},em(e,t)}function tm(e){var t=rm();return function(){var n,r=om(e);if(t){var o=om(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Yd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nm(e)}(this,n)}}function nm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rm=function(){return!!e})()}function om(e){return om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},om(e)}var im=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&em(e,t)}(n,e);var t=tm(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).toggleStable=r.toggleStable.bind(nm(r)),r.onUpdateChange=r.onUpdateChange.bind(nm(r)),r.toggleIncludeDocs=r.toggleIncludeDocs.bind(nm(r)),r.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],r}return function(e,t){t&&$d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?re.createElement("div",{className:"col-6 mb-2"},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-auto"},re.createElement("label",{id:"qoGroupLevelGroup",htmlFor:"qoLimit",className:"col-form-label"},"Group Level")),re.createElement("div",{className:"col-auto"},re.createElement(nt.A.Select,{id:"qoGroupLevel",onChange:this.groupLevelChange.bind(this),value:this.props.groupLevel},re.createElement("option",{value:"0"},"None"),re.createElement("option",{value:"1"},"1"),re.createElement("option",{value:"2"},"2"),re.createElement("option",{value:"3"},"3"),re.createElement("option",{value:"4"},"4"),re.createElement("option",{value:"5"},"5"),re.createElement("option",{value:"6"},"6"),re.createElement("option",{value:"7"},"7"),re.createElement("option",{value:"8"},"8"),re.createElement("option",{value:"9"},"9"),re.createElement("option",{value:"exact"},"Exact"))))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"includeDocsOption",value:function(){var e=this.props,t=e.includeDocs,n=e.reduce;return re.createElement("div",{className:"col-12"},re.createElement(nt.A.Check,{id:"qoIncludeDocs",disabled:n,label:"Include Docs",onChange:this.toggleIncludeDocs,checked:t,type:"checkbox"}))}},{key:"reduceOption",value:function(){var e=this.props,t=e.showReduce,n=e.reduce;return t?re.createElement(re.Fragment,null,re.createElement("div",{className:"col-6"},re.createElement(nt.A.Check,{id:"qoReduce",label:"Reduce",onChange:this.toggleReduce.bind(this),checked:n,type:"checkbox"})),this.groupLevel()):null}},{key:"stableOption",value:function(){var e=this.props,t=e.enableStable,n=e.stable;return t||(n=!1),re.createElement(re.Fragment,null,re.createElement("div",{className:"col-6"},re.createElement(nt.A.Check,{id:"qoStable",label:"Stable",onChange:this.toggleStable,checked:n,type:"checkbox",disabled:!t})))}},{key:"updateOption",value:function(){var e=this.props.update,t=this.updateOptions.map((function(e){return re.createElement("option",{key:e.value,value:e.value},e.label)}));return re.createElement(re.Fragment,null,re.createElement("div",{className:"col-6"},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-auto"},re.createElement("label",{htmlFor:"qoUpdate",className:"col-form-label"},"Update")),re.createElement("div",{className:"col-auto"},re.createElement(nt.A.Select,{id:"qoUpdate",onChange:this.onUpdateChange,value:e},t)))))}},{key:"render",value:function(){return re.createElement("div",{className:"row m-2"},re.createElement("div",{className:"col-12"},re.createElement("h5",null,"Query Options",re.createElement("a",{className:"help-link ms-1",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},re.createElement("i",{className:"fonticon-help-circled"})))),re.createElement("div",{className:"col-12"},re.createElement("div",{className:"row align-items-center"},this.includeDocsOption(),this.reduceOption())),re.createElement("div",{className:"col-12"},re.createElement("div",{className:"row align-items-center"},this.stableOption(),this.updateOption())))}}]),n}(re.Component);im.propTypes={toggleIncludeDocs:fe().func.isRequired,includeDocs:fe().bool.isRequired,reduce:fe().bool.isRequired,toggleReduce:fe().func,updateGroupLevel:fe().func,docURL:fe().string.isRequired,stable:fe().bool.isRequired,toggleStable:fe().func.isRequired,update:fe().string.isRequired,changeUpdateField:fe().func.isRequired,showReduce:fe().bool.isRequired,enableStable:fe().bool.isRequired};var am=n(68462);function cm(e){return cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(e)}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,um(r.key),r)}}function um(e){var t=function(e){if("object"!=cm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cm(t)?t:t+""}function lm(e,t){return lm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lm(e,t)}function pm(e){var t=fm();return function(){var n,r=dm(e);if(t){var o=dm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==cm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fm=function(){return!!e})()}function dm(e){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dm(e)}var mm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lm(e,t)}(n,e);var t=pm(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&sm(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="row-fluid js-keys-section ",n=t,r="drop-down btn ",o=r;return this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?r+="active":t+="hide",re.createElement("div",{className:"row m-2 mt-0"},re.createElement("div",{className:"col-12 mb-3"},re.createElement("h5",null,"Keys")),re.createElement("div",{className:"col-12 mb-3"},re.createElement(Ds.A,null,re.createElement(am.A,{id:"byKeys",type:"checkbox",variant:"cf-secondary",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),re.createElement(am.A,{id:"betweenKeys",type:"checkbox",variant:"cf-secondary",onClick:this.toggleBetweenKeys.bind(this),className:r},"Between Keys"))),re.createElement("div",{className:"col-12"},re.createElement("div",{className:n,id:"js-showKeys"},re.createElement("label",{htmlFor:"keys-input",className:"form-label"},"A key, or an array of keys"),re.createElement(nt.A.Control,{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"form-control",rows:"5",as:"textarea",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'})),re.createElement("div",{className:t,id:"js-showStartEnd"},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12"},re.createElement("label",{htmlFor:"startkey",className:"form-label"},"Start key"),re.createElement(nt.A.Control,{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'}))),re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12"},re.createElement("label",{htmlFor:"endkey",className:"form-label"},"End key"),re.createElement(nt.A.Control,{id:"endkey",ref:function(t){return e.endkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,placeholder:'e.g., "1234"'}))),re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12"},re.createElement(nt.A.Check,{id:"qoIncludeEndKeyInResults",label:"Include end key in results",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include,type:"checkbox"}))))))}}]),n}(re.Component);function hm(e){return hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(e)}function ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bm(r.key),r)}}function bm(e){var t=function(e){if("object"!=hm(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hm(t)?t:t+""}function vm(e,t){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vm(e,t)}function gm(e){var t=_m();return function(){var n,r=wm(e);if(t){var o=wm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==hm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_m=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wm(e)}var Em=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vm(e,t)}(n,e);var t=gm(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&ym(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(ee.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return re.createElement(re.Fragment,null,re.createElement("div",{className:"row m-2 mt-0 mb-3"},re.createElement("div",{className:"col-12"},re.createElement("h5",null,"Additional Parameters"))),re.createElement("div",{className:"row m-2 mt-0 mb-3"},re.createElement("div",{className:"col-auto"},re.createElement("label",{htmlFor:"qoLimit",className:"col-form-label"},"Limit")),re.createElement("div",{className:"col"},re.createElement(nt.A.Select,{id:"qoLimit",onChange:this.updateLimit.bind(this),value:this.props.limit},re.createElement("option",{value:"none"},"None"),re.createElement("option",{value:5},"5"),re.createElement("option",{value:10},"10"),re.createElement("option",{value:20},"20"),re.createElement("option",{value:30},"30"),re.createElement("option",{value:50},"50"),re.createElement("option",{value:100},"100"),re.createElement("option",{value:500},"500"))),re.createElement("div",{className:"col-auto"},re.createElement("label",{htmlFor:"qoSkip",className:"col-form-label"},"Skip")),re.createElement("div",{className:"col"},re.createElement(nt.A.Control,{id:"qoSkip",type:"number",value:this.props.skip,placeholder:"# of rows",onChange:this.updateSkip.bind(this)}))),re.createElement("div",{className:"row m-2 mt-0 mb-3"},re.createElement("div",{className:"col-6"},re.createElement(nt.A.Check,{id:"qoDescending",label:"Descending",onChange:this.toggleDescending.bind(this),checked:this.props.descending,type:"checkbox"}))))}}]),n}(re.Component);function Om(e){return Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Om(e)}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dm(r.key),r)}}function Dm(e){var t=function(e){if("object"!=Om(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Om(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Om(t)?t:t+""}function Nm(e,t){return Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nm(e,t)}function Pm(e){var t=Tm();return function(){var n,r=Rm(e);if(t){var o=Rm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Om(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cm(e)}(this,n)}}function Cm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tm=function(){return!!e})()}function Rm(e){return Rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rm(e)}var jm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nm(e,t)}(n,e);var t=Pm(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).hideTray=r.hideTray.bind(Cm(r)),r}return function(e,t){t&&Sm(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"hideTray",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.props.onCancel()}},{key:"render",value:function(){return re.createElement("div",{className:"row mx-2 mb-3 mt-0 text-end"},re.createElement("div",{id:"button-options",className:"col"},re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",onClick:this.hideTray},"Cancel"),re.createElement(de.A,{type:"submit",variant:"cf-primary"},"Run Query")))}}]),n}(re.Component);function Am(e){return Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(e)}function km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xm(r.key),r)}}function xm(e){var t=function(e){if("object"!=Am(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Am(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Am(t)?t:t+""}function Im(e,t){return Im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Im(e,t)}function Lm(e){var t=Mm();return function(){var n,r=Um(e);if(t){var o=Um(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Am(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mm=function(){return!!e})()}function Um(e){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Um(e)}jm.propTypes={onCancel:fe().func.isRequired};var qm=fi.ToggleHeaderButton,Bm=fi.TrayContents,Vm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Im(e,t)}(n,e);var t=Lm(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,e);var o=e.ddocsOnly,i=e.queryOptionsApplyFilterOnlyDdocs;return o&&i(),r}return function(e,t){t&&km(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,r=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?r():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,r=t.queryOptionsParams,o=t.perPage,i=t.resetPagination,a=t.selectedLayout,c=t.changeLayout;i(o);var s=a===nr;s&&r.include_docs?c(tr):s||r.include_docs||c(nr),n(r,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return re.createElement(Bm,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray",container:this},re.createElement("form",{onSubmit:this.executeQuery.bind(this),id:"query-options_js-view-query-update"},re.createElement(im,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:ee.constants.DOC_URLS.GENERAL,enableStable:this.props.enableStable,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),re.createElement("hr",null),re.createElement(mm,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),re.createElement("hr",null),re.createElement(Em,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),re.createElement("hr",null),re.createElement(jm,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,r=e.byKeys,o=e.descending,i=e.skip,a=e.limit,c=e.stable,s=e.update;return!!(n&&n.startkey||r||a&&"none"!=a||i||t||o||c||"true"!==s)}},{key:"render",value:function(){return re.createElement("div",{id:"header-query-options"},re.createElement("div",{id:"query-options"},re.createElement("div",null,re.createElement(qm,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}]),n}(re.Component);Vm.propTypes={contentVisible:fe().bool.isRequired,queryOptionsApplyFilterOnlyDdocs:fe().func.isRequired,queryOptionsRemoveFilterOnlyDdocs:fe().func.isRequired,queryOptionsExecute:fe().func.isRequired,queryOptionsParams:fe().object.isRequired,perPage:fe().number.isRequired,resetPagination:fe().func.isRequired,selectedLayout:fe().string.isRequired,changeLayout:fe().func.isRequired,queryOptionsToggleVisibility:fe().func.isRequired,queryOptionsToggleStable:fe().func.isRequired,queryOptionsChangeUpdate:fe().func.isRequired,stable:fe().bool.isRequired,update:fe().string.isRequired};const Fm="INDEX_RESULTS_REDUX_NEW_RESULTS",Km="INDEX_RESULTS_REDUX_IS_LOADING",Hm="INDEX_RESULTS_REDUX_CHANGE_LAYOUT",zm="INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",Gm="INDEX_RESULTS_REDUX_SET_PER_PAGE",Wm="INDEX_RESULTS_REDUX_PAGINATE_NEXT",Xm="INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",Qm="INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",Jm="INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",Ym="INDEX_RESULTS_REDUX_RESET_STATE",$m="INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS",Zm="INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED",eh="INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY",th="INDEX_RESULTS_SET_STYLE";var nh=function(e,t,n){void 0===e&&(e="server");var r=ne.utils.getSafeIdForDoc(t);r||(r="");var o=encodeURIComponent(n);return ee.urls("document",e,o,r,"?conflicts=true")},rh=function(e,t){if(e)return t!==or&&!!Object.keys(e).length&&!!e._id},oh=function(e,t){return t===or?"special"!==e.type:!(!e._id&&!e.id||!(e._rev||e.value&&e.value.rev))},ih=function(e,t){return!!e.find((function(e){return oh(e,t)}))},ah=function(){if(window.localStorage){var e=ne.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return ee.constants.MISC.DEFAULT_PAGE_SIZE},ch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;return t===ar?e.id||e._id:t===or?"special"===e.type?"_all_docs":e.ddoc:t===ir?e._id:e.id||e._id},sh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;return t===ar?e.value?e.value.rev:e._rev:t!==or&&t===ir?e._rev:void 0},uh=function(e){return"Reason: "+(e&&e.message||"n/a")},lh=function(){return{type:Ym}},ph=function(){return{type:Qm,selectedDocs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},fh=function(e){return{type:Hm,layout:e}};function dh(){return dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dh.apply(null,arguments)}function mh(e){return mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(e)}function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){bh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bh(e,t,n){return(t=function(e){var t=function(e){if("object"!=mh(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=mh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mh(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(null,arguments)}n(14237);var gh=function(e,t,n){var r=function(e,t){var n={},r=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=r-n.skip;return{params:vh({},t,n),totalDocsRemaining:o}}(t,n),o=r.params,i=r.totalDocsRemaining;return o.limit=Math.min(o.limit,1e4),function(t){return t({type:Km}),e(o).then((function(e){var n=e.docs,r=e.docType,a=e.executionStats,c=e.warning,s=e.layout,u=function(e,t,n){var r=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),r=!0),{finalDocList:e,canShowNext:r}}(n,i,o.limit),l=u.finalDocList,p=u.canShowNext;s&&t(fh(s));var f=a?yh(yh({},a),{},{ts:(new Date).getTime()}):null;t(function(e,t,n,r,o,i){return{type:Fm,docs:e,params:t,canShowNext:n,docType:r,executionStats:o,warning:i}}(l,o,p,r,f,c))})).catch((function(e){e&&-1!==e.message.indexOf("`partition` parameter is not supported")?t({type:Zm}):e&&-1!==e.message.indexOf("`partition` parameter is mandatory")?t({type:eh}):ee.addNotification({msg:"Error running query. "+uh(e),type:"error",clear:!0}),t(lh())}))}},_h=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),ee.addNotification({msg:t,type:"error",clear:!0})},wh=function(e,t,n,r){ee.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];r===or?e.fail&&(o=e.fail.map((function(e){return e.id}))):o=e.filter((function(e){return!!e.error})).map((function(e){return e.id}));var i=!!t.map((function(e){return e._id})).find((function(e){return/_design/.test(e)}));o.length>0&&_h(o),n&&i&&Cu(n)};function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eh.apply(null,arguments)}var Oh=function(e){return{type:Gm,perPage:e}},Sh=function(e){return{type:$m,options:e}},Dh=function(e){return Sh({includeDocs:!e})};const Nh=function(e){var t,n=e.def,r=e.type,o=[];return(o=n.fields.reduce((function(e,t,n){return 0===n?e.push(r+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e}),[])).length||(o=(t=ee.getExtensions("mango:additionalIndexes")[0])?t.createHeader({def:n,type:r}):[r+": "+(n.selector?JSON.stringify(n.selector):"{}")]),o.join(", ")},Ph=function(e){return JSON.stringify(e,null,2)},Ch=function(e){return JSON.stringify(e,null," ")};var Th=void 0,Rh=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.push(e)}))}));var n=(t=_.uniq(t)).indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},jh=function(e,t){var n=nr===t.selectedLayout,r=n?function(e){var t=Rh(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}}(e):function(e,t){var n,r=null,o=t.selectedFieldsTableView,i=t.showAllFieldsTableView,a=e.map((function(e){return e.doc||e}));n=Rh(a),o&&0===o.length&&(o=function(e){var t,n,r=e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]);return delete(r=_.countBy(r,(function(e){return e}))).id,delete r._rev,(r=(t=r=Object.keys(r).reduce((function(e,t){return e.push([r[t],t]),e}),[]),n=function e(t,n,r){return t[r]===n[r]?r<2?e(t,n,r+1):0:1===r?t[r]<n[r]?-1:1:t[r]<n[r]?1:-1},r=t.sort((function(e,t){return n(e,t,0)}))).slice(0,5)).reduce((function(e,t){return e.push(t[1]),e}),[])}(a));var c,s,u=_.without(n,"_attachments");return c=o,s=u,r=_.without.bind(Th,s).apply(Th,c),i&&(r=null,o=u),{schema:n,normalizedDocs:a,selectedFieldsTableView:o,notSelectedFieldsTableView:r}}(e,t),o=r.schema,i=r.normalizedDocs,a=r.selectedFieldsTableView,c=r.notSelectedFieldsTableView,s=i.map((function(e){return{content:e,id:ch(e,t.docType),_rev:sh(e,t.docType),header:"",keylabel:"",url:e._id||e.id?nh("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&oh(e,t.docType),isEditable:rh(e,t.docType)}}));return{notSelectedFields:c,selectedFields:a,hasBulkDeletableDoc:!!t.deleteEnabled&&ih(i,t.docType),schema:o,results:s,displayedFields:n?null:{shown:_.uniq(a).length,allFieldCount:_.without(o,"_attachments").length}}};function Ah(e){return Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kh.apply(null,arguments)}function xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xh(Object(n),!0).forEach((function(t){Lh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lh(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ah(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ah(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ah(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mh,Uh={noResultsWarning:"",docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:nr,textEmptyIndex:"No Documents Found",docType:ar,resultsStyle:(Mh=ne.utils.localStorageGet("fauxton:results_style"),Mh||(Mh={textOverflow:cr,fontSize:pr}),Mh),fetchParams:{limit:ah()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:ah(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!0,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"},executionStats:null,warning:null},qh=function(e){return"query"!==e.language},Bh=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},i=r.filter(qh);return rr===o.selectedLayout?function(e,t){var n=t.databaseName,r=t.docType,o=t.deleteEnabled,i=void 0===o||o,a=e.map((function(e){if("MangoIndex"===r)return{header:Nh(e),content:Ch(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?nh("app",e.id,n):null,isDeletable:!!i&&"special"!==e.type,isEditable:!1};var t=ch(e,r);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:sh(e,r),keylabel:"id",url:t?nh("app",t,n):null,isDeletable:i,isEditable:!0}}));return{displayedFields:null,hasBulkDeletableDoc:ih(e,r),results:a}}(i,o):jh(i,o)},Vh=function(e){return e.selectedLayout===tr},Fh=function(e){return!!Kh(e)&&e.pagination.pageStart+e.docs.length-1},Kh=function(e){return!e.isLoading&&e.docs.length>0},Hh=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(){var t=e.docs[n];return oh(t,e.docType)?e.selectedDocs.some((function(n){return ch(t,e.docType)===n._id}))?void 0:{v:!1}:"continue"},n=0;n<e.docs.length;n++){var r=t();if("continue"!==r&&"object"===Ah(r))return r.v}return!0},zh=function(e){return e.selectedDocs.length>0},Gh=function(e){return e.selectedDocs.length},Wh=function(e){return e.pagination.currentPage>1},Xh=function(e,t){return Bh(e,t).displayedFields||{}},Qh=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var r=t.betweenKeys;n.inclusive_end=r.include,r.startkey&&""!=r.startkey&&(n.start_key=r.startkey),r.endkey&&""!=r.endkey&&(n.end_key=r.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},Jh=function(e){return e.docs},Yh=function(e){return e.selectedDocs},$h=function(e){return e.isEditable},Zh=function(e){return e.selectedLayout},ey=function(e){return e.textEmptyIndex},ty=function(e){return e.docType},ny=function(e){return e.tableView.showAllFieldsTableView},ry=function(e){return e.pagination.canShowNext},oy=function(e){return e.pagination.perPage},iy=function(e){return e.fetchParams},ay=function(e){return e.resultsStyle},cy=function(e,t){return Bt(e,t)},sy=function(e,t,n){return!Ft(t)||!Vt(e,t,n)},uy=(0,oe.Ng)((function(e,t){var n=e.indexResults,r=e.sidebar,o=e.databases,i=n.queryOptionsPanel;return{contentVisible:i.isVisible,includeDocs:i.includeDocs,showReduce:cy(r.designDocList,t.selectedNavItem),reduce:i.reduce,groupLevel:i.groupLevel,showByKeys:i.showByKeys,showBetweenKeys:i.showBetweenKeys,betweenKeys:i.betweenKeys,byKeys:i.byKeys,descending:i.descending,skip:i.skip,limit:i.limit,enableStable:sy(r.designDocList,t.selectedNavItem,o.isDbPartitioned),stable:i.stable,update:i.update,fetchParams:iy(n),queryOptionsParams:Qh(n),perPage:oy(n),selectedLayout:Zh(n),ddocsOnly:t.ddocsOnly}}),(function(e,t){return{resetPagination:function(t){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee.constants.MISC.DEFAULT_PAGE_SIZE;return Oh(e)}(t))},queryOptionsToggleReduce:function(t){e(function(e){return Sh(e?{reduce:!e}:{reduce:!e,includeDocs:!1})}(t))},queryOptionsUpdateGroupLevel:function(t){e(function(e){return Sh({groupLevel:e})}(t))},queryOptionsToggleByKeys:function(t){e(function(e){return Sh({showByKeys:!e,showBetweenKeys:!!e})}(t))},queryOptionsToggleBetweenKeys:function(t){e(function(e){return Sh({showBetweenKeys:!e,showByKeys:!!e})}(t))},queryOptionsUpdateBetweenKeys:function(t){e(function(e){return Sh({betweenKeys:e})}(t))},queryOptionsUpdateByKeys:function(t){e(function(e){return Sh({byKeys:e})}(t))},queryOptionsToggleDescending:function(t){e(function(e){return Sh({descending:!e})}(t))},queryOptionsUpdateSkip:function(t){e(function(e){return Sh({skip:e})}(t))},queryOptionsUpdateLimit:function(t){e(function(e){return Sh({limit:e})}(t))},queryOptionsToggleIncludeDocs:function(t){e(Dh(t))},queryOptionsToggleVisibility:function(t){e(function(e){return Sh({isVisible:e})}(t))},queryOptionsExecute:function(n,r){e(function(e,t,n){var r=function(e){return{limit:e+1,skip:0}}(n);return gh(e,r,t)}(t.queryDocs,n,r))},queryOptionsApplyFilterOnlyDdocs:function(){e(Sh({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1}))},queryOptionsRemoveFilterOnlyDdocs:function(){e(Sh({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1}))},queryOptionsToggleStable:function(t){e(function(e){return Sh({stable:!e})}(t))},queryOptionsChangeUpdate:function(t){e(Sh({update:t.toString()}))},changeLayout:function(t){e(fh(t))},resetState:function(){e(lh())}}}))(Vm);const ly=uy;uy.propTypes={queryDocs:fe().func.isRequired};var py=function(e){var t=e.database,n=e.loadOptions;return re.createElement("div",null,re.createElement(fi.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,ignoreAccents:!1,cache:!1,onChange:function(e){var n=e.value,r=ee.urls("document","app",ne.utils.safeURLName(t.id),ne.utils.safeURLName(n));setTimeout((function(){return ee.navigate(r,{trigger:!0})}))}}))};py.propTypes={database:fe().object.isRequired,loadOptions:fe().func.isRequired};const fy=py,dy=function(e,t){return function(n,r){var o="?"+ne.utils.queryParams({startkey:JSON.stringify(n),endkey:JSON.stringify(n+"é¦™"),limit:30}),i=t?ee.urls("partitioned_allDocs","server",e.safeID(),encodeURIComponent(t),o):ee.urls("allDocs","server",e.safeID(),o);v(i).then((function(e){var t=[];e.error||(t=e.rows.map((function(e){return{value:e.id,label:e.id}}))),r(null,{options:t})}))}};var my=function(e){var t=e.database,n=e.hideQueryOptions,r=e.hideJumpToDoc,o=e.queryDocs,i=e.ddocsOnly,a=e.selectedNavItem,c=e.partitionKey;return re.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},re.createElement("div",{className:"faux-header__searchboxwrapper"},re.createElement("div",{className:"faux-header__searchboxcontainer"},r?null:re.createElement(fy,{key:JSON.stringify(t+c),cache:!1,loadOptions:dy(t,c),database:t}))),n?null:re.createElement(ly,{ddocsOnly:i,queryDocs:o,selectedNavItem:a}))};my.propTypes={database:fe().object.isRequired,hideQueryOptions:fe().bool,isRedux:fe().bool,queryDocs:fe().func,selectedNavItem:fe().object,partitionKey:fe().string},my.defaultProps={hideQueryOptions:!1};const hy=my;function yy(e){return yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(e)}function by(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vy(r.key),r)}}function vy(e){var t=function(e){if("object"!=yy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yy(t)?t:t+""}function gy(e,t){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gy(e,t)}function _y(e){var t=wy();return function(){var n,r=Ey(e);if(t){var o=Ey(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==yy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wy=function(){return!!e})()}function Ey(e){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ey(e)}var Oy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gy(e,t)}(n,e);var t=_y(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&by(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e,t,n,r=this.props,o=r.selectedLayout,i=r.docType,a=r.queryOptionsParams,c=r.fetchUrl;if(i===ar)e=re.createElement(de.A,{type:"button",active:o===nr,onClick:this.toggleLayout.bind(this,nr),variant:"cf-secondary"},"Metadata");else if(i===or)return null;return(c&&-1!==c.indexOf("/_all_docs")||i===ir||!a.reduce)&&(n=re.createElement(de.A,{type:"button",active:o===tr,onClick:this.toggleLayout.bind(this,tr),variant:"cf-secondary"},re.createElement("i",{className:"fonticon-table"})," Table"),t=re.createElement(de.A,{type:"button",active:o===rr,onClick:this.toggleLayout.bind(this,rr),variant:"cf-secondary"},re.createElement("i",{className:"fonticon-json"})," JSON")),re.createElement("div",{className:"alternative-header"},re.createElement(Ds.A,{className:"two-sides-toggle-button"},n,e,t))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,r=t.selectedLayout,o=t.fetchDocs,i=t.fetchParams,a=t.queryOptionsParams,c=t.queryOptionsToggleIncludeDocs;if(e!==r)return n(e),a.include_docs=e!==nr,e===tr?i.conflicts=!0:delete i.conflicts,c(!a.include_docs),void o(i,a)}}]),n}(re.Component);function Sy(e){return Sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(e)}function Dy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ay(r.key),r)}}function Ny(e,t){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ny(e,t)}function Py(e){var t=Ty();return function(){var n,r=Ry(e);if(t){var o=Ry(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Sy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cy(e)}(this,n)}}function Cy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ty(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ty=function(){return!!e})()}function Ry(e){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ry(e)}function jy(e,t,n){return(t=Ay(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ay(e){var t=function(e){if("object"!=Sy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Sy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sy(t)?t:t+""}var ky=fi.MenuDropDown,xy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ny(e,t)}(n,e);var t=Py(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).toggleTextOverflow=r.toggleTextOverflow.bind(Cy(r)),r.setFontSize=r.setFontSize.bind(Cy(r)),r}return function(e,t){t&&Dy(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"toggleTextOverflow",value:function(){this.props.resultsStyle.textOverflow===sr?this.props.updateStyle({textOverflow:cr}):this.props.updateStyle({textOverflow:sr})}},{key:"setFontSize",value:function(e){this.props.updateStyle({fontSize:e})}},{key:"getDensitySection",value:function(){var e="Show full values";return this.props.resultsStyle.textOverflow===sr&&(e="Truncate values"),{title:"Display density",links:[{title:e,onClick:this.toggleTextOverflow}]}}},{key:"getFontSizeSection",value:function(){var e=this;return{title:"Font size",links:[{title:"Small",onClick:function(){e.setFontSize(ur)},icon:this.props.resultsStyle.fontSize===ur?"fonticon-ok":""},{title:"Medium",onClick:function(){e.setFontSize(pr)},icon:this.props.resultsStyle.fontSize===pr?"fonticon-ok":""},{title:"Large",onClick:function(){e.setFontSize(lr)},icon:this.props.resultsStyle.fontSize===lr?"fonticon-ok":""}]}}},{key:"render",value:function(){var e=[];return this.props.showDensity&&e.push(this.getDensitySection()),this.props.showFontSize&&e.push(this.getFontSizeSection()),re.createElement("div",{className:"toolbar-dropdown"},re.createElement(ky,{id:"result-style-menu",links:e,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}]),n}(re.Component);function Iy(e){return Iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(e)}function Ly(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,My(r.key),r)}}function My(e){var t=function(e){if("object"!=Iy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Iy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Iy(t)?t:t+""}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uy(e,t)}function qy(e){var t=By();return function(){var n,r=Vy(e);if(t){var o=Vy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Iy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function By(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(By=function(){return!!e})()}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vy(e)}jy(xy,"defaultProps",{showDensity:!0,showFontSize:!0}),jy(xy,"propTypes",{resultsStyle:fe().object.isRequired,updateStyle:fe().func.isRequired,showDensity:fe().bool,showFontSize:fe().bool});var Fy=fi.BulkActionComponent,Ky=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}(n,e);var t=qy(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Ly(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"shouldComponentUpdate",value:function(e){return null!=e.isListDeletable}},{key:"render",value:function(){var e=this.props,t=e.hasResults,n=e.isListDeletable,r=e.removeItem,o=e.allDocumentsSelected,i=e.hasSelectedItem,a=e.toggleSelectAll,c=e.isLoading,s=e.databaseName,u=e.partitionKey,l=null;(n&&t||c)&&(l=re.createElement(Fy,{removeItem:r,isChecked:o,hasSelectedItem:i,toggleSelect:a,disabled:c,title:"Select all docs that can be..."}));var p=null,f=this.props.selectedLayout!==rr,d=null;(t||c)&&(p=re.createElement(Oy,this.props),d=re.createElement(xy,{updateStyle:this.props.updateResultsStyle,resultsStyle:this.props.resultsStyle,showDensity:f}));var m=null;return s&&(m=re.createElement("div",{className:"ms-auto"},re.createElement(de.A,{id:"create-new-doc-btn",href:Lt(s,u),variant:"cf-primary"},"Create Document"))),re.createElement("div",{className:"document-result-screen__toolbar"},l,p,d,m)}}]),n}(re.Component);function Hy(e){var t=e.text,n=e.isWarning,r=re.createElement("div",{className:"no-results-screen-warning"},re.createElement("i",{className:"fonticon-attention-circled"}),t);return re.createElement("div",{className:"no-results-screen"},n?r:null,re.createElement("div",{className:"watermark-logo"}),n?null:re.createElement("h3",null,t))}function zy(e){return zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(e)}function Gy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yy(r.key),r)}}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wy(e,t)}function Xy(e){var t=Qy();return function(){var n,r=Jy(e);if(t){var o=Jy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==zy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qy=function(){return!!e})()}function Jy(e){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jy(e)}function Yy(e){var t=function(e){if("object"!=zy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zy(t)?t:t+""}Ky.propTypes={removeItem:fe().func.isRequired,allDocumentsSelected:fe().bool.isRequired,hasSelectedItem:fe().bool.isRequired,toggleSelectAll:fe().func.isRequired,isLoading:fe().bool.isRequired,hasResults:fe().bool.isRequired,isListDeletable:fe().bool,partitionKey:fe().string,docType:fe().string,resultsStyle:fe().object.isRequired,updateResultsStyle:fe().func.isRequired},Hy.propTypes={text:fe().string.isRequired};var $y=fi.Copy,Zy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}(n,e);var t=Xy(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={checked:r.props.isSelected},r}return function(e,t){t&&Gy(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content;return this.props.data.selectedFields.map(function(e,r){var o="tableview-data-cell-"+t+e+r+n[e],i=-1!==["object","boolean"].indexOf(zy(n[e]))?JSON.stringify(n[e],null,"  "):n[e],a=be()({showall:this.props.textOverflow===sr,"small-font":this.props.fontSize===ur,"large-font":this.props.fontSize===lr});return re.createElement("td",{key:o,title:i,className:a,onClick:this.onClick.bind(this)},i)}.bind(this))}},{key:"maybeGetCheckboxCell",value:function(e,t){return re.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?re.createElement(nt.A.Check,{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,r=null,o=Object.keys(e._conflicts||{}).length,i=null,a=null;return t&&(r=1===t?t+" Attachment":t+" Attachments",n=re.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:r},re.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(a=1===o?o+" Conflict":o+" Conflicts",i=re.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:a},re.createElement("i",{className:"fonticon-code-branch"}),o)),re.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},i,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return re.createElement("td",{title:t,className:"tableview-el-copy"},re.createElement($y,{title:t,text:t,uniqueKey:(0,me.A)(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){ee.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return re.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}]),n}(re.Component);function eb(e){var t=e.selectedField,n=e.notSelectedFields,r=e.index,o=e.changeField,i=e.selectedFields,a=n.map((function(e){return{value:e,label:e}}));return re.createElement("div",{className:"table-container-autocomplete"},re.createElement("div",{className:"table-select-wrapper"},re.createElement(ei.Ay,{value:t,options:a,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:r},i)}})))}function tb(e){return tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(e)}function nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rb(r.key),r)}}function rb(e){var t=function(e){if("object"!=tb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tb(t)?t:t+""}function ob(e,t){return ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ob(e,t)}function ib(e){var t=ab();return function(){var n,r=cb(e);if(t){var o=cb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==tb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ab(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ab=function(){return!!e})()}function cb(e){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cb(e)}!function(e,t,n){(t=Yy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zy,"defaultProps",{textOverflow:cr}),Zy.propTypes={docIdentifier:fe().string.isRequired,docChecked:fe().func.isRequired,isSelected:fe().bool.isRequired,index:fe().number.isRequired,data:fe().object.isRequired,onClick:fe().func.isRequired,textOverflow:fe().string};var sb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ob(e,t)}(n,e);var t=ib(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&nb(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getContentRows",value:function(){var e=this.props.data.results,t=this.props.resultsStyle,n=t.textOverflow,r=t.fontSize;return e.map(function(e,t){return re.createElement(Zy,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data,textOverflow:n,fontSize:r})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return re.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map((function(e,t){return re.createElement("th",{key:"header-el-"+t},e)}))}},{key:"getDropdown",value:function(e,t,n,r,o){return re.createElement(eb,{selectedField:e,notSelectedFields:t,index:n,changeField:r,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return re.createElement("tr",{key:"tableview-content-row-header"},re.createElement("th",{className:"tableview-header-el-checkbox"}),re.createElement("th",{className:"tableview-el-copy"}),t,re.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return re.createElement("div",{className:"table-view-docs"},re.createElement("table",{className:"table table-striped"},re.createElement("thead",null,this.getHeader()),re.createElement("tbody",null,this.getContentRows())))}}]),n}(re.Component);function ub(e){return ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(e)}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pb(r.key),r)}}function pb(e){var t=function(e){if("object"!=ub(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ub(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ub(t)?t:t+""}function fb(e,t){return fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fb(e,t)}function db(e){var t=mb();return function(){var n,r=hb(e);if(t){var o=hb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ub(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mb=function(){return!!e})()}function hb(e){return hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hb(e)}var yb=fi.LoadLines,bb=fi.Document,vb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fb(e,t)}(n,e);var t=db(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&lb(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&ee.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?re.createElement("a",{href:e},re.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=this,t=function(){},n=this.props.results.results;return _.map(n,(function(n,r){return re.createElement(bb,{key:n.id+r,doc:n,onClick:e.props.isEditable?e.onClick:t,keylabel:n.keylabel,docContent:n.content,docType:e.props.docType,checked:e.props.isSelected(n.id),header:n.header,docChecked:e.props.docChecked,isDeletable:n.isDeletable,docIdentifier:n.id,resultsStyle:e.props.resultsStyle},n.url?e.getUrlFragment("#".concat(n.url)):n.url)}))}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e="".concat(e," show-select")),re.createElement("div",{className:e},re.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return re.createElement("div",null,re.createElement(sb,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,resultsStyle:this.props.resultsStyle,title:"Select all docs that can be..."}))}},{key:"getMainView",value:function(){return this.props.isLoading?re.createElement("div",{className:"loading-lines-wrapper"},re.createElement(yb,null)):!this.props.noResultsWarning&&this.props.hasResults?this.props.selectedLayout===rr?this.getDocumentStyleView():this.getTableStyleView():void 0}},{key:"getNoResultScreen",value:function(){if(!this.props.isLoading){if(this.props.noResultsWarning)return re.createElement(Hy,{text:this.props.noResultsWarning,isWarning:!0});if(!this.props.hasResults)return re.createElement(Hy,{text:this.props.textEmptyIndex})}}},{key:"render",value:function(){return re.createElement("div",{className:"document-result-screen"},this.getNoResultScreen(),re.createElement(Ky,this.props),this.getMainView())}}]),n}(re.Component);function gb(e){return gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gb(e)}function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_b.apply(null,arguments)}function wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wb(Object(n),!0).forEach((function(t){Ob(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ob(e,t,n){return(t=Db(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Db(r.key),r)}}function Db(e){var t=function(e){if("object"!=gb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=gb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gb(t)?t:t+""}function Nb(e,t){return Nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nb(e,t)}function Pb(e){var t=Cb();return function(){var n,r=Tb(e);if(t){var o=Tb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==gb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Cb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cb=function(){return!!e})()}function Tb(e){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tb(e)}var Rb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nb(e,t)}(n,e);var t=Pb(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Sb(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams;e.fetchAtStartup&&t(n,r)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams,o=e.ddocsOnly,i=e.fetchUrl,a=e.resetState,c=e.partitionKey;this.props.ddocsOnly===o&&this.props.fetchUrl===i&&this.props.partitionKey===c||(a(),t(Eb(Eb({},n),{},{skip:0}),Eb(Eb({},r),{},{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex((function(t){return e===t._id}))>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,r=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,r)}},{key:"render",value:function(){var e=this.props.results;return re.createElement(vb,_b({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}]),n}(re.Component);Rb.propTypes={fetchAtStartup:fe().bool.isRequired,fetchDocs:fe().func.isRequired};var jb=(0,oe.Ng)((function(e,t){var n,r=e.indexResults;return{noResultsWarning:r.noResultsWarning,docs:Jh(r),selectedDocs:Yh(r),isLoading:(n=r,n.isLoading),hasResults:Kh(r),results:Bh(r,t.databaseName,t.deleteEnabled),isEditable:$h(r),selectedLayout:Zh(r),allDocumentsSelected:Hh(r),hasSelectedItem:zh(r),numDocsSelected:Gh(r),textEmptyIndex:ey(r),docType:ty(r),fetchParams:iy(r),queryOptionsParams:Qh(r),partitionKey:t.partitionKey,resultsStyle:ay(r)}}),(function(e,t){return{fetchDocs:function(n,r){e(gh(t.queryDocs,n,r))},selectDoc:function(t,n){e(function(e,t){var n=t.findIndex((function(t){return t._id===e._id}));return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),ph(t)}(t,n))},bulkDeleteDocs:function(n,r,o){e(function(e,t,n,r,o,i,a){return!!function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)}(n)&&function(c){var s,u;if(a===or)u={docids:n.map((function(e){return e._id}))},s=function(e,t){var n=ee.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return w(n,t)}(e,u);else{if(a!==ar&&a!==ir)throw new Error("Invalid document type: "+a);s=function(e,t){var n=ee.urls("bulk_docs","server",e);return w(n,t)}(e,u={docs:n})}return s.then((function(e){e.error?_h():(wh(e,n,r,a),c(ph()),c(gh(t,o,i)))}))}}(t.databaseName,t.queryDocs,n,t.designDocs,r,o,t.docType))},changeLayout:function(t){e(fh(t))},bulkCheckOrUncheck:function(n,r,o){e(function(e,t,n,r){return e.forEach((function(e){if(oh(e,r)){var o=t.findIndex((function(t){return ch(e,r)===t._id}));n?t.splice(o,1):-1===o&&t.push({_id:ch(e,r),_rev:sh(e,r),_deleted:!0})}})),ph(t)}(n,r,o,t.docType))},changeTableHeaderAttribute:function(t,n){e(function(e,t){return t[e.index]=e.newSelectedRow,{type:Jm,selectedFieldsTableView:t}}(t,n))},resetState:function(){e(lh())},queryOptionsToggleIncludeDocs:function(t){e(Dh(t))},updateResultsStyle:function(t){e(function(e){return{type:th,resultsStyle:e}}(t))}}}))(Rb);const Ab=jb;function kb(e){var t=e.nextClicked,n=e.previousClicked,r="",o="";return e.canShowPrevious||(r="disabled"),e.canShowNext||(o="disabled"),re.createElement("div",{className:"documents-pagination"},re.createElement("ul",{className:"pagination"},re.createElement("li",{className:"page-item "+r},re.createElement("a",{id:"previous",onClick:n,className:"page-link fonticon-left-open",href:"#","data-bypass":"true"})),re.createElement("li",{className:"page-item "+o},re.createElement("a",{id:"next",onClick:t,className:"page-link fonticon-right-open",href:"#","data-bypass":"true"}))))}function xb(e){return xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xb(e)}function Ib(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lb(r.key),r)}}function Lb(e){var t=function(e){if("object"!=xb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xb(t)?t:t+""}function Mb(e,t){return Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mb(e,t)}function Ub(e){var t=qb();return function(){var n,r=Bb(e);if(t){var o=Bb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qb=function(){return!!e})()}function Bb(e){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bb(e)}jb.propTypes={queryDocs:fe().func.isRequired,docType:fe().string.isRequired},kb.propTypes={nextClicked:fe().func.isRequired,previousClicked:fe().func.isRequired,canShowPrevious:fe().bool.isRequired,canShowNext:fe().bool.isRequired};var Vb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mb(e,t)}(n,e);var t=Ub(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Ib(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?re.createElement("div",{className:"float-start shown-fields"},"Showing ",e.shown," columns."):re.createElement("div",{className:"float-start shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return re.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),re.createElement("div",{className:"footer-doc-control-prioritized-wrapper float-start"},re.createElement("label",{htmlFor:"footer-doc-control-prioritized"},re.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}]),n}(re.Component);function Fb(e){return Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(e)}function Kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hb(r.key),r)}}function Hb(e){var t=function(e){if("object"!=Fb(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fb(t)?t:t+""}function zb(e,t){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zb(e,t)}function Gb(e){var t=Wb();return function(){var n,r=Xb(e);if(t){var o=Xb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Fb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Wb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wb=function(){return!!e})()}function Xb(e){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xb(e)}Vb.propTypes={prioritizedEnabled:fe().bool.isRequired,displayedFields:fe().object.isRequired,toggleShowAllColumns:fe().func.isRequired};var Qb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zb(e,t)}(n,e);var t=Gb(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Kb(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,r=e.pageEnd;return 0===t.length?re.createElement("span",null,"Showing 0 documents."):re.createElement("span",null,"Showing document ",n," - ",r,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,r=t.fetchParams,o=t.queryOptionsParams,i=t.paginateNext,a=t.perPage;n&&i(r,o,a)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,r=t.fetchParams,o=t.queryOptionsParams,i=t.paginatePrevious,a=t.perPage;n&&i(r,o,a)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,r=e.prioritizedEnabled,o=e.displayedFields,i=e.perPage,a=e.canShowNext,c=e.canShowPrevious,s=e.toggleShowAllColumns;return re.createElement("footer",{className:"index-pagination pagination-footer"},re.createElement(kb,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:a,canShowPrevious:c}),re.createElement("div",{className:"footer-controls"},re.createElement("div",{className:"page-controls"},t&&n?re.createElement(Vb,{prioritizedEnabled:r,displayedFields:o,toggleShowAllColumns:s}):null),re.createElement(ss,{perPageChange:this.perPageChange.bind(this),perPage:i}),re.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}]),n}(re.Component),Jb=(0,oe.Ng)((function(e,t){var n,r=e.indexResults;return{docs:Jh(r),selectedDocs:Yh(r),hasResults:Kh(r),pageStart:(n=r,n.pagination.pageStart),pageEnd:Fh(r),perPage:oy(r),prioritizedEnabled:ny(r),showPrioritizedEnabled:Vh(r),displayedFields:Xh(r,t.databaseName),canShowNext:ry(r),canShowPrevious:Wh(r),fetchParams:iy(r),queryOptionsParams:Qh(r)}}),(function(e,t){return{toggleShowAllColumns:function(){e({type:zm})},updatePerPageResults:function(n,r,o){e(function(e,t,n,r){return t=function(e,t,n){return Eh({},e,{limit:n+1,skip:t.skip||0})}(t,n,r),function(o){o(Oh(r)),o(gh(e,t,n))}}(t.queryDocs,r,o,n))},paginateNext:function(n,r,o){e(function(e,t,n,r){return t=function(e,t){return Eh({},e,{skip:e.skip+t})}(t,r),function(r){r({type:Wm}),r(gh(e,t,n))}}(t.queryDocs,n,r,o))},paginatePrevious:function(n,r,o){e(function(e,t,n,r){return t=function(e,t){return Eh({},e,{skip:Math.max(e.skip-t,0)})}(t,r),function(r){r({type:Xm}),r(gh(e,t,n))}}(t.queryDocs,n,r,o))}}}))(Qb);const Yb=Jb;Jb.propTypes={queryDocs:fe().func.isRequired};var $b=(0,oe.Ng)((function(e,t){var n=e.indexResults,r=t.docUrl,o=t.endpoint,i=t.endpointAddQueryOptions;if(r||(r=ee.constants.DOC_URLS.GENERAL),o&&i){var a=ne.utils.queryString(Qh(n));a&&(o=-1==o.indexOf("?")?"".concat(o,"?").concat(a):"".concat(o,"&").concat(a))}return{docUrl:r,endpoint:o}}))(zc);const Zb=$b;function ev(e){return ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(e)}function tv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nv(r.key),r)}}function nv(e){var t=function(e){if("object"!=ev(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ev(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ev(t)?t:t+""}function rv(e,t){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rv(e,t)}function ov(e){var t=av();return function(){var n,r=cv(e);if(t){var o=cv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ev(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iv(e)}(this,n)}}function iv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function av(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(av=function(){return!!e})()}function cv(e){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cv(e)}$b.propTypes={databaseName:fe().string,docUrl:fe().string,endpoint:fe().string,endpointAddQueryOptions:fe().bool};var sv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rv(e,t)}(n,e);var t=ov(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={editorValue:"",editMode:!1},r.onModeSwitchClick=r.onModeSwitchClick.bind(iv(r)),r.onBlur=r.onBlur.bind(iv(r)),r.startEdit=r.startEdit.bind(iv(r)),r.onKeyPress=r.onKeyPress.bind(iv(r)),r.onChange=r.onChange.bind(iv(r)),r.props.checkDbPartitioned(r.props.databaseName),r}return function(e,t){t&&tv(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onModeSwitchClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),!this.props.globalMode&&this.props.onGlobalModeSelected?this.props.onGlobalModeSelected():this.props.partitionKey?this.props.onPartitionKeySelected(this.state.editorValue):this.startEdit()}},{key:"startEdit",value:function(){var e=this;this.setState({editMode:!0,editorValue:this.props.partitionKey}),setTimeout((function(){return e.textInput.focus()}))}},{key:"updatePartitionKey",value:function(){this.setState({editMode:!1});var e=this.state.editorValue.trim();e?this.props.onPartitionKeySelected(e):this.props.onGlobalModeSelected()}},{key:"onBlur",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.updatePartitionKey()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.updatePartitionKey()}},{key:"onChange",value:function(e){this.setState({editorValue:e.target.value})}},{key:"globalHeader",value:function(){return re.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch"},re.createElement("i",{className:"fonticon-filter"}),re.createElement("span",null,"No partition selected"))}},{key:"partitionHeader",value:function(){var e=this,t=re.createElement(nt.A.Control,{type:"text",style:{padding:2,fontSize:16,margin:0,display:this.state.editMode?"block":"none"},onKeyPress:this.onKeyPress,onChange:this.onChange,onBlur:this.onBlur,value:this.state.editorValue,ref:function(t){e.textInput=t}}),n="Click to select a partition",r="partition-selector__key";return""!==this.props.partitionKey&&(n=this.props.partitionKey,r+=" partition-selector__key--active"),re.createElement(re.Fragment,null,re.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch button partition-selector__switch--active"},re.createElement("i",{className:"fonticon-filter"})),re.createElement("div",{className:r},re.createElement("span",{onClick:this.startEdit,style:{display:this.state.editMode?"none":"block"}},n),t))}},{key:"render",value:function(){if(!this.props.selectorVisible)return null;var e=this.props.globalMode&&!this.state.editMode;return re.createElement("div",{className:"partition-selector"},e?this.globalHeader():this.partitionHeader())}}]),n}(re.Component);sv.defaultProps={partitionKey:"",globalMode:!0},sv.propTypes={selectorVisible:fe().bool.isRequired,partitionKey:fe().string.isRequired,checkDbPartitioned:fe().func.isRequired,onPartitionKeySelected:fe().func.isRequired,onGlobalModeSelected:fe().func,globalMode:fe().bool};const uv="PARTITON_KEY_SHOW_SELECTOR",lv="PARTITON_KEY_HIDE_SELECTOR";var pv=(0,oe.Ng)((function(e,t){return{selectorVisible:e.partitionKey.selectorVisible,databaseName:t.databaseName,partitionKey:t.partitionKey,onPartitionKeySelected:t.onPartitionKeySelected,globalMode:t.globalMode}}),(function(e){return{checkDbPartitioned:function(t){e(function(e){return function(t){t({type:lv}),Sc(e).then((function(e){e.props&&!0===e.props.partitioned&&t({type:uv})}))}}(t))}}}))(sv);const fv=pv;pv.propTypes={databaseName:fe().string.isRequired,partitionKey:fe().string.isRequired,onPartitionKeySelected:fe().func.isRequired,onGlobalModeSelected:fe().func.isRequired,globalMode:fe().bool};var dv=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,r=e.database,o=e.dbName,i=e.dropDownLinks,a=e.docURL,c=e.endpoint,s=e.endpointAddQueryOptions,u=e.fetchUrl,l=e.ddocsOnly,p=e.queryDocs,f=e.selectedNavItem,d=e.showPartitionKeySelector,m=e.partitionKey,h=e.onPartitionKeySelected,y=e.onGlobalModeSelected,b=e.globalMode,v=null;return d&&(v=re.createElement(fv,{databaseName:o,partitionKey:m,onPartitionKeySelected:h,onGlobalModeSelected:y,globalMode:b})),re.createElement("header",{className:"two-panel-header"},re.createElement("div",{className:"flex-layout flex-row"},re.createElement("div",{id:"header-docs-left"},re.createElement(Nf,{dbName:o,partitionKey:m,dropDownLinks:i})),re.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},re.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},v),re.createElement("div",{id:"right-header"},re.createElement(hy,{hideQueryOptions:t,hideJumpToDoc:n,database:r,fetchUrl:u,ddocsOnly:l,queryDocs:p,partitionKey:m,selectedNavItem:f})),re.createElement(Zb,{docURL:a,endpoint:c,endpointAddQueryOptions:s}),re.createElement("div",{id:"notification-center-btn"},re.createElement(qc,null)))))};dv.propTypes={dbName:fe().string.isRequired,dropDownLinks:fe().array.isRequired,docURL:fe().string,endpoint:fe().string,showIncludeAllDocs:fe().bool,hideQueryOptions:fe().bool,hideJumpToDoc:fe().bool,database:fe().object.isRequired,queryDocs:fe().func,selectedNavItem:fe().object,showPartitionKeySelector:fe().bool.isRequired,partitionKey:fe().string,onPartitionKeySelected:fe().func,onGlobalModeSelected:fe().func,globalMode:fe().bool},dv.defaultProps={hideHeaderBar:!1,showPartitionKeySelector:!1};var mv=function(e){var t=e.hideFooter,n=e.lowerContent,r=e.upperContent,o=e.fetchUrl,i=e.databaseName,a=e.queryDocs,c=e.selectedNavItem,s=e.partitionKey;return re.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},re.createElement("aside",{id:"sidebar-content",className:"scrollable"},re.createElement(Of,{selectedNavItem:c,selectedPartitionKey:s})),re.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},re.createElement("div",{id:"dashboard-upper-content"},r),re.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),re.createElement("div",{id:"footer"},t?null:re.createElement(Yb,{databaseName:i,fetchUrl:o,queryDocs:a}))))};mv.defaultProps={hideFooter:!1},mv.propTypes={hideFooter:fe().bool,lowerContent:fe().object,upperContent:fe().object,selectedNavItem:fe().object};var hv=function(e){var t=e.database,n=e.designDocs,r=e.docURL,o=e.endpoint,i=e.dbName,a=e.dropDownLinks,c=e.fetchUrl,s=e.ddocsOnly,u=e.deleteEnabled,l=void 0===u||u,p=e.selectedNavItem,f=e.partitionKey,d=e.onPartitionKeySelected,m=e.onGlobalModeSelected,h=e.globalMode,y=(p.navItem,function(e){return function(e,t,n){dh(n,{reduce:void 0,group:void 0,group_level:void 0});var r=ne.utils.queryString(n),o="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(r);return v(o).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:ar}}))}(c,0,e)});Ft(p)&&(y=function(e){return function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0),-1!==e.indexOf("/_partition/")&&(t.stable=void 0,t.conflicts=void 0);var n=ne.utils.queryString(t),r="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(n);return v(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:ar,layout:void 0}}))}(c,e)});var b=re.createElement(Ab,{fetchUrl:c,designDocs:n,ddocsOnly:s,databaseName:i,fetchAtStartup:!0,queryDocs:y,docType:ar,deleteEnabled:l,partitionKey:f});return re.createElement("div",{id:"dashboard",className:"with-sidebar"},re.createElement(dv,{docURL:r,endpoint:o,endpointAddQueryOptions:!0,dbName:i,dropDownLinks:a,database:t,fetchUrl:c,ddocsOnly:s,queryDocs:y,selectedNavItem:p,showPartitionKeySelector:!s,partitionKey:f,onPartitionKeySelected:d,onGlobalModeSelected:m,globalMode:h}),re.createElement(mv,{lowerContent:b,fetchUrl:c,databaseName:i,queryDocs:y,selectedNavItem:p,partitionKey:f}))},yv=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,i=e.dropDownLinks,a=e.selectedNavItem,c=e.partitionKey;return re.createElement("div",{id:"dashboard",className:"with-sidebar"},re.createElement(dv,{docURL:t,endpoint:r,dbName:o,dropDownLinks:i,database:n,hideQueryOptions:!0}),re.createElement(mv,{upperContent:re.createElement(kd,null),lowerContent:re.createElement(dd,{databaseName:o}),hideFooter:!0,selectedNavItem:a,partitionKey:c}))},bv=function(e){var t=e.showEditView,n=e.database,r=e.docURL,o=e.endpoint,i=e.dbName,a=e.dropDownLinks,c=e.selectedNavItem,s=e.designDocInfo,u=e.partitionKey,l=t?re.createElement(Wl.IndexEditorContainer,{partitionKey:u}):re.createElement(Jd,{designDocInfo:s,designDocName:c.designDocName});return re.createElement("div",{id:"dashboard",className:"with-sidebar"},re.createElement(dv,{endpoint:o,docURL:r,dbName:i,dropDownLinks:a,database:n,partitionKey:u,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),re.createElement(mv,{lowerContent:l,hideFooter:!0,selectedNavItem:c,partitionKey:u}))};bv.defaultProps={showEditView:!0},bv.propTypes={showEditView:fe().bool,docURL:fe().string.isRequired,endpoint:fe().string,dbName:fe().string.isRequired,dropDownLinks:fe().array.isRequired,designDocInfo:fe().object};var vv=Au.extend({routes:{"database/:database/_partition/:partitionkey/_all_docs":{route:"partitionedAllDocs",roles:["fx_loggedIn"]},"database/:database/_all_docs(:extra)":{route:"globalAllDocs",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadataNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionKey/_changes":{route:"changes",roles:["fx_loggedIn"]},"database/:database/_changes":{route:"changes",roles:["fx_loggedIn"]}},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new du.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadataNoPartition:function(e,t){return this.designDocMetadata(e,"",t)},designDocMetadata:function(e,t,n){var r=new yc.DdocInfo({_id:"_design/"+n},{database:this.database}),o=new Mu("designDoc",{designDocName:n,designDocSection:"metadata"});Rc.fetchSelectedDatabaseInfo(e);var i=this.getCrumbs(this.database);return re.createElement(bv,{showEditView:!1,docURL:r.documentation(),endpoint:r.url("apiurl"),dbName:this.database.id,dropDownLinks:i,database:this.database,selectedNavItem:o,designDocInfo:r,partitionKey:t})},globalAllDocs:function(e,t){return this.allDocs(e,"",t)},partitionedAllDocs:function(e,t){return this.allDocs(e,t)},allDocs:function(e,t,n){var r=this.createParams(n).docParams,o=t?ee.urls("partitioned_allDocs","server",encodeURIComponent(e),encodeURIComponent(t)):ee.urls("allDocsSanitized","server",e);this.database.buildAllDocs(r);var i=!!(r.startkey&&r.startkey.indexOf("_design")>-1),a="all-docs";i&&(a="design-docs");var c=new Mu(a);Tt.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var s=t?ee.urls("partitioned_allDocs","apiurl",encodeURIComponent(e),encodeURIComponent(t)):this.database.allDocs.urlRef("apiurl",{}),u=ee.constants.DOC_URLS.GENERAL,l=this.getCrumbs(this.database);return Rc.fetchSelectedDatabaseInfo(e),re.createElement(hv,{docURL:u,endpoint:s,dbName:this.database.id,dropDownLinks:l,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:i,selectedNavItem:c,partitionKey:t,onPartitionKeySelected:function(t){var n=ee.urls("partitioned_allDocs","app",encodeURIComponent(e),encodeURIComponent(t));ee.navigate("#/"+n)},onGlobalModeSelected:function(){var t=ee.urls("allDocs","app",encodeURIComponent(e));ee.navigate("#/"+t)},globalMode:""===t})},changes:function(e,t){var n=new Mu("changes");return Rc.fetchSelectedDatabaseInfo(e),re.createElement(yv,{endpoint:ee.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database,selectedNavItem:n,partitionKey:t})}});const gv=vv,_v="RESET_DOC",wv="DOC_LOADED",Ev="SHOW_CLONE_DOC_MODAL",Ov="HIDE_CLONE_DOC_MODAL",Sv="SHOW_DELETE_DOC_CONFIRMATION_MODAL",Dv="HIDE_DELETE_DOC_CONFIRMATION_MODAL",Nv="SHOW_UPLOAD_MODAL",Pv="HIDE_UPLOAD_MODAL",Cv="RESET_UPLOAD_MODAL",Tv="FILE_UPLOAD_SUCCESS",Rv="FILE_UPLOAD_ERROR",jv="START_FILE_UPLOAD",Av="SET_FILE_UPLOAD_PERCENTAGE",kv="SAVING_DOCUMENT",xv="SAVING_DOCUMENT_COMPLETED",Iv="TOGGLE_WRAP_LINE_OPTION";var Lv,Mv=function(e){return function(t){var n=e.doc;t({type:_v}),n.fetch().then((function(){t({type:wv,options:{doc:n}}),e.onLoaded&&e.onLoaded()}),(function(t){404===t.status&&qv("The ".concat(n.id," document does not exist.")),ee.navigate(ee.urls("allDocs","app",e.database.id,""))}))}},Uv=function(){return function(e){e({type:Ov})}};function qv(e){ee.addNotification({msg:e,type:"error",clear:!0})}const Bv=Uv;function Vv(e){return Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(e)}function Fv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qv(r.key),r)}}function Kv(e,t){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kv(e,t)}function Hv(e){var t=Gv();return function(){var n,r=Wv(e);if(t){var o=Wv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Vv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zv(e)}(this,n)}}function zv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Gv=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wv(e)}function Xv(e,t,n){return(t=Qv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qv(e){var t=function(e){if("object"!=Vv(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Vv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vv(t)?t:t+""}var Jv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kv(e,t)}(n,e);var t=Hv(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Xv(zv(e=t.call.apply(t,[this].concat(o))),"getAttachmentList",(function(){var t=encodeURIComponent(e.props.doc.database.get("id")),n=encodeURIComponent(e.props.doc.get("_id"));return _.map(e.props.doc.get("_attachments"),(function(e,r){var o=ee.urls("document","attachment",t,n,encodeURIComponent(r));return re.createElement(kr.A.Item,{key:r,href:o,target:"_blank","data-bypass":"true"},re.createElement("strong",null,r),re.createElement("span",{className:"attachment-delimiter"},"-"),re.createElement("span",null,e.content_type,e.content_type?", ":"",D.formatSize(e.length)))}))})),e}return function(e,t){t&&Fv(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&re.createElement("div",{className:"panel-section view-attachments-section btn-group"},re.createElement(kr.A,{id:"view-attachments-menu",disabled:this.props.disabled},re.createElement(kr.A.Toggle,{variant:"cf-secondary",className:"panel-button dropdown-toggle","data-bypass":"true"},re.createElement("i",{className:"fonticon-paperclip"}),re.createElement("span",{className:"button-text"},"View Attachments"),re.createElement("span",{className:"caret"})),re.createElement(kr.A.Menu,null,this.getAttachmentList())))}}]),n}(re.Component);function Yv(e){return Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(e)}function $v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ig(r.key),r)}}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zv(e,t)}function eg(e){var t=ng();return function(){var n,r=rg(e);if(t){var o=rg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Yv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tg(e)}(this,n)}}function tg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ng(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ng=function(){return!!e})()}function rg(e){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rg(e)}function og(e,t,n){return(t=ig(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ig(e){var t=function(e){if("object"!=Yv(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Yv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yv(t)?t:t+""}Xv(Jv,"propTypes",{isLoading:fe().bool.isRequired,disabled:fe().bool,doc:fe().object}),Xv(Jv,"defaultProps",{isLoading:!0,disabled:!1,doc:{}});var ag=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}(n,e);var t=eg(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return og(tg(e=t.call.apply(t,[this].concat(o))),"state",{uuid:null}),og(tg(e),"cloneDoc",(function(){e.props.onSubmit&&e.props.onSubmit(),e.props.cloneDoc(e.props.database,e.props.doc,e.state.uuid)})),og(tg(e),"closeModal",(function(t){t&&t.preventDefault(),e.props.hideCloneDocModal()})),og(tg(e),"docIDChange",(function(t){e.setState({uuid:t.target.value})})),e}return function(e,t){t&&$v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&D.getUUID().then((function(t){if(t.uuids){var n={uuid:t.uuids[0]},r=e.props.doc?e.props.doc.attributes._id.indexOf(":"):-1;if(r>=0){var o=e.props.doc.attributes._id.substring(0,r);n.uuid=o+":"+n.uuid}e.setState(n)}})).catch((function(){}))}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&(this.nodeRef=re.createRef(),re.createElement(Dt.A,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,"Clone Document")),re.createElement(Dt.A.Body,null,re.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},re.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),re.createElement("p",null,"You can modify the following generated ID for your new document."),re.createElement(nt.A.Control,{type:"text",autoFocus:!0,className:"form-control",onChange:this.docIDChange,ref:this.nodeRef,value:this.state.uuid}))),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",className:"cancel-link",onClick:this.closeModal},"Cancel"),re.createElement(de.A,{variant:"cf-primary",onClick:this.cloneDoc},re.createElement("i",{className:"fonticon-cw"})," Clone Document"))))}}]),n}(re.Component);function cg(e){return cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(e)}function sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mg(r.key),r)}}function ug(e,t){return ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ug(e,t)}function lg(e){var t=pg();return function(){var n,r=fg(e);if(t){var o=fg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==cg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pg=function(){return!!e})()}function fg(e){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fg(e)}function dg(e,t,n){return(t=mg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mg(e){var t=function(e){if("object"!=cg(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=cg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cg(t)?t:t+""}og(ag,"propTypes",{visible:fe().bool.isRequired,doc:fe().object,database:fe().object.isRequired,onSubmit:fe().func.isRequired,hideCloneDocModal:fe().func.isRequired,cloneDoc:fe().func.isRequired});var hg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ug(e,t)}(n,e);var t=lg(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&sg(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"panel-section"},re.createElement(de.A,{variant:"cf-secondary",onClick:this.props.onClick,title:this.props.title,className:this.props.className,disabled:this.props.disabled},re.createElement("i",{className:this.props.iconClass}),re.createElement("span",null,this.props.title)))}}]),n}(re.Component);dg(hg,"propTypes",{title:fe().string.isRequired,onClick:fe().func.isRequired,className:fe().string,disabled:fe().bool}),dg(hg,"defaultProps",{title:"",iconClass:"",onClick:function(){},className:"",disabled:!1});var yg=n(46944);function bg(e){return bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(e)}function vg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dg(r.key),r)}}function gg(e,t){return gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gg(e,t)}function _g(e){var t=Eg();return function(){var n,r=Og(e);if(t){var o=Og(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==bg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wg(e)}(this,n)}}function wg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Eg=function(){return!!e})()}function Og(e){return Og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Og(e)}function Sg(e,t,n){return(t=Dg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dg(e){var t=function(e){if("object"!=bg(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=bg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bg(t)?t:t+""}var Ng=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gg(e,t)}(n,e);var t=_g(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Sg(wg(r=t.call(this,e)),"closeModal",(function(e){e&&e.preventDefault(),r.props.inProgress&&r.props.cancelUpload(),r.props.hideUploadModal(),r.props.resetUploadModal()})),Sg(wg(r),"upload",(function(){r.props.uploadAttachment({doc:r.props.doc,rev:r.props.doc.get("_rev"),files:r.attachments.files})})),Sg(wg(r),"handleSelectedFile",(function(e){r.attachments=e.target,r.setState({isFileSelected:r.attachments&&r.attachments.files&&r.attachments.files.length>0})})),r.state={isFileSelected:!1},r}return function(e,t){t&&vg(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e="alert alert-error";""===this.props.errorMessage&&(e+=" d-none");var t="progress progress-info mt-3";this.props.inProgress||(t+=" d-none"),this.attachmentsRef=re.createRef();var n=this.state.isFileSelected;return re.createElement(Dt.A,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,"Upload Attachment")),re.createElement(Dt.A.Body,null,re.createElement("div",{className:e},this.props.errorMessage),re.createElement("div",null,re.createElement("form",{className:"form"},re.createElement(nt.A.Group,null,re.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),re.createElement(nt.A.Control,{onChange:this.handleSelectedFile,type:"file",name:"_attachments",disabled:this.props.inProgress}))),re.createElement(yg.A,{id:"upload-progress-bar",now:this.props.uploadPercentage,className:t}))),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",className:"cancel-link",onClick:this.closeModal},"Cancel"),re.createElement(de.A,{id:"upload-btn","data-bypass":"true",variant:"cf-primary",onClick:this.upload,disabled:this.props.inProgress||!n,type:"button"},re.createElement("i",{className:"fonticon-up-circled"})," Upload Attachment")))}}]),n}(re.Component);function Pg(e){return Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(e)}function Cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ig(r.key),r)}}function Tg(e,t){return Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tg(e,t)}function Rg(e){var t=Ag();return function(){var n,r=kg(e);if(t){var o=kg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Pg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jg(e)}(this,n)}}function jg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ag(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ag=function(){return!!e})()}function kg(e){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kg(e)}function xg(e,t,n){return(t=Ig(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ig(e){var t=function(e){if("object"!=Pg(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Pg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pg(t)?t:t+""}Sg(Ng,"propTypes",{visible:fe().bool.isRequired,doc:fe().object,inProgress:fe().bool.isRequired,uploadPercentage:fe().number.isRequired,errorMessage:fe().string,cancelUpload:fe().func.isRequired,hideUploadModal:fe().func.isRequired,resetUploadModal:fe().func.isRequired,uploadAttachment:fe().func.isRequired});var Lg=fi.MenuDropDown,Mg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tg(e,t)}(n,e);var t=Rg(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).toggleWordWrap=r.toggleWordWrap.bind(jg(r)),r}return function(e,t){t&&Cg(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"toggleWordWrap",value:function(){this.props.toggleWordWrap()}},{key:"render",value:function(){var e=this,t=[{title:"Word Wrap",onClick:function(){e.toggleWordWrap()},icon:this.props.wordWrapEnabled?"fonticon-ok":""}];return re.createElement("div",{className:"panel-section"},re.createElement(Lg,{id:"doc-editor-preferences-menu",links:t,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}]),n}(re.Component);function Ug(e){return Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(e)}function qg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gg(r.key),r)}}function Bg(e,t){return Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bg(e,t)}function Vg(e){var t=Kg();return function(){var n,r=Hg(e);if(t){var o=Hg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Ug(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fg(e)}(this,n)}}function Fg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kg=function(){return!!e})()}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hg(e)}function zg(e,t,n){return(t=Gg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gg(e){var t=function(e){if("object"!=Ug(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ug(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ug(t)?t:t+""}xg(Mg,"defaultProps",{wordWrapEnabled:!1}),xg(Mg,"propTypes",{wordWrapEnabled:fe().bool,toggleWordWrap:fe().func.isRequired});var Wg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bg(e,t)}(n,e);var t=Vg(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return zg(Fg(e=t.call.apply(t,[this].concat(o))),"getCodeEditor",(function(){if(e.props.isLoading)return re.createElement(fi.LoadLines,null);var t=e.props.doc.attributes;e.props.isDbPartitioned&&(-1!==t._id.indexOf(":")||t._id.startsWith("_design")||(t._id=":"+t._id));var n=JSON.stringify(t,null,"  "),r=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:e.saveDoc}];return re.createElement(fi.CodeEditor,{id:"doc-editor",ref:function(t){return e.docEditor=t},defaultCode:n,disabled:e.props.isSaving,mode:"json",autoFocus:!0,editorCommands:r,notifyUnsavedChanges:!0,stringEditModalEnabled:!0,wordWrapEnabled:e.props.wordWrapEnabled})})),zg(Fg(e),"saveDoc",(function(){e.props.saveDoc(e.props.doc,e.checkDocIsValid(),e.onSaveComplete,e.props.previousUrl)})),zg(Fg(e),"onSaveComplete",(function(){e.getEditor()&&e.getEditor().clearChanges()})),zg(Fg(e),"hideDeleteDocModal",(function(){e.props.hideDeleteDocModal()})),zg(Fg(e),"deleteDoc",(function(){e.props.hideDeleteDocModal(),e.props.deleteDoc(e.props.doc)})),zg(Fg(e),"getEditor",(function(){return e.docEditor?e.docEditor.getEditor():null})),zg(Fg(e),"checkDocIsValid",(function(){if(e.getEditor().hasErrors())return!1;var t=JSON.parse(e.getEditor().getValue());return e.props.doc.clear().set(t,{validate:!0}),!e.props.doc.validationError})),zg(Fg(e),"clearChanges",(function(){e.docEditor&&e.docEditor.clearChanges()})),zg(Fg(e),"getExtensionIcons",(function(){var t=ee.getExtensions("DocEditor:icons");return _.map(t,(function(t,n){return re.createElement(t,{doc:e.props.doc,key:n,database:e.props.database})}))})),zg(Fg(e),"getButtonRow",(function(){return!e.props.isNewDoc&&null!==e.props.doc&&re.createElement("div",null,re.createElement(Mg,{wordWrapEnabled:e.props.wordWrapEnabled,toggleWordWrap:e.props.toggleWordWrap}),re.createElement(Jv,{doc:e.props.doc,isLoading:e.props.isLoading,disabled:e.props.isSaving}),re.createElement("div",{className:"doc-editor-extension-icons"},e.getExtensionIcons()),e.props.conflictCount?re.createElement(hg,{title:"Conflicts (".concat(e.props.conflictCount,")"),iconClass:"fonticon-columns",className:"conflicts",disabled:e.props.isSaving,onClick:function(){ee.navigate(ee.urls("revision-browser","app",e.props.database.safeID(),e.props.doc.id))}}):null,re.createElement(hg,{className:"upload",title:"Upload Attachment",iconClass:"fonticon-up-circled",disabled:e.props.isSaving,onClick:e.props.showUploadModal}),re.createElement(hg,{title:"Clone Document",iconClass:"fonticon-cw",disabled:e.props.isSaving,onClick:e.props.showCloneDocModal}),re.createElement(hg,{title:"Delete",iconClass:"fonticon-trash",disabled:e.props.isSaving,onClick:e.props.showDeleteDocModal}))})),e}return function(e,t){t&&qg(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){(this.props.numFilesUploaded!==e.numFilesUploaded||this.props.doc&&this.props.doc.hasChanged()||this.props.doc&&e.doc&&this.props.doc.id!==e.doc.id)&&(this.getEditor()&&e.doc&&this.getEditor().setValue(JSON.stringify(e.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isSaving?"Saving...":this.props.isNewDoc?"Create Document":"Save Changes",n=this.props.previousUrl?this.props.previousUrl:ee.urls("allDocs","app",ee.url.encode(this.props.database.id));return re.createElement("div",null,re.createElement("div",{id:"doc-editor-actions-panel"},re.createElement("div",{className:"doc-actions-left"},re.createElement(de.A,{id:"save-doc-btn",disabled:this.props.isSaving,variant:"cf-primary",onClick:this.saveDoc},re.createElement("i",{className:"fonticon-ok-circled"})," ",t),re.createElement("div",null,re.createElement(de.A,{href:this.props.isSaving?void 0:"#/".concat(n),variant:"cf-cancel",className:"js-back cancel-button",disabled:this.props.isSaving},"Cancel"))),re.createElement("div",{className:"alignRight"},this.getButtonRow())),re.createElement("div",{className:"code-region"},re.createElement("div",{className:"bgEditorGutter"}),re.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),re.createElement(Ng,{ref:function(t){return e.uploadModal=t},visible:this.props.isUploadModalVisible,doc:this.props.doc,inProgress:this.props.uploadInProgress,uploadPercentage:this.props.uploadPercentage,errorMessage:this.props.uploadErrorMessage,cancelUpload:this.props.cancelUpload,hideUploadModal:this.props.hideUploadModal,resetUploadModal:this.props.resetUploadModal,uploadAttachment:this.props.uploadAttachment}),re.createElement(ag,{doc:this.props.doc,database:this.props.database,visible:this.props.isCloneDocModalVisible,onSubmit:this.clearChanges,hideCloneDocModal:this.props.hideCloneDocModal,cloneDoc:this.props.cloneDoc}),re.createElement("span",{id:"hey"},"bb"),re.createElement(Ss.ConfirmationModal,{title:"Confirm Deletion",visible:this.props.isDeleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}]),n}(re.Component);zg(Wg,"defaultProps",{database:{},isNewDoc:!1}),zg(Wg,"propTypes",{isLoading:fe().bool.isRequired,isSaving:fe().bool.isRequired,isNewDoc:fe().bool.isRequired,isDbPartitioned:fe().bool.isRequired,doc:fe().object,conflictCount:fe().number.isRequired,previousUrl:fe().string,saveDoc:fe().func.isRequired,isCloneDocModalVisible:fe().bool.isRequired,database:fe().object,showCloneDocModal:fe().func.isRequired,hideCloneDocModal:fe().func.isRequired,cloneDoc:fe().func.isRequired,isDeleteDocModalVisible:fe().bool.isRequired,showDeleteDocModal:fe().func.isRequired,hideDeleteDocModal:fe().func.isRequired,deleteDoc:fe().func.isRequired,isUploadModalVisible:fe().bool.isRequired,uploadInProgress:fe().bool.isRequired,uploadPercentage:fe().number.isRequired,uploadErrorMessage:fe().string,numFilesUploaded:fe().number.isRequired,showUploadModal:fe().func.isRequired,hideUploadModal:fe().func.isRequired,cancelUpload:fe().func.isRequired,resetUploadModal:fe().func.isRequired,uploadAttachment:fe().func.isRequired,wordWrapEnabled:fe().bool.isRequired,toggleWordWrap:fe().func.isRequired});var Xg=(0,oe.Ng)((function(e,t){var n=e.docEditor,r=e.databases;return{isLoading:n.isLoading||r.isLoadingDbInfo,isSaving:n.isSaving,isNewDoc:t.isNewDoc,isDbPartitioned:r.isDbPartitioned,doc:n.doc,database:t.database,conflictCount:n.docConflictCount,previousUrl:t.previousUrl,isCloneDocModalVisible:n.cloneDocModalVisible,isDeleteDocModalVisible:n.deleteDocModalVisible,isUploadModalVisible:n.uploadModalVisible,uploadInProgress:n.uploadInProgress,uploadPercentage:n.uploadPercentage,uploadErrorMessage:n.uploadErrorMessage,numFilesUploaded:n.numFilesUploaded,wordWrapEnabled:n.docEditorPreferences.wordWrapEnabled}}),(function(e){return{saveDoc:function(t,n,r,o){e(function(e,t,n,r){return function(o){t?(o({type:kv}),e.save().then((function(){n(e.prettyJSON()),o({type:xv}),ee.addNotification({msg:"Document saved successfully.",type:"success",clear:!0}),r?ee.navigate(r,{trigger:!0}):ee.navigate("#/"+ee.urls("allDocs","app",ee.url.encode(e.database.id)),{trigger:!0})})).fail((function(e){o({type:xv}),ee.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(qv("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):qv("Please fix the JSON errors and try saving again.")}}(t,n,r,o))},showCloneDocModal:function(){e((function(e){e({type:Ev})}))},hideCloneDocModal:function(){e(Bv())},cloneDoc:function(e,t,n){!function(e,t,n){Uv(),t.copy(n).then((function(){var t=ee.urls("document","app",e.safeID(),encodeURIComponent(n));ee.navigate(t,{trigger:!0}),ee.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: ".concat(e.responseText,".");ee.addNotification({msg:t,type:"error"})}))}(e,t,n)},showDeleteDocModal:function(){e((function(e){e({type:Sv})}))},hideDeleteDocModal:function(){e((function(e){e({type:Dv})}))},deleteDoc:function(e){!function(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),r=ee.urls("document","server",t,e.safeID(),n);g(r).then((function(e){if(e.error)throw new Error(e.reason||e.error);ee.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),ee.navigate(ee.urls("allDocs","app",t,""))})).catch((function(e){ee.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})}))}(e)},showUploadModal:function(){e((function(e){e({type:Nv})}))},hideUploadModal:function(){e((function(e){e({type:Pv})}))},cancelUpload:function(){Lv&&Lv.abort()},resetUploadModal:function(){e((function(e){e({type:Cv})}))},uploadAttachment:function(t){e(function(e){return function(t){if(0!==e.files.length){t({type:jv});var n="?rev="+e.rev,r=e.doc.getDatabase().safeID(),o=e.doc.safeID(),i=e.files[0],a=ee.urls("document","attachment",r,o,encodeURIComponent(i.name),n),c=function(e){t({type:Rv,options:{error:e}})},s=new XMLHttpRequest;Lv=s,s.withCredentials=!0,s.upload&&(s.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t({type:Av,options:{percent:n}})}}),s.onloadend=function(){Lv=void 0},s.onerror=function(){c("Error uploading file")},s.onload=function(){if(s.status>=200&&s.status<300)!function(e){t(Mv({doc:e,onLoaded:function(){t({type:Tv}),ee.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}}))}(e.doc);else{var n="Error uploading file. ";try{if(s.responseText){var r=JSON.parse(s.responseText);r.error&&(n+="Reason: "+(r.reason||r.error))}}catch(e){}c(n)}},s.open("PUT",a),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-Type",i.type||"application/octet-stream"),s.setRequestHeader("Accept","application/json"),s.send(i)}else t({type:Rv,options:{error:"Please select a file to be uploaded."}})}}(t))},toggleWordWrap:function(){e((function(e){e({type:Iv})}))}}}))(Wg);const Qg=Xg;var Jg=function(e){var t=e.onClick,n=e.forward?"fonticon-right-open":"fonticon-left-open";return re.createElement("div",{className:n,onClick:t})};Jg.propTypes={onClick:fe().func.isRequired,forward:fe().bool},Jg.defaultProps={forward:!1};var Yg=function(e){var t=e.options,n=e.selected,r=e.onRevisionClick,o=e.onBackwardClick,i=e.onForwardClick,a=t?t.map((function(e){return re.createElement("option",{value:e.value,key:e.value},e.label)})):void 0;return re.createElement("div",{className:"conflicting-revs-dropdown"},re.createElement(Jg,{onClick:o}),re.createElement(nt.A.Select,{name:"form-field-name",value:n,onChange:r},a),re.createElement(Jg,{forward:!0,onClick:i}))};Yg.propTypes={options:fe().array.isRequired,selected:fe().string.isRequired,onRevisionClick:fe().func.isRequired,onBackwardClick:fe().func.isRequired,onForwardClick:fe().func.isRequired};const $g=Yg;function Zg(e){return Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(e)}function e_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t_(r.key),r)}}function t_(e){var t=function(e){if("object"!=Zg(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Zg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zg(t)?t:t+""}function n_(e,t){return n_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n_(e,t)}function r_(e){var t=i_();return function(){var n,r=a_(e);if(t){var o=a_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Zg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o_(e)}(this,n)}}function o_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i_=function(){return!!e})()}function a_(e){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a_(e)}var c_=fi.ConfirmButton,s_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n_(e,t)}(n,e);var t=r_(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={checked:!1},r.close=r.close.bind(o_(r)),r.onDeleteConflicts=r.onDeleteConflicts.bind(o_(r)),r}return function(e,t){t&&e_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"close",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return re.createElement(Dt.A,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},re.createElement(Dt.A.Header,{closeButton:!1},re.createElement(Dt.A.Title,null,"Solve Conflicts")),re.createElement(Dt.A.Body,null,re.createElement("p",null,"Do you want to delete all conflicting revisions for this document?")),re.createElement(Dt.A.Footer,null,re.createElement("div",{className:"col-12"},re.createElement(nt.A.Check,{type:"checkbox",className:"do-not-show-again",label:"Do not show this warning message again",onChange:function(){e.setState({checked:!e.state.checked})}})),re.createElement(de.A,{href:"#",variant:"cf-cancel",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),re.createElement(c_,{onClick:this.onDeleteConflicts,text:"Delete Revisions",variant:"danger"})))}}]),n}(re.Component);function u_(e){return u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(e)}function l_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p_(r.key),r)}}function p_(e){var t=function(e){if("object"!=u_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u_(t)?t:t+""}function f_(e,t){return f_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f_(e,t)}function d_(e){var t=h_();return function(){var n,r=y_(e);if(t){var o=y_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==u_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m_(e)}(this,n)}}function m_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h_=function(){return!!e})()}function y_(e){return y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y_(e)}s_.propTypes={onConfirm:fe().func.isRequired,toggleConfirmModal:fe().func.isRequired};var b_=fi.ConfirmButton,v_="deleteConflictsHideModal",g_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f_(e,t)}(n,e);var t=d_(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={showModal:!1},r.selectAsWinner=r.selectAsWinner.bind(m_(r)),r.onSelectAsWinnerClickOurs=r.onSelectAsWinnerClick.bind(m_(r),r.props.ours),r.onSelectAsWinnerClickTheirs=r.onSelectAsWinnerClick.bind(m_(r),r.props.theirs),r.onRevisionClick=r.onRevisionClick.bind(m_(r)),r.onForwardClick=r.onForwardClick.bind(m_(r)),r.onBackwardClick=r.onBackwardClick.bind(m_(r)),r}return function(e,t){t&&l_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&ne.utils.localStorageSet(v_,!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){!0===ne.utils.localStorageGet(v_)?this.selectAsWinner(e):this.props.toggleConfirmModal(!0,e)}},{key:"render",value:function(){var e=this.props.tree;return re.createElement("div",{className:"revision-browser-controls"},re.createElement(s_,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),re.createElement("div",{className:"row align-items-center mb-3"},re.createElement("div",{className:"revision-browser-controls-label-col col-auto"},"Server-Selected Rev:"),re.createElement("div",{className:"col-5 col-xl-4"},re.createElement(nt.A.Control,{type:"text",placeholder:e.winner,readOnly:!0})),re.createElement("div",{className:"col"},re.createElement(b_,{onClick:this.onSelectAsWinnerClickOurs,text:"Delete Other Conflicts",variant:"secondary",customIcon:"fonticon-trophy"}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"revision-browser-controls-label-col col-auto"},"Conflicting Revisions:"),re.createElement("div",{className:"col-5 col-xl-4"},re.createElement($g,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),re.createElement("div",{className:"col-3"},re.createElement(b_,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,text:"Select as Winner",variant:"secondary",customIcon:"fonticon-trophy"}))))}}]),n}(re.Component);function __(e){return __="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__(e)}function w_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E_(r.key),r)}}function E_(e){var t=function(e){if("object"!=__(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=__(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==__(t)?t:t+""}function O_(e,t){return O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O_(e,t)}function S_(e){var t=D_();return function(){var n,r=N_(e);if(t){var o=N_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==__(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function D_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D_=function(){return!!e})()}function N_(e){return N_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N_(e)}g_.propTypes={tree:fe().object.isRequired,ours:fe().object.isRequired,conflictingRevs:fe().array.isRequired};var P_=n(20292),C_=n(32475).Mode,T_=n(31373),R_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O_(e,t)}(n,e);var t=S_(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&w_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new C_,n=this.revLeftOurs,r=this.revRightTheirs;if(n){var o=P_.render(e(this.props.ours),t,T_,0,!0);n.innerHTML=o.html}if(r){var i=P_.render(e(this.props.theirs),t,T_,0,!0);r.innerHTML=i.html}}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,r=t.theirs;return n&&r?re.createElement("div",{className:"revision-split-area"},re.createElement("div",{"data-id":"ours",className:"ours-area"},re.createElement("div",{className:"doc-title"},n._rev," (Server-Selected Rev)"),re.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),re.createElement("div",{"data-id":"theirs",className:"theirs-area"},re.createElement("div",{className:"doc-title"},r._rev),re.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):re.createElement("div",null)}}]),n}(re.Component),j_=n(14295),A_=function(e){var t=e.ours,n=e.theirs;if(!t||!n)return re.createElement("div",null);var r=j_.diff(t,n),o=j_.formatters.html.format(r,t);return re.createElement("div",{className:"revision-diff-area"},re.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))};A_.propTypes={ours:fe().object,theirs:fe().object,currentRev:fe().string};const k_=A_;function x_(e){return x_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x_(e)}function I_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L_(r.key),r)}}function L_(e){var t=function(e){if("object"!=x_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=x_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x_(t)?t:t+""}function M_(e,t){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M_(e,t)}function U_(e){var t=B_();return function(){var n,r=V_(e);if(t){var o=V_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==x_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q_(e)}(this,n)}}function q_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B_=function(){return!!e})()}function V_(e){return V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V_(e)}var F_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}(n,e);var t=U_(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).toggleDiffViewFalse=r.toggleDiffView.bind(q_(r),!1),r.toggleDiffViewTrue=r.toggleDiffView.bind(q_(r),!0),r}return function(e,t){t&&I_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,r=e.theirs,o=e.conflictingRevs,i=e.isDiffViewEnabled;return t.length||r?r&&o.length?re.createElement("div",{className:"revision-wrapper scrollable"},re.createElement(g_,this.props),re.createElement("div",{className:"revision-view-controls text-center"},re.createElement(Ds.A,{className:"two-sides-toggle-button"},re.createElement(de.A,{style:{width:"130px"},variant:"cf-secondary",className:i?"active":"",onClick:this.toggleDiffViewTrue},re.createElement("i",{className:"fonticon-columns"})," Diff"),re.createElement(de.A,{style:{width:"130px"},variant:"cf-secondary",className:i?"":"active",onClick:this.toggleDiffViewFalse},re.createElement("i",{className:"fonticon-document"})," Document"))),i?re.createElement(k_,{ours:n,theirs:r}):re.createElement(R_,{ours:n,theirs:r})):re.createElement("div",{className:"revision-browser-no-conflict"},re.createElement("h2",null,"No conflicts")):re.createElement(Er,null)}}]),n}(re.Component),K_="REV_TREE_LOADED",H_="REV_BROWSER_DIFF_DOCS_READY",z_="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",G_="REV_BROWSER_SHOW_CONFIRM_MODAL";const W_=K_,X_=H_,Q_=z_,J_=G_;function Y_(e){return Y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y_(e)}function $_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$_(Object(n),!0).forEach((function(t){ew(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ew(e,t,n){return(t=function(e){var t=function(e){if("object"!=Y_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Y_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tw={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null};var nw=function(e){return e.doc},rw=function(e){return e.conflictDoc},ow=function(e){return e.conflictingRevs},iw=function(e){return e.databaseName},aw=function(e){return e.ours},cw=function(e){return e.theirs},sw=function(e){return e.showConfirmModal},uw=function(e){return e.conflictingRevs.map((function(e){return{value:e,label:e}}))},lw=function(e){return e.isDiffViewEnabled},pw=function(e){return e.docToWin};const fw=function(e,t){var n=t._rev;return e.getDoc(t._id,{revs:!0,open_revs:"all"}).then((function(e){var t={};return{paths:e.map((function(e){(e=e.ok)._deleted&&(t[e._rev]=!0);var n=e._revisions;return n.ids.map((function(e,t){return n.start-t+"-"+e}))})),deleted:t,winner:n}}))};function dw(e){return dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dw(e)}function mw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var hw;function yw(e,t,n){return e.reduce((function(e,n){return n[0]!==t&&e.push(n[0]),e}),[]).filter((function(e){return-1===n.indexOf(e)}))}var bw=function(e,t,n,r,o){return{type:W_,options:{tree:e,doc:t,conflictDoc:r,conflictingRevs:n,databaseName:o}}},vw=function(e,t){return{type:J_,options:{show:e,docToWin:t}}},gw=(0,oe.Ng)((function(e,t){var n,r=e.revisionBrowser;return{docId:t.docId,tree:(n=r,n.tree),doc:nw(r),conflictDoc:rw(r),conflictingRevs:ow(r),databaseName:iw(r),ours:aw(r),theirs:cw(r),showConfirmModal:sw(r),dropdownData:uw(r),isDiffViewEnabled:lw(r),docToWin:pw(r)}}),(function(e,t){return{toggleConfirmModal:function(t,n){e(vw(t,n))},initDiffEditor:function(){var n,r;e((n=t.databaseName,r=t.docId,function(e){var t=ee.urls("databaseBaseURL","apiurl",n);(hw=function(e){try{new URL(e)}catch(t){throw new Error("Invalid database URL: ".concat(e))}return{getDoc:function(t,n){return function(e,t,n){if(!t)return Promise.reject(new Error("Invalid document ID"));var r="";n&&"object"===dw(n)&&(r="?"+ne.utils.queryParams(n));var o="";if(t.startsWith("_design/")){var i=t.substring(8);o="_design/"+encodeURIComponent(i)}else o=encodeURIComponent(t);var a="".concat(e,"/").concat(o).concat(r);return v(a).then((function(e){if(e.error){var t=new Error(e.error);throw t.reason=e.reason,t.error=e.error,t}return e}))}(e,t,n)}}}(t)).getDoc(r).then((function(e){return Promise.all([Promise.resolve(e),fw(hw,e)])})).then((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mw(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),o=r[0],i=r[1],a=yw(i.paths,i.winner,Object.keys(i.deleted)),c=a[0];if(!c)return e(bw(i,o,a,null,n));hw.getDoc(o._id,{rev:c}).then((function(t){e(bw(i,o,a,t,n))}))}))}))},chooseLeaves:function(t,n){e(function(e,t){return function(n){hw.getDoc(e._id,{rev:t}).then((function(t){n(function(e,t){return{type:X_,options:{theirs:t,ours:e}}}(e,t))}))}}(t,n))},selectRevAsWinner:function(n,r,o){var i,a,c,s;e((i=t.databaseName,a=n,c=o.paths,s=r,function(e){var t=yw(c,s,[]),n=function(e,t){var n=t.map((function(t){return{_id:e,_rev:t,_deleted:!0}}));return{docs:n}}(a,t);w(ee.urls("bulk_docs","server",i,""),n).then((function(t){if(t.error)return ee.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});ee.addNotification({msg:"Conflicts successfully solved.",clear:!0}),e(vw(!1,null)),ee.navigate(ee.urls("allDocs","app",i,""))}))}))},toggleDiffView:function(t){e(function(e){return{type:Q_,options:{enableDiff:e}}}(t))}}}))(F_);const _w=gw;var ww=ee.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new du.Model({id:this.databaseName}),this.doc=new yc.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/_new":"codeEditorNewDoc","database/:database/_new?(:extra)":"codeEditorNewDoc"},revisionBrowser:function(e,t){var n=ee.urls("allDocs","app",ee.url.encode(this.database.safeID())),r=ee.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return re.createElement($c,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:r,component:re.createElement(_w,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditorNewDoc:function(e,t){return this.codeEditor(e,null,t)},codeEditor:function(e,t,n){var r,o=ne.getParams(n),i=[{name:e,link:ee.urls("allDocs","app",ee.url.encode(e))},{name:t||"New Document"}];if(this.database=new du.Model({id:e}),t)this.doc=new yc.Doc({_id:t},{database:this.database,fetchConflicts:!0});else{var a=o?o.partitionKey:void 0;this.doc=new yc.NewDoc(null,{database:this.database,partitionKey:a})}Rc.fetchSelectedDatabaseInfo(e),r={doc:this.doc,database:this.database},ee.reduxDispatch(Mv(r));var c=void 0,s=ee.router.lastPages.filter((function(e){return-1!==e.indexOf("/_all_docs")||e.match(/_design\/(\S)*\/_/)||-1!==e.indexOf("/_find")}));return s.length>0&&(c=s[s.length-1]),re.createElement($c,{crumbs:i,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),partitionKey:o.partitionKey,component:re.createElement(Qg,{database:this.database,isNewDoc:!t,previousUrl:c})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}});const Ew={DocEditorRouteObject:ww};var Ow=Au.extend({routes:{"database/:database/_partition/:partitionkey/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view":{route:"showPartitionedView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showGlobalView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editViewNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new du.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showGlobalView:function(e,t,n){return this.showView(e,"",t,n)},showPartitionedView:function(e,t,n,r){return this.showView(e,t,n,r)},showView:function(e,t,n,r){r=r.replace(/\?.*$/,""),xl.dispatchClearIndex(),xl.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Rc.fetchSelectedDatabaseInfo(e);var o=new Mu("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});Ru(o);var i=t?encodeURIComponent(t):"",a=ee.urls("view","server",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r)),c=ee.urls("view","apiurl",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r)),s=ee.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return re.createElement(hv,{docURL:s,endpoint:c,dbName:this.database.id,dropDownLinks:u,database:this.database,fetchUrl:a,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:o,partitionKey:t,onPartitionKeySelected:function(t){var o=ee.urls("partitioned_view","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));ee.navigate("#/"+o+encodeURIComponent(r))},onGlobalModeSelected:function(){var t=ee.urls("view","app",encodeURIComponent(e),encodeURIComponent(n));ee.navigate("#/"+t+encodeURIComponent(r))},globalMode:""===t})},createViewNoPartition:function(e,t){return this.createView(e,"",t)},createView:function(e,t,n){var r=!0,o="new-doc";n&&(o="_design/"+n,r=!1),xl.dispatchFetchDesignDocsBeforeEdit({viewName:"new-view",isNewView:!0,database:this.database,designDocs:this.designDocs,designDocId:o,isNewDesignDoc:r}),Rc.fetchSelectedDatabaseInfo(e);var i=new Mu(""),a=this.getCrumbs(this.database);return re.createElement(bv,{showIncludeAllDocs:!0,docURL:ee.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:a,database:this.database,selectedNavItem:i,partitionKey:t})},editViewNoPartition:function(e,t,n){return this.editView(e,"",t,n)},editView:function(e,t,n,r){xl.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Rc.fetchSelectedDatabaseInfo(e);var o=new Mu("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});Ru(o);var i=ee.constants.DOC_URLS.GENERAL,a=ee.urls("view","apiurl",e,n,r),c=this.getCrumbs(this.database);return re.createElement(bv,{showIncludeAllDocs:!0,docURL:i,endpoint:a,dbName:this.database.id,dropDownLinks:c,database:this.database,selectedNavItem:o,partitionKey:t})}});const Sw=Ow;function Dw(e){return Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dw(e)}function Nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pw(r.key),r)}}function Pw(e){var t=function(e){if("object"!=Dw(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Dw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dw(t)?t:t+""}function Cw(e,t){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cw(e,t)}function Tw(e){var t=Rw();return function(){var n,r=jw(e);if(t){var o=jw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Dw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rw=function(){return!!e})()}function jw(e){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jw(e)}var Aw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cw(e,t)}(n,e);var t=Tw(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&Nw(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return[n," ",n>1?"minutes":"minute",", ",t=Math.floor(t-60*n)," ",t>1?"seconds":"second"].join("")}},{key:"getWarning",value:function(e){if(e){var t=e.split("\n").map((function(e,t){return re.createElement(re.Fragment,{key:t},e,re.createElement("br",null))}));return re.createElement("span",null,t)}}},{key:"warningPopupComponent",value:function(e){if(e)return re.createElement("div",{className:"warning"},re.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=0!==t||arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"true":"false";return re.createElement("div",{"data-status":r},e+": ",re.createElement("span",{className:"value"},t.toLocaleString()," ",n))}},{key:"executionStatsBody",value:function(e){var t;return t=e?re.createElement("div",{className:"execution-stats-body"},this.executionStatsLine("Executed at",new Date(e.ts).toLocaleTimeString(),!0),this.executionStatsLine("Execution time",this.humanizeDuration(e.execution_time_ms),!0),this.executionStatsLine("Results returned",e.results_returned,!0),this.executionStatsLine("Keys examined",e.total_keys_examined),this.executionStatsLine("Documents examined",e.total_docs_examined),this.executionStatsLine("Documents examined (quorum)",e.total_quorum_docs_examined)):re.createElement("div",{className:"execution-stats-empty-body"},"Run query to display execution statistics."),re.createElement(re.Fragment,null,re.createElement("div",{className:"execution-stats-header"},"Execution Statistics"),t)}},{key:"render",value:function(){var e=this.props,t=e.executionStatsSupported,n=e.executionStats,r=e.warning,o=this.getWarning(r);return re.createElement(re.Fragment,null,re.createElement("div",{className:"execution-stats"},this.warningPopupComponent(o),t?this.executionStatsBody(n):null))}}]),n}(re.Component);Aw.propTypes={executionStats:fe().object,warning:fe().string,executionStatsSupported:fe().bool};var kw=n(69280);function xw(e){var t=e.isVisible,n=e.onHide;return re.createElement(Dt.A,{dialogClassName:"mango-cheatsheet-modal",show:t},re.createElement(Dt.A.Header,{closeButton:!1},re.createElement(Dt.A.Title,null,"Query Cheatsheet")),re.createElement(Dt.A.Body,null,re.createElement("div",{className:"table-wrapper"},re.createElement(kw.A,{striped:!0},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",null,"Condition Operator"),re.createElement("th",null,"Argument"),re.createElement("th",null,"Purpose"))),re.createElement("tbody",null,re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$eq"),", ",re.createElement("code",null,"$ne"),re.createElement("br",null),re.createElement("code",null,"$lt"),", ",re.createElement("code",null,"$lte"),re.createElement("br",null),re.createElement("code",null,"$gt"),", ",re.createElement("code",null,"$gte")),re.createElement("td",null,"Any JSON value"),re.createElement("td",null,"Equal, Not equal",re.createElement("br",null),"Lesser, Lesser or equal,",re.createElement("br",null),"Greater, Greater or equal")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$exists")),re.createElement("td",null,"Boolean"),re.createElement("td",null,"Check field exists or not")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$type")),re.createElement("td",null,"String"),re.createElement("td",null,"Check field type, accepts: ",re.createElement("code",null,'"null"'),", ",re.createElement("code",null,'"boolean"'),",",re.createElement("code",null,'"number"'),", ",re.createElement("code",null,'"string"'),", ",re.createElement("code",null,'"array"')," and ",re.createElement("code",null,'"object"'))),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$in"),", ",re.createElement("code",null,"$nin")),re.createElement("td",null,"Array of JSON values"),re.createElement("td",null,"Field must exist / not exist")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$size")),re.createElement("td",null,"Integer"),re.createElement("td",null,"Match length of an array field")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$mod")),re.createElement("td",null,"[Divisor, Remainder]"),re.createElement("td",null,"Matches ",re.createElement("pre",null,"field % Divisor == Remainder"))),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$regex")),re.createElement("td",null,"String"),re.createElement("td",null,"String value matches a regex")))),re.createElement("br",null),re.createElement(kw.A,{striped:!0},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",null,"Combination Operators"),re.createElement("th",null,"Argument"),re.createElement("th",null,"Purpose"))),re.createElement("tbody",null,re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$and")),re.createElement("td",null,"Array"),re.createElement("td",null,"Matches if ALL the selectors in the array match")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$or")),re.createElement("td",null,"Array"),re.createElement("td",null,"Matches if ANY of the selectors in the array match")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$nor")),re.createElement("td",null,"Array"),re.createElement("td",null,"Matches if NONE of the selectors in the array match")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$not")),re.createElement("td",null,"Selector"),re.createElement("td",null,"Matches if the given selector does not match")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$all")),re.createElement("td",null,"Array"),re.createElement("td",null,"Matches an array value if it contains all the elements of the argument array")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$elemMatch")),re.createElement("td",null,"Selector"),re.createElement("td",null,"Matches an array field with AT LEAST ONE element that matches ALL the specified query criteria")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$allMatch")),re.createElement("td",null,"Selector"),re.createElement("td",null,"Matches an array field with ALL elements matching ALL the specified query criteria")),re.createElement("tr",null,re.createElement("td",null,re.createElement("code",null,"$keyMapMatch")),re.createElement("td",null,"Selector"),re.createElement("td",null,"Matches a map that contains AT LEAST ONE key that matches ALL the specified query criteria")))))),re.createElement(Dt.A.Footer,null,re.createElement("button",{onClick:n,"data-bypass":"true",className:"btn btn-cf-secondary"},"Close")))}function Iw(e){return Iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iw(e)}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){Hw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zw(r.key),r)}}function qw(e,t){return qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qw(e,t)}function Bw(e){var t=Fw();return function(){var n,r=Kw(e);if(t){var o=Kw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Iw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vw(e)}(this,n)}}function Vw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fw=function(){return!!e})()}function Kw(e){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kw(e)}function Hw(e,t,n){return(t=zw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zw(e){var t=function(e){if("object"!=Iw(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Iw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Iw(t)?t:t+""}var Gw=fi.PaddedBorderedBox,Ww=fi.CodeEditorPanel,Xw=ne.helpers.getDocUrl,Qw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qw(e,t)}(n,e);var t=Bw(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Hw(Vw(r=t.call(this,e)),"state",{isCheatsheetVisible:!1}),Hw(Vw(r),"hideCheatsheetModal",(function(){r.setState({isCheatsheetVisible:!1})})),Hw(Vw(r),"showCheatsheetModal",(function(){r.setState({isCheatsheetVisible:!0})})),r}return function(e,t){t&&Uw(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){var e=this;prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults(),this.props.checkExecutionStatsSupport({databaseName:this.props.databaseName});var t=this.codeEditor.codeEditor.editor,n="runQuery";t.commands.byName[n]||t.commands.addCommand({name:n,bindKey:{win:"Ctrl-Enter",mac:"Command-Option-Enter"},exec:function(){e.runQuery({preventDefault:function(){}})},readOnly:!0})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return re.createElement("div",{className:"mango-editor-wrapper"},re.createElement(xw,{isVisible:this.state.isCheatsheetVisible,onHide:this.hideCheatsheetModal}),re.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},re.createElement("div",{className:"padded-box"},re.createElement(ei.Ay,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),re.createElement(Gw,null,re.createElement(Ww,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:Xw("MANGO_SEARCH"),syntaxMode:"mango",defaultCode:this.props.queryFindCode,showCheatSheetIcon:!0,onCheatsheatIconClick:this.showCheatsheetModal,setHeightToLineCount:!1,className:"mango-code-editor"})),re.createElement("div",{className:"padded-box"},re.createElement("div",{className:"actions-panel"},re.createElement(de.A,{type:"submit",id:"create-index-btn",variant:"cf-primary",className:"btn-space"},"Run Query"),re.createElement(de.A,{type:"button",id:"explain-btn",variant:"cf-secondary",className:"btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),re.createElement("div",{className:"right-side-actions"},re.createElement(de.A,{variant:"cf-secondary",className:"edit-link",onClick:function(t){e.manageIndexes(t)}},"Manage Indexes"))),re.createElement("div",null,re.createElement(Aw,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?re.createElement("div",{className:"mango-editor-wrapper"},re.createElement(fi.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(ee.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+ee.urls("mango","index-app",encodeURIComponent(this.props.databaseName),t);ee.navigate(n)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:JSON.parse(this.getEditorValue()),fetchParams:Mw(Mw({},this.props.fetchParams),{},{skip:0})}))}}]),n}(re.Component);Qw.propTypes={description:fe().string.isRequired,editorTitle:fe().string.isRequired,queryFindCode:fe().string.isRequired,queryFindCodeChanged:fe().bool,databaseName:fe().string.isRequired,partitionKey:fe().string,executionStatsSupported:fe().bool.isRequired,runExplainQuery:fe().func.isRequired,runQuery:fe().func.isRequired,manageIndexes:fe().func.isRequired,loadQueryHistory:fe().func.isRequired,clearResults:fe().func.isRequired,checkExecutionStatsSupport:fe().func.isRequired};const Jw={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS",MANGO_SET_EXECUTION_STATS_SUPPORTED:"MANGO_SET_EXECUTION_STATS_SUPPORTED",SET_EXPLAIN_VIEW_FORMAT:"SET_EXPLAIN_VIEW_FORMAT",EXPLAIN_RESULTS_REDUX_RESET_STATE:"EXPLAIN_RESULTS_REDUX_RESET_STATE",HIDE_EXPLAIN_REASONS_MODAL:"HIDE_EXPLAIN_REASONS_MODAL",SHOW_EXPLAIN_REASONS_MODAL:"SHOW_EXPLAIN_REASONS_MODAL"};function Yw(e){return Yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yw(e)}function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$w(Object(n),!0).forEach((function(t){eE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eE(e,t,n){return(t=function(e){var t=function(e){if("object"!=Yw(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Yw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yw(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tE=function(e,t){var n=ne.utils.queryString(t),r=ee.urls("mango","index-server",ne.utils.safeURLName(e));return r="".concat(r).concat(-1!==r.indexOf("?")?"&":"?").concat(n),v(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:or,layout:rr}}))},nE=null,rE=function(e){return null===nE?new ee.Promise((function(t){oE(e,"",{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then((function(e){nE=200==e.status,t(nE)}))})):Promise.resolve(nE)},oE=function(e,t,n,r){var o=t?encodeURIComponent(t):"",i=ee.urls("mango","query-server",encodeURIComponent(e),o),a=function(e,t){var n=t.limit,r=t.limit-1,o=(Math.floor(t.skip/r)+1)*r-e.limit;return o>=0&&(n=r-o),Zw(Zw({},e),{},{limit:n,skip:e.skip?t.skip+e.skip:t.skip})}(n,r);return w(i,a,{raw:!0})},iE=function(e,t,n,r){return rE(e).then((function(o){return o&&(n.execution_stats=!0),oE(e,t,n,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:ir,executionStats:e.execution_stats,warning:e.warning}}))}))};const aE={loadQueryHistory:function(e){return{type:Jw.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:Jw.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:Jw.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:Jw.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:Jw.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:Jw.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:Jw.MANGO_SAVE_INDEX_REQUEST}},checkExecutionStatsSupport:function(e){var t=e.databaseName;return function(e){return rE(t).then((function(t){t&&e({type:Jw.MANGO_SET_EXECUTION_STATS_SUPPORTED})})).catch((function(){}))}},saveIndex:function(e){var t=this,n=e.databaseName,r=e.indexCode,o=e.fetchParams;return ee.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),function(e,t){var n=ee.urls("mango","index-server",ne.utils.safeURLName(e));return w(n,t,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r).then((function(){e(gh((function(e){return tE(n,e)}),o,{})),ee.addNotification({msg:"Index is ready for querying.",type:"success",clear:!0,escape:!1})})).catch((function(e){ee.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})}))}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,r=e.partitionKey,o=e.queryCode;return function(e){return function(e,t,n){var r=t?encodeURIComponent(t):"",o=ee.urls("mango","explain-server",encodeURIComponent(e),r);return w(o,n,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r,o).then((function(n){e(t.showQueryExplain({explainPlan:n}))})).catch((function(){ee.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})}))}},setExplainViewFormat:function(e){return{type:Jw.SET_EXPLAIN_VIEW_FORMAT,options:e}},hideReasonsModal:function(){return{type:Jw.HIDE_EXPLAIN_REASONS_MODAL}},showReasonsModal:function(){return{type:Jw.SHOW_EXPLAIN_REASONS_MODAL}},resetState:function(){return{type:Jw.EXPLAIN_RESULTS_REDUX_RESET_STATE}}};var cE=function(e){var t=e.additionalIndexes;if(!t)return[];var n=ee.getExtensions("mango:additionalIndexes")[0];return n?t.filter((function(e){return-1!==e.get("type").indexOf(n.type)})):void 0},sE=(0,oe.Ng)((function(e,t){var n,r,o=e.mangoQuery,i=e.indexResults;return{databaseName:t.databaseName,queryFindCode:Ph(o.queryFindCode),queryFindCodeChanged:o.queryFindCodeChanged,availableIndexes:(n=o,r=n.availableIndexes,r?r.filter((function(e){var t=e.type;return-1!==["json","special"].indexOf(t)})):[]),additionalIndexes:cE(o),isLoading:o.isLoading,history:o.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:i.fetchParams,executionStats:i.executionStats,warning:i.warning,partitionKey:t.partitionKey,executionStatsSupported:o.executionStatsSupported}}),(function(e){return{loadQueryHistory:function(t){e(aE.loadQueryHistory(t))},checkExecutionStatsSupport:function(t){e(aE.checkExecutionStatsSupport(t))},runExplainQuery:function(t){e(aE.runExplainQuery(t))},runQuery:function(t){e(aE.hideQueryExplain()),e(aE.newQueryFindCode(t)),e(gh((function(e){return iE(t.databaseName,t.partitionKey,t.queryCode,e)}),t.fetchParams,{}))},clearResults:function(){e(lh())},manageIndexes:function(){e(aE.hideQueryExplain())}}}))(Qw);const uE=sE;function lE(e){return lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lE(e)}function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pE(Object(n),!0).forEach((function(t){dE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dE(e,t,n){return(t=hE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hE(r.key),r)}}function hE(e){var t=function(e){if("object"!=lE(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=lE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lE(t)?t:t+""}function yE(e,t){return yE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yE(e,t)}function bE(e){var t=gE();return function(){var n,r=_E(e);if(t){var o=_E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==lE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vE(e)}(this,n)}}function vE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gE=function(){return!!e})()}function _E(e){return _E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_E(e)}var wE=fi.PaddedBorderedBox,EE=fi.CodeEditorPanel,OE=fi.LoadLines,SE=ne.helpers.getDocUrl,DE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yE(e,t)}(n,e);var t=bE(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={partitionedSelected:!0},r.onTemplateSelected=r.onTemplateSelected.bind(vE(r)),r.onTogglePartitioned=r.onTogglePartitioned.bind(vE(r)),r.saveIndex=r.saveIndex.bind(vE(r)),r}return function(e,t){t&&mE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:fE(fE({},this.props.fetchParams),{},{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.codeEditor)return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedCheckobx",value:function(){return this.props.isDbPartitioned?re.createElement("label",null,re.createElement("input",{id:"js-partitioned-index",type:"checkbox",checked:this.state.partitionedSelected,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"}}),"Partitioned"):null}},{key:"editor",value:function(){var e=this,t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+ee.urls("mango","query-app",encodeURIComponent(this.props.databaseName),t);return re.createElement("div",{className:"mango-editor-wrapper"},re.createElement("form",{className:"form-horizontal",onSubmit:this.saveIndex},re.createElement("div",{className:"padded-box"},re.createElement(ei.Ay,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:this.onTemplateSelected})),re.createElement(wE,null,re.createElement(EE,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:SE("MANGO_INDEX"),defaultCode:this.props.queryIndexCode,setHeightToLineCount:!1,className:"mango-code-editor"}),this.partitionedCheckobx()),re.createElement("div",{className:"padded-box"},re.createElement("div",{className:"actions-panel"},re.createElement(de.A,{variant:"cf-primary",className:"btn-space",id:"create-index-btn",onClick:this.saveIndex},"Create Index"),re.createElement("div",{className:"right-side-actions"},re.createElement(de.A,{variant:"cf-secondary",className:"edit-link",href:n},"Edit Query"))))))}},{key:"render",value:function(){return this.props.isLoading?re.createElement(OE,null):this.editor()}},{key:"saveIndex",value:function(e){e.preventDefault();var t=function(){ee.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0})};if(this.editorHasErrors())t();else{var n=this.getEditorValue();if(this.props.isDbPartitioned)try{var r=JSON.parse(n);!0!==r.partitioned&&!1!==r.partitioned&&(r.partitioned=this.state.partitionedSelected),n=JSON.stringify(r)}catch(e){t()}this.props.saveIndex({databaseName:this.props.databaseName,indexCode:n,fetchParams:this.props.fetchParams})}}}]),n}(re.Component);DE.propTypes={isLoading:fe().bool.isRequired,databaseName:fe().string.isRequired,isDbPartitioned:fe().bool.isRequired,saveIndex:fe().func.isRequired,queryIndexCode:fe().string.isRequired,partitionKey:fe().string,loadIndexTemplates:fe().func.isRequired,clearResults:fe().func.isRequired,loadIndexList:fe().func.isRequired},DE.defaultProps={isLoading:!0,isDbPartitioned:!1};var NE=(0,oe.Ng)((function(e,t){var n=e.mangoQuery,r=e.indexResults,o=e.databases;return{description:t.description,databaseName:t.databaseName,queryIndexCode:Ph(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:r.fetchParams,partitionKey:t.partitionKey,isLoading:o.isLoadingDbInfo,isDbPartitioned:o.isDbPartitioned}}),(function(e,t){return{saveIndex:function(t){e(aE.saveIndex(t))},loadIndexList:function(n){e(gh((function(e){return tE(t.databaseName,e)}),n.fetchParams,{}))},clearResults:function(){e(lh())},loadIndexTemplates:function(){e(aE.loadIndexTemplates())}}}))(DE);const PE=NE;function CE(e){var t=e.fields,n=e.isTextIndex;if(!t)return null;if(0===t.length)return re.createElement("div",{className:"col-12"},n?"All fields":"No fields");var r=t.map((function(e){var t=Object.getOwnPropertyNames(e)[0],n="asc"===e[t]?re.createElement("i",{className:"icon fonticon-up-1"}):re.createElement("i",{className:"icon fonticon-down-1"});return re.createElement("div",{key:t,className:"col-12"},t,n)}));return re.createElement("div",{className:"row"},r)}function TE(e){var t=e.reason,n=e.onClick;return re.createElement("a",{className:"explainReason",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),n()}},function(e){return"string"==typeof e?e:e&&e.length>0?e.join(", "):"n/a"}(t))}function RE(e){var t=e.index,n=e.isWinner,r=e.reason,o=e.covering,i=e.onReasonClick,a=e.extraInfo,c="col-md-12 col-lg-3 mb-4 mb-lg-0",s=[t.partitioned?"partitioned":"global"];return o&&s.push("covering"),re.createElement("div",{className:"row explain-index-panel"},re.createElement("div",{className:c},re.createElement("strong",null,t.type),": ",t.name,re.createElement("br",null),t.ddoc?re.createElement(re.Fragment,null,re.createElement("span",{className:"index-ddoc-name"},t.ddoc),re.createElement("br",null)):null),re.createElement("div",{className:c},re.createElement(fi.BadgeList,{elements:s,tagExplanations:{partitioned:"Index queries over a single data partition",global:"Index queries over all data within database",covering:"Index can return all data needed by the query without having to load document bodies"},removeBadge:function(){}})),re.createElement("div",{className:c},re.createElement(CE,{fields:t.def.fields,isTextIndex:"text"===t.type})),n?re.createElement("div",{className:c},a||" "):re.createElement("div",{className:c},r?re.createElement(TE,{reason:r,onClick:i}):re.createElement("span",null,"reason not available")))}function jE(e){var t=e.isVisible,n=e.onHide;return re.createElement(Dt.A,{dialogClassName:"explain-reasons-legend-modal",show:t},re.createElement(Dt.A.Header,{closeButton:!1},re.createElement(Dt.A.Title,null,"Reasons for Unsuitable Indexes")),re.createElement(Dt.A.Body,null,re.createElement("div",{className:"table-wrapper"},re.createElement(kw.A,{striped:!0},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",null,"Code"),re.createElement("th",null,"Explanation"))),re.createElement("tbody",null,re.createElement("tr",null,re.createElement("td",null,"alphabetically_comes_after"),re.createElement("td",null,"If multiple indexes are equally valid, the first index sorted alphanumerically by name is selected.")),re.createElement("tr",null,re.createElement("td",null,"empty_selector"),re.createElement("td",null,"The selector is empty.")),re.createElement("tr",null,re.createElement("td",null,"excluded_by_user"),re.createElement("td",null,"Index did not match the specified ",re.createElement("code",null,"â€œuse_indexâ€")," value.")),re.createElement("tr",null,re.createElement("td",null,"field_mismatch"),re.createElement("td",null,"The index does contain the fields required to answer the query.")),re.createElement("tr",null,re.createElement("td",null,"less_overlap"),re.createElement("td",null,"The index has less field coverage than the selected index.")),re.createElement("tr",null,re.createElement("td",null,"is_partial"),re.createElement("td",null,"Partial indexes cannot be selected automatically.")),re.createElement("tr",null,re.createElement("td",null,"needs_text_search"),re.createElement("td",null," Index did not match the specified ",re.createElement("code",null,"â€œtextâ€")," operator. ")),re.createElement("tr",null,re.createElement("td",null,"scope_mismatch"),re.createElement("td",null,"The index scope does not match the query scope (e.g. the query is against a partition and the index is global).")),re.createElement("tr",null,re.createElement("td",null,"sort_order_mismatch"),re.createElement("td",null,"The fields in the index are not sorted in the order as required by the query.")),re.createElement("tr",null,re.createElement("td",null,"too_many_fields"),re.createElement("td",null,"The index has more fields than the chosen one.")),re.createElement("tr",null,re.createElement("td",null,"unfavored_type"),re.createElement("td",null,"An index with a preferred type was selected. Order of index type preference: json, text, special (",re.createElement("code",null,"_all_docs"),").")))))),re.createElement(Dt.A.Footer,null,re.createElement("button",{onClick:n,"data-bypass":"true",className:"btn btn-cf-secondary",id:"closeReasonModal"},"Close")))}function AE(e){return AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AE(e)}function kE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xE(r.key),r)}}function xE(e){var t=function(e){if("object"!=AE(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=AE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==AE(t)?t:t+""}function IE(e,t){return IE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IE(e,t)}function LE(e){var t=ME();return function(){var n,r=UE(e);if(t){var o=UE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==AE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ME(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ME=function(){return!!e})()}function UE(e){return UE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},UE(e)}CE.propTypes={fields:fe().arrayOf(fe().object).isRequired,isTextIndex:fe().bool},RE.propTypes={index:fe().object.isRequired,onReasonClick:fe().func.isRequired,reason:fe().string,covering:fe().bool,isWinner:fe().bool,extraInfo:fe().element};var qE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IE(e,t)}(n,e);var t=LE(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&kE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"componentWillUnmount",value:function(){this.props.resetState()}},{key:"sortCandidatesByRanking",value:function(e,t){if(void 0===e.analysis.ranking)return 1;if(void 0===t.analysis.ranking)return-1;var n=e.analysis.ranking-t.analysis.ranking;return 0===n?e.index.name.localeCompare(t.index.name):n}},{key:"pickUsableIndexes",value:function(e){return e.filter((function(e){return"json"===e.index.type&&e.analysis.usable})).sort(this.sortCandidatesByRanking)}},{key:"pickNotUsableIndexes",value:function(e){return e.filter((function(e){return"json"!==e.index.type||!e.analysis.usable})).sort(this.sortCandidatesByRanking)}},{key:"toggleButtons",value:function(){var e=this;return re.createElement("div",{className:"row mb-4"},re.createElement("div",{className:"col"},re.createElement(Ds.A,{"aria-label":"Explain format selector"},re.createElement(de.A,{type:"button",id:"explain-parsed-view",active:"parsed"===this.props.viewFormat,onClick:function(){e.props.onViewFormatChange("parsed")},variant:"cf-secondary"},"Parsed"),re.createElement(de.A,{type:"button",id:"explain-json-view",active:"json"===this.props.viewFormat,onClick:function(){e.props.onViewFormatChange("json")},variant:"cf-secondary"},"JSON"))))}},{key:"rawJsonResponse",value:function(){return re.createElement("div",{className:"explain-json-response"},re.createElement("span",{className:"explain-plan-section-title"},"JSON Response"),re.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}},{key:"isKeyRangeUnbounded",value:function(e){if(e){var t=[e.start_key,e.end_key].flat().filter((function(e){return e}));return 1===t.length&&"<MAX>"===t[0]}return!1}},{key:"parsedContent",value:function(){var e=this,t=this.props.explainPlan,n=t.index,r=t.covering,o=t.mrargs;if(!n)return"Invalid explain plan";var i=this.isKeyRangeUnbounded(o)?re.createElement("span",{className:"index-extra-info"},re.createElement("span",{className:"fonticon-attention-circled"}),"Full index scan detected. Query time will degrade as documents are added to the index."):null,a=re.createElement(RE,{index:n,isWinner:!0,covering:r,onReasonClick:this.props.showReasonsModal,extraInfo:i}),c=this.props.explainPlan.index_candidates,s=c?re.createElement("span",{className:"explain-plan-section-title"},"Suitable Indexes",re.createElement(BE,{tooltip_content:"Other suitable indexes that were not chosen"})):null,u=c?re.createElement("span",{className:"explain-plan-section-title"},"Unsuitable Indexes",re.createElement(BE,{tooltip_content:"Indexes that do not match the given query"})):null,l=null,p=null;return c&&c.length>0&&(l=this.pickUsableIndexes(c).map((function(t){var n=t.index,r=t.analysis,o=r.reasons,i=r.covering,a=o[0].name;return re.createElement(RE,{key:"".concat(n.ddoc,'"-"').concat(n.name),isWinner:!1,onReasonClick:e.props.showReasonsModal,index:n,reason:a,covering:i})})),p=this.pickNotUsableIndexes(c).map((function(t){var n=t.index,r=t.analysis,o=r.reasons,i=r.covering,a=o[0].name;return re.createElement(RE,{key:"".concat(n.ddoc,'"-"').concat(n.name),isWinner:!1,onReasonClick:e.props.showReasonsModal,index:n,reason:a,covering:i})}))),(l&&0===l.length||c&&!l)&&(l=re.createElement("div",{className:"explain-index-panel"},"No other suitable indexes found.")),(p&&0===p.length||c&&!p)&&(p=re.createElement("div",{className:"explain-index-panel"},"No other indexes found.")),re.createElement(re.Fragment,null,re.createElement("span",{className:"explain-plan-section-title"},"Selected Index",re.createElement(BE,{tooltip_content:"The index used when running the query"})),a,re.createElement("br",null),s,l,re.createElement("br",null),u,p)}},{key:"render",value:function(){return re.createElement("div",{id:"explain-plan-wrapper"},re.createElement(jE,{isVisible:this.props.isReasonsModalVisible,onHide:this.props.hideReasonsModal}),this.toggleButtons(),"parsed"===this.props.viewFormat?this.parsedContent():null,"json"===this.props.viewFormat?this.rawJsonResponse():null)}}]),n}(re.Component);qE.propTypes={explainPlan:fe().object.isRequired,viewFormat:fe().string.isRequired,isReasonsModalVisible:fe().bool.isRequired,onViewFormatChange:fe().func.isRequired,resetState:fe().func.isRequired,hideReasonsModal:fe().func.isRequired,showReasonsModal:fe().func.isRequired};var BE=function(e){var t=e.tooltip_content,n=re.createElement(Ce.A,{id:"graveyard-tooltip"},t);return re.createElement(Te.A,{placement:"top",overlay:n},re.createElement("i",{className:"fonticon fonticon-info-circled"}))},VE=(0,oe.Ng)((function(e,t){var n=e.mangoQuery;return{explainPlan:t.explainPlan,viewFormat:n.explainViewFormat,isReasonsModalVisible:n.isReasonsModalVisible}}),(function(e){return{onViewFormatChange:function(t){e(aE.setExplainViewFormat(t))},resetState:function(){e(aE.resetState())},hideReasonsModal:function(){e(aE.hideReasonsModal())},showReasonsModal:function(){e(aE.showReasonsModal())}}}))(qE);const FE={MangoIndexEditorContainer:PE,MangoQueryEditorContainer:uE,ExplainPageContainer:VE};function KE(e){return KE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KE(e)}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zE(r.key),r)}}function zE(e){var t=function(e){if("object"!=KE(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=KE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==KE(t)?t:t+""}function GE(e,t){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GE(e,t)}function WE(e){var t=XE();return function(){var n,r=QE(e);if(t){var o=QE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==KE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function XE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XE=function(){return!!e})()}function QE(e){return QE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},QE(e)}var JE=function(e){var t=e.docURL,n=e.endpoint,r=e.databaseName,o=e.showPartitionKeySelector,i=e.partitionKey,a=e.onPartitionKeySelected,c=e.onGlobalModeSelected,s=e.globalMode,u=re.createElement(Zb,{docURL:t,endpoint:n,includeQueryOptionsParams:!1}),l=null;return o&&(l=re.createElement(fv,{databaseName:r,partitionKey:i,onPartitionKeySelected:a,onGlobalModeSelected:c,globalMode:s})),re.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},re.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},l),re.createElement("div",{id:"right-header",className:"flex-body"}),u,re.createElement("div",{id:"notification-center-btn"},re.createElement(qc,null)))},YE=function(e){var t=e.databaseName,n=e.fetchUrl,r=e.queryDocs;return re.createElement("div",{id:"footer"},re.createElement(Yb,{databaseName:t,fetchUrl:n,queryDocs:r}))},$E=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint,o=e.databaseName,i=e.partitionKey,a=e.showPartitionKeySelector,c=e.onPartitionKeySelected,s=e.onGlobalModeSelected,u=e.globalMode;return re.createElement("div",{className:"header-wrapper flex-layout flex-row"},re.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},re.createElement(Fc,{crumbs:t})),re.createElement(JE,{docURL:n,endpoint:r,databaseName:o,showPartitionKeySelector:a,partitionKey:i,onPartitionKeySelected:c,onGlobalModeSelected:s,globalMode:u}))};$E.defaultProps={crumbs:[]};var ZE=function(e){var t=e.edit,n=e.designDocs,r=e.explainPlan,o=e.databaseName,i=e.fetchUrl,a=e.queryDocs,c=e.docType,s=e.partitionKey,u=t?re.createElement(FE.MangoIndexEditorContainer,{description:ne.i18n.en_US["mango-descripton-index-editor"],databaseName:o,partitionKey:s}):re.createElement(FE.MangoQueryEditorContainer,{description:ne.i18n.en_US["mango-descripton"],editorTitle:ne.i18n.en_US["mango-title-editor"],additionalIndexesText:ne.i18n.en_US["mango-additional-indexes-heading"],databaseName:o,partitionKey:s}),l=re.createElement(Ab,{fetchUrl:i,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:a,docType:c,partitionKey:s}),p=re.createElement(YE,{databaseName:o,fetchUrl:i,queryDocs:a});return r&&(l=re.createElement(FE.ExplainPageContainer,{explainPlan:r}),p=null),re.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},re.createElement("div",{id:"left-content",className:"flex-body"},u),re.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},re.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},l),p))},eO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GE(e,t)}(n,e);var t=WE(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&HE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,r=e.docURL,o=e.crumbs,i=e.designDocs,a=e.fetchUrl,c=e.databaseName,s=e.queryFindCode,u=e.partitionKey,l=e.onPartitionKeySelected,p=e.onGlobalModeSelected,f=e.globalMode,d=this.props.endpoint;if(this.props.explainPlan){var m=u?encodeURIComponent(u):"";d=ee.urls("mango","explain-apiurl",encodeURIComponent(t),m)}var h=function(e){return iE(c,u,s,e)},y=ir;return n&&(h=function(e){return tE(c,e)},y=or),re.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},re.createElement($E,{docURL:r,endpoint:d,crumbs:o,databaseName:c,partitionKey:u,showPartitionKeySelector:!n,onPartitionKeySelected:l,onGlobalModeSelected:p,globalMode:f}),re.createElement(ZE,{edit:n,designDocs:i,explainPlan:this.props.explainPlan,databaseName:c,fetchUrl:a,queryDocs:h,docType:y,partitionKey:u}))}}]),n}(re.Component),tO=(0,oe.Ng)((function(e,t){var n=e.mangoQuery;return{explainPlan:n.explainPlan,queryFindCode:n.queryFindCode,partitionKey:t.partitionKey,databaseName:t.databaseName,onPartitionKeySelected:t.onPartitionKeySelected,onGlobalModeSelected:t.onGlobalModeSelected,globalMode:t.globalMode}}))(eO),nO=ee.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_partition/:partitionkey/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_index":{route:"createIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndexNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new vc.Model({id:n})},findUsingIndexNoPartition:function(e){return this.findUsingIndex(e,"")},findUsingIndex:function(e,t){var n=t?encodeURIComponent(t):"",r=ee.urls("allDocs","app",encodeURIComponent(this.databaseName),n),o=t?"/".concat(n):"",i="/"+encodeURIComponent(this.databaseName)+o+"/_find",a=[{name:e,link:r},{name:ne.i18n.en_US["mango-title-editor"]}],c=ee.urls("mango","query-apiurl",encodeURIComponent(this.databaseName),n);return re.createElement(tO,{database:e,crumbs:a,docURL:ee.constants.DOC_URLS.MANGO_SEARCH,endpoint:c,edit:!1,databaseName:this.databaseName,fetchUrl:i,partitionKey:t,onPartitionKeySelected:function(t){var n=ee.urls("mango","query-app",encodeURIComponent(e),encodeURIComponent(t));ee.navigate("#/"+n)},onGlobalModeSelected:function(){var t=ee.urls("mango","query-app",encodeURIComponent(e));ee.navigate("#/"+t)},globalMode:""===t})},createIndexNoPartition:function(e){return this.createIndex(e,"")},createIndex:function(e,t){var n=new mc.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),r=t?encodeURIComponent(t):"",o=ee.urls("allDocs","app",encodeURIComponent(this.databaseName),r),i=ee.urls("mango","index-apiurl",encodeURIComponent(this.databaseName),r),a=[{name:e,link:o},{name:ne.i18n.en_US["mango-indexeditor-title"]}];return Rc.fetchSelectedDatabaseInfo(e),re.createElement(tO,{showIncludeAllDocs:!1,crumbs:a,docURL:ee.constants.DOC_URLS.MANGO_INDEX,endpoint:i,edit:!0,designDocs:n,databaseName:this.databaseName,partitionKey:t})}});const rO={MangoIndexEditorAndQueryEditor:nO};mc.RouteObjects=[Ew.DocEditorRouteObject,gv,Sw,rO.MangoIndexEditorAndQueryEditor];const oO=mc;function iO(e){return iO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iO(e)}function aO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aO(Object(n),!0).forEach((function(t){sO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sO(e,t,n){return(t=function(e){var t=function(e){if("object"!=iO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=iO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==iO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uO={isLoading:!0,showLoadError:!1,viewIndex:void 0};const lO={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]};function pO(e){return pO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pO(e)}function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fO(Object(n),!0).forEach((function(t){mO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mO(e,t,n){return(t=function(e){var t=function(e){if("object"!=pO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hO={selector:{_id:{$gt:null}}},yO=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:Ph(t),className:"mango-select-entry"}},bO=function(){return[yO(hO)]},vO=function(){return lO.INDEX_TEMPLATES.map((function(e){var t=yO(e.code);return t.label=e.label||t.label,t}))},gO={queryFindCode:hO,queryIndexCode:{index:{fields:["_id"]},type:"json"},queryFindCodeChanged:!1,explainPlan:void 0,history:bO(),historyKey:"default",queryIndexTemplates:vO(),executionStatsSupported:!1,explainViewFormat:"parsed",isReasonsModalVisible:!1},_O=function(e,t,n){var r=e.historyKey,o=e.history.slice(),i=yO(t);i.label=n||i.label;var a=o.findIndex((function(e){return e.value===i.value}));return a>-1&&o.splice(a,1),o.unshift(i),o.length>5&&o.splice(5,1),ne.utils.localStorageSet(r,o),o};function wO(e){return wO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wO(e)}function EO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EO(Object(n),!0).forEach((function(t){SO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SO(e,t,n){return(t=function(e){var t=function(e){if("object"!=wO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DO={selectorVisible:!1};function NO(e){return NO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NO(e)}function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PO(Object(n),!0).forEach((function(t){TO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TO(e,t,n){return(t=function(e){var t=function(e){if("object"!=NO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=NO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==NO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RO,jO={doc:null,isLoading:!0,isSaving:!1,cloneDocModalVisible:!1,deleteDocModalVisible:!1,uploadModalVisible:!1,numFilesUploaded:0,uploadErrorMessage:"",uploadInProgress:!1,uploadPercentage:0,docConflictCount:0,docEditorPreferences:(RO=ne.utils.localStorageGet("fauxton:doc_editor_preferences"),CO({wordWrapEnabled:!1},RO||{}))};function AO(e){return AO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AO(e)}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kO(Object(n),!0).forEach((function(t){IO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IO(e,t,n){return(t=function(e){var t=function(e){if("object"!=AO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=AO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==AO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LO={isLoaded:!1,filters:[],changes:[],filteredChanges:[],maxChangesListed:100,showingSubset:!1,lastSequenceNum:null};function MO(e){e.showingSubset=!1;var t=0;e.filteredChanges=e.changes.filter((function(n){if(t>=e.maxChangesListed)return e.showingSubset=!0,!1;var r=JSON.stringify(n),o=e.filters.every((function(e){return new RegExp(e,"i").test(r)}));return o&&t++,o}))}function UO(e){return e||(e=""),e}function qO(e){return e?"/_partition/".concat(e):""}ee.addReducers({indexResults:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uh,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case th:var r=Ih(Ih({},t.resultsStyle),n.resultsStyle);return e=r,ne.utils.localStorageSet("fauxton:results_style",e),Ih(Ih({},t),{},{resultsStyle:r});case Ym:return Ih(Ih({},Uh),{},{executionStats:t.executionStats,warning:t.warning,noResultsWarning:t.noResultsWarning,selectedLayout:t.selectedLayout,selectedDocs:[],fetchParams:{limit:ah()+1,skip:0},pagination:kh({},Uh.pagination,{perPage:t.pagination.perPage}),queryOptionsPanel:kh({},Uh.queryOptionsPanel,t.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1,resultsStyle:t.resultsStyle});case Km:return Ih(Ih({},t),{},{isLoading:!0});case Zm:return kh({},t,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case eh:return kh({},t,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});case Qm:return Ih(Ih({},t),{},{selectedDocs:n.selectedDocs});case Fm:var o=t.selectedLayout;return n.docType===ir&&t.selectedLayout===nr&&(o=tr),Ih(Ih({},t),{},{docs:n.docs,isLoading:!1,noResultsWarning:"",isEditable:!0,fetchParams:kh({},t.fetchParams,n.params),pagination:kh({},t.pagination,{canShowNext:n.canShowNext}),docType:n.docType,selectedLayout:o,executionStats:n.executionStats,warning:n.warning});case Hm:return Ih(Ih({},t),{},{selectedLayout:n.layout});case zm:return Ih(Ih({},t),{},{tableView:kh({},t.tableView,{showAllFieldsTableView:!t.tableView.showAllFieldsTableView,cachedFieldsTableView:t.tableView.selectedFieldsTableView})});case Jm:return Ih(Ih({},t),{},{tableView:kh({},t.tableView,{selectedFieldsTableView:n.selectedFieldsTableView})});case Gm:return ne.utils.localStorageSet("fauxton:perpageredux",n.perPage),Ih(Ih({},t),{},{pagination:kh({},Uh.pagination,{perPage:n.perPage})});case Wm:return Ih(Ih({},t),{},{pagination:kh({},t.pagination,{pageStart:t.pagination.pageStart+t.pagination.perPage,currentPage:t.pagination.currentPage+1})});case Xm:return Ih(Ih({},t),{},{pagination:kh({},t.pagination,{pageStart:t.pagination.pageStart-t.pagination.perPage,currentPage:t.pagination.currentPage-1})});case $m:return n.options.includeDocs&&n.options.reduce||n.options.includeDocs&&t.queryOptionsPanel.reduce?n.options.reduce=!1:n.options.reduce&&t.queryOptionsPanel.includeDocs&&(n.options.includeDocs=!1),Ih(Ih({},t),{},{queryOptionsPanel:kh({},t.queryOptionsPanel,n.options)});default:return t}},mangoQuery:function(){var e,t,n,r,o,i,a,c,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gO,u=arguments.length>1?arguments[1]:void 0,l=u.options;switch(u.type){case Jw.MANGO_SET_DB:return dO(dO({},s),{},{database:l.database,historyKey:l.database?l.database.id:"default"});case Jw.MANGO_LOAD_QUERY_HISTORY:var p=(a=l.databaseName+"_queryhistory",(c=ne.utils.localStorageGet(a))||((c=ee.getExtensions("mango:queryHistory")[0])?c.filter((function(e){return!!e.code})).map((function(e){var t=yO(e.code);return t.label=e.label||t.label,t})):bO()));return dO(dO({},s),{},{history:p,historyKey:l.databaseName+"_queryhistory",queryFindCode:JSON.parse(p[0].value)});case Jw.MANGO_NEW_QUERY_FIND_CODE:return dO(dO({},s),{},{queryFindCode:l.queryCode,history:_O(s,l.queryCode)});case Jw.MANGO_RESET:return dO(dO({},s),{},{getLoadingIndexes:l.isLoading});case Jw.MANGO_LOAD_INDEX_TEMPLATES:var f=(i=ee.getExtensions("mango:indexTemplates")[0])?i.filter((function(e){return!!e.code})).map((function(e){var t=yO(e.code);return t.label=e.label||t.label,t})):vO();return dO(dO({},s),{},{queryIndexTemplates:f,queryIndexCode:JSON.parse(f[0].value)});case Jw.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return dO(dO({},s),{},{queryIndexCode:l.code,queryIndexTemplates:(e=s,t=l.code,n=l.label,r=e.queryIndexTemplates.slice(),o=yO(t),o.label=n||o.label,void(r.find((function(e){return e.value===o.value}))||r.push(o)))});case Jw.MANGO_SHOW_EXPLAIN_RESULTS:return dO(dO({},s),{},{explainPlan:l.explainPlan});case Jw.MANGO_HIDE_EXPLAIN_RESULTS:return dO(dO({},s),{},{explainPlan:!1});case Jw.MANGO_SET_EXECUTION_STATS_SUPPORTED:return dO(dO({},s),{},{executionStatsSupported:!0});case Jw.SET_EXPLAIN_VIEW_FORMAT:return dO(dO({},s),{},{explainViewFormat:l});case Jw.SHOW_EXPLAIN_REASONS_MODAL:return dO(dO({},s),{},{isReasonsModalVisible:!0});case Jw.HIDE_EXPLAIN_REASONS_MODAL:return dO(dO({},s),{},{isReasonsModalVisible:!1});case Jw.EXPLAIN_RESULTS_REDUX_RESET_STATE:return dO(dO({},s),{},{explainPlan:void 0,isReasonsModalVisible:!1});default:return s}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mf,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case mu:return function(e,t){var n=t.selectedNavItem,r=ff({},e);return n.designDocName&&(_.has(e.toggledSections,n.designDocName)||(r.toggledSections[n.designDocName]={visible:!0,indexGroups:{}}),r.toggledSections[n.designDocName].visible=!0,n.designDocSection&&(r.toggledSections[n.designDocName].indexGroups[n.designDocSection]=!0)),r}(e,n);case hu:return function(e,t){var n=ff(ff({},e),{},{database:t.database,designDocs:t.designDocs,designDocList:hf(t.designDocs),loading:!1});return t.selectedNavItem&&(n.selected={navItem:t.selectedNavItem,designDocName:"",designDocSection:"",indexName:""}),n}(e,n);case yu:return function(e,t,n){var r=ff({},e);if(!e.toggledSections[t])return r.toggledSections[t]={visible:!0,indexGroups:{}},r;if(n){var o=e.toggledSections[t].indexGroups[n];return _.isUndefined(o)?r.toggledSections[t].indexGroups[n]=!0:r.toggledSections[t].indexGroups[n]=!o,r}return r.toggledSections[t].visible=!e.toggledSections[t].visible,r}(e,t.designDoc,t.indexGroup);case bu:return ff(ff({},e),{},{loading:!0});case vu:return ff(ff({},e),{},{deleteIndexModalIndexName:n.indexName,deleteIndexModalDesignDocName:n.designDocName,deleteIndexModalVisible:!0,deleteIndexModalText:re.createElement("div",null,"Are you sure you want to delete the ",re.createElement("code",null,n.indexName)," ",n.indexLabel,"?"),deleteIndexModalOnSubmit:n.onDelete});case gu:return ff(ff({},e),{},{deleteIndexModalVisible:!1});case _u:return ff(ff({},e),{},{cloneIndexModalIndexLabel:n.indexLabel,cloneIndexModalTitle:n.cloneIndexModalTitle,cloneIndexModalSourceIndexName:n.sourceIndexName,cloneIndexModalSourceDesignDocName:n.sourceDesignDocName,cloneIndexModalSelectedDesignDoc:"_design/"+n.sourceDesignDocName,cloneIndexDesignDocProp:"",cloneIndexModalVisible:!0,cloneIndexModalOnSubmit:n.onSubmit});case wu:return ff(ff({},e),{},{cloneIndexModalVisible:!1});case Eu:return ff(ff({},e),{},{cloneIndexModalSelectedDesignDoc:n.value});case Ou:return ff(ff({},e),{},{cloneIndexModalNewDesignDocName:n.value});case Su:return ff(ff({},e),{},{cloneIndexModalNewDesignDocPartitioned:n.value});case Du:return ff(ff({},e),{},{cloneIndexModalNewIndexName:n.value});case Nu:return ff(ff({},e),{},{designDocs:n.designDocs,designDocList:hf(n.designDocs),loading:!1});default:return e}},revisionBrowser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tw,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case K_:var o=r.tree,i=r.doc,a=r.conflictDoc,c=r.conflictingRevs,s=r.databaseName;return Z_(Z_({},e),{},{tree:o,doc:i,conflictDoc:a,conflictingRevs:c,databaseName:s,theirs:a,ours:i});case H_:return Z_(Z_({},e),{},{theirs:r.theirs});case z_:return Z_(Z_({},e),{},{isDiffViewEnabled:r.enableDiff});case G_:return Z_(Z_({},e),{},{showConfirmModal:r.show,docToWin:r.docToWin});default:return e}},partitionKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DO;switch((arguments.length>1?arguments[1]:void 0).type){case uv:return OO(OO({},e),{},{selectorVisible:!0});case lv:return OO(OO({},e),{},{selectorVisible:!1});default:return e}},docEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jO,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case _v:return CO(CO({},jO),{},{docEditorPreferences:e.docEditorPreferences});case wv:var r=n.doc.get("_conflicts")?n.doc.get("_conflicts").length:0;return n.doc.unset("_conflicts"),CO(CO({},e),{},{isLoading:!1,doc:n.doc,docConflictCount:r});case Ev:return CO(CO({},e),{},{cloneDocModalVisible:!0});case Ov:return CO(CO({},e),{},{cloneDocModalVisible:!1});case Sv:return CO(CO({},e),{},{deleteDocModalVisible:!0});case Dv:return CO(CO({},e),{},{deleteDocModalVisible:!1});case Nv:return CO(CO({},e),{},{uploadModalVisible:!0});case Pv:return CO(CO({},e),{},{uploadModalVisible:!1});case Tv:return CO(CO({},e),{},{numFilesUploaded:e.numFilesUploaded+1});case Rv:return CO(CO({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:n.error});case Cv:return CO(CO({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:""});case jv:return CO(CO({},e),{},{uploadInProgress:!0,uploadPercentage:0,fileUploadErrorMsg:""});case Av:return CO(CO({},e),{},{uploadPercentage:n.percent});case kv:return CO(CO({},e),{},{isSaving:!0});case xv:return CO(CO({},e),{},{isSaving:!1});case Iv:var o=CO(CO({},e.docEditorPreferences),{},{wordWrapEnabled:!e.docEditorPreferences.wordWrapEnabled});return ne.utils.localStorageSet("fauxton:doc_editor_preferences",o),CO(CO({},e),{},{docEditorPreferences:o});default:return e}},changes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LO,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ad:return function(e,t,n,r){var o=xO(xO({},r?LO:e),{},{lastSequenceNum:t,isLoaded:!0}),i=0===o.changes.length;o.changes.forEach((function(e){e.isNew=!1}));var a=n.map((function(e){var t=kt(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!i}}));return o.changes=a.concat(o.changes),MO(o),o}(e,t.seqNum,t.changes,t.resetChanges);case cd:return function(e,t){var n=e.filters.slice();n.push(t);var r=xO(xO({},e),{},{filters:n});return MO(r),r}(e,t.filter);case sd:return function(e,t){var n=e.filters.slice(),r=n.indexOf(t);r>=0&&n.splice(r,1);var o=xO(xO({},e),{},{filters:n});return MO(o),o}(e,t.filter);default:return e}},designDocInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uO,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case zd.DESIGN_FETCHING:return cO(cO({},e),{},{isLoading:!0});case zd.DESIGN_FETCHING_FAILED:return cO(cO({},e),{},{isLoading:!1,showLoadError:!0});case zd.DESIGN_DOC_MONITOR:return cO(cO({},e),{},{isLoading:!1,showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});case zd.DESIGN_DOC_REFRESH:return cO(cO({},e),{},{showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});default:return e}},indexEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fl,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case bl:return Ml({},Fl);case vl:case"EDIT_NEW_INDEX":return function(e,t){var n=Ml(Ml({},e),{},{isLoading:!1,newDesignDocName:"",isNewView:t.isNewView,viewName:t.viewName||"viewName",isNewDesignDoc:t.isNewDesignDoc||!1,designDocs:t.designDocs,designDocId:t.designDocId,originalDesignDocName:t.designDocId,database:t.database});return n.originalViewName=n.viewName,n.view=function(e){return e.isNewView||e.isNewDesignDoc?{reduce:"",map:ql}:e.designDocs.find((function(t){return e.designDocId==t.id})).dDocModel().get("views")[e.viewName]}(n),n}(e,n);case Sl:return Ml(Ml({},e),{},{viewName:t.name});case gl:var r=t.reduceSelectedOption;return"NONE"===r&&(r=""),"CUSTOM"===r&&(r="function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}"),Ml(Ml({},e),{},{view:Ml(Ml({},e.view),{},{reduce:r})});case wl:return Ml(Ml({},e),{},{designDocId:n.value});case _l:case"VIEW_CREATED":return e;case Dl:return Ml(Ml({},e),{},{designDocId:t.designDoc._id});case Nl:return Ml(Ml({},e),{},{view:Ml(Ml({},e.view),{},{map:t.code})});case Pl:return Ml(Ml({},e),{},{view:Ml(Ml({},e.view),{},{reduce:t.code})});case El:return Ml(Ml({},e),{},{newDesignDocName:n.value});case Ol:return Ml(Ml({},e),{},{newDesignDocPartitioned:n.value});default:return e}}}),ee.registerUrls("allDocs",{server:function(e,t){return D.getServerUrl("/"+e+"/_all_docs"+UO(t))},app:function(e,t,n){return"database/"+e+qO(t)+"/_all_docs"+UO(n)},apiurl:function(e,t){return D.getApiUrl("/"+e+"/_all_docs"+UO(t))}}),ee.registerUrls("partitioned_allDocs",{app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_all_docs"+UO(n)},apiurl:function(e,t,n){return D.getApiUrl("/"+e+"/_partition/"+t+"/_all_docs"+UO(n))},server:function(e,t,n){return D.getServerUrl("/"+e+"/_partition/"+t+"/_all_docs"+UO(n))}}),ee.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),D.getServerUrl("/"+e+"/_all_docs"+UO(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+UO(t)},apiurl:function(e,t){return e=encodeURIComponent(e),D.getApiUrl("/"+e+"/_all_docs"+UO(t))}}),ee.registerUrls("bulk_docs",{server:function(e,t){return D.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+UO(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+UO(t)},apiurl:function(e,t){return D.getApiUrl("/"+e+"/_bulk_docs"+UO(t))}}),ee.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+encodeURIComponent(t)+"/conflicts"}}),ee.registerUrls("designDocs",{server:function(e,t){return D.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t,n){return"database/"+e+qO(t)+"/_design/"+ne.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return D.getApiUrl("/"+e+"/"+t+"/_info")}}),ee.registerUrls("view",{server:function(e,t,n,r){return D.getServerUrl("/"+e+qO(t)+"/_design/"+n+"/_view/"+r)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n,r){return D.getApiUrl("/"+e+qO(t)+"/_design/"+n+"/_view/"+r)},edit:function(e,t,n,r){return"database/"+e+qO(t)+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return"/database/"+e+qO(t)+"/"+n+"/_view/"+r},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),ee.registerUrls("partitioned_view",{server:function(e,t,n,r){return D.getServerUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)},app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"},apiurl:function(e,t,n,r){return D.getApiUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)}}),ee.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),D.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,r){return _.isUndefined(r)&&(r=""),D.getServerUrl("/"+e+"/"+t+"/"+n+r)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?D.getApiUrl("/"+e+"/"+t):D.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),ee.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/_new"},newView:function(e,t){return"/database/"+e+qO(t)+"/new_view"},addView:function(e,t,n){return"/database/"+e+qO(t)+"/new_view/"+n}}),ee.registerUrls("base",{server:function(e){return D.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),ee.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),D.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t,n){return n||(n=""),D.getApiUrl("/"+e+qO(t)+"/_index"+n)},"index-app":function(e,t,n){return n||(n=""),"database/"+e+qO(t)+"/_index"+n},"index-server-bulk-delete":function(e){return D.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t,n){return n||(n=""),D.getServerUrl("/"+e+qO(t)+"/_find"+n)},"query-apiurl":function(e,t,n){return n||(n=""),D.getApiUrl("/"+e+qO(t)+"/_find"+n)},"query-app":function(e,t,n){return n||(n=""),"database/"+e+qO(t)+"/_find"+n},"explain-server":function(e,t){return D.getServerUrl("/"+e+qO(t)+"/_explain")},"explain-apiurl":function(e,t){return D.getApiUrl("/"+e+qO(t)+"/_explain")}});const BO=oO,VO=function(){return v(D.getServerUrl("/_membership")).then((function(e){if(!e.all_nodes){var t=e.reason?e.reason:"";throw new Error("Failed to load list of nodes."+t)}var n=e.all_nodes.reduce((function(t,n){var r=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:r}),t}),[]);return e.nodes_mapped=n,e}))},FO="CLUSTER_FETCH_NODES",KO={fetchNodes:function(){var e=this;VO().then((function(t){e.updateNodes({nodes:t.nodes_mapped})})).catch((function(e){ee.addNotification({type:"error",msg:e.message,clear:!0})}))},updateNodes:function(e){ee.reduxDispatch({type:FO,options:e})},navigateToNodeBasedOnNodeCount:function(e){VO().then((function(t){var n=t.all_nodes;return 1===n.length?ee.navigate(e+n[0]):ee.navigate("/cluster/disabled",{trigger:!0})})).catch((function(e){ee.addNotification({type:"error",msg:e.message,clear:!0})}))}};function HO(e){return HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HO(e)}function zO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YO(r.key),r)}}function GO(e,t){return GO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GO(e,t)}function WO(e){var t=QO();return function(){var n,r=JO(e);if(t){var o=JO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==HO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XO(e)}(this,n)}}function XO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QO=function(){return!!e})()}function JO(e){return JO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JO(e)}function YO(e){var t=function(e){if("object"!=HO(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=HO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==HO(t)?t:t+""}var $O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GO(e,t)}(n,e);var t=WO(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){(t=YO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(XO(e=t.call.apply(t,[this].concat(o))),"getNodeType",(function(){var t=e.props.clusterState;return"cluster_finished"===t?"clustered":"single_node_enabled"===t?"single":"unknown state"})),e}return function(e,t){t&&zO(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.getNodeType();return re.createElement("div",{className:"setup-screen"},ne.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",re.createElement("br",null),re.createElement("br",null),"Do you want to ",re.createElement("a",{href:"#replication"},"replicate data"),"?")}}]),n}(re.Component);$O.propTypes={clusterState:fe().string};var ZO="SETUP_SET_CLUSTERSTATUS",eS="SETUP_SET_USERNAME",tS="SETUP_SET_PASSWORD",nS="SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",rS="SETUP_PORT_FOR_SINGLE_NODE",oS="SETUP_PORT_ADDITIONAL_NODE",iS="SETUP_BIND_ADDRESS_ADDITIONAL_NODE",aS="SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",cS="SETUP_ADD_NODE_TO_LIST",sS="SETUP_NODE_COUNT";function uS(e){return uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uS(e)}function lS(){return lS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lS.apply(null,arguments)}function pS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pS(Object(n),!0).forEach((function(t){dS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dS(e,t,n){return(t=function(e){var t=function(e){if("object"!=uS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=uS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mS={clusterState:"",username:"",password:"",setupNode:{bindAddress:"0.0.0.0",port:5984,nodeCount:3},nodeList:[],additionalNode:{bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}},hS=function(e){return fS(fS({},e),{},{setupNode:fS({},e.setupNode),additionalNode:fS({},e.additionalNode)})},yS=function(e,t,n){var r=hS(e);return c().isNaN(n)?r:c().set(r,t,n)},bS=function(e,t,n){var r=hS(e);return c().set(r,t,n)},vS=function(e){return e.additionalNode=lS({},mS.additionalNode),e},gS=function(e){return e.clusterState},_S=function(e){return e.nodeList},wS=function(){return ee.session.isAdminParty()},ES=function(e){return e.username},OS=function(e){return e.password},SS=function(e){return e.setupNode},DS=function(e){return e.setupNode.bindAddress};const NS=(0,oe.Ng)((function(e){var t=e.setup;return{clusterState:gS(t)}}))($O);function PS(e){return PS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PS(e)}function CS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IS(r.key),r)}}function TS(e,t){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},TS(e,t)}function RS(e){var t=AS();return function(){var n,r=kS(e);if(t){var o=kS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==PS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jS(e)}(this,n)}}function jS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(AS=function(){return!!e})()}function kS(e){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kS(e)}function xS(e,t,n){return(t=IS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IS(e){var t=function(e){if("object"!=PS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=PS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==PS(t)?t:t+""}var LS,MS=fi.ConfirmButton,US=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}(n,e);var t=RS(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return xS(jS(e=t.call.apply(t,[this].concat(o))),"redirectToSingleNodeSetup",(function(e){e.preventDefault(),ee.navigate("#setup/singlenode")})),xS(jS(e),"redirectToMultiNodeSetup",(function(e){e.preventDefault(),ee.navigate("#setup/multinode")})),e}return function(e,t){t&&CS(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.getClusterState()}},{key:"render",value:function(){return"cluster_finished"===this.props.clusterState||"single_node_enabled"===this.props.clusterState?re.createElement($O,this.props):re.createElement("div",{className:"setup-screen"},re.createElement("h3",{className:"header"},"Welcome to ",ne.i18n.en_US["couchdb-productname"],"!"),re.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),re.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),re.createElement("div",{className:"configure-buttons"},re.createElement(MS,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),re.createElement(MS,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,text:"Configure a Single Node"})))}}]),n}(re.Component);function qS(e){return c().isEmpty(e.username)?"Admin name is required":c().isEmpty(e.password)?"Admin password is required":e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&c().isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&c().isNaN(+e.nodeCount)?"Node count must be a number":!!(0===e.nodeCount||e.nodeCount&&e.nodeCount<1)&&"Node count must be >= 1"}US.propTypes={clusterState:fe().string};const BS=function(e){var t=e.name,n=e.password,r=e.node,o=D.getServerUrl("/_node/".concat(r,"/_config/admins/").concat(t));return E(o,n)},VS=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),O(e,"POST",n)}(D.getServerUrl("/_session"),ne.utils.queryParams(e))},FS=function(){return LS=null,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),O(e,"DELETE",n)}(D.getServerUrl("/_session"),ne.utils.queryParams({username:"_",password:"_"}))},KS=function(){if(LS)return LS;var e=D.getServerUrl("/_session"),t=v(e).then((function(e){return e.userCtx.name&&(LS=t),e.userCtx}));return t};function HS(e){return HS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HS(e)}function zS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zS(Object(n),!0).forEach((function(t){WS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WS(e,t,n){return(t=function(e){var t=function(e){if("object"!=HS(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=HS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==HS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XS(){XS=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),c=new R(r||[]);return o(a,"_invoke",{value:N(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",m="executing",h="completed",y={};function b(){}function v(){}function g(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(j([])));E&&E!==n&&r.call(E,a)&&(_=E);var O=g.prototype=b.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,i,a,c){var s=p(e[o],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==HS(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function N(t,n,r){var o=f;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=P(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?h:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(HS(t)+" is not iterable")}return v.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=u(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(D.prototype),u(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function QS(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function JS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){QS(i,r,o,a,c,"next",e)}function c(e){QS(i,r,o,a,c,"throw",e)}a(void 0)}))}}var YS=function(e,t){var n=t?" Error:"+t:"";ee.addNotification({msg:e+n,type:"error",fade:!1,clear:!0})},$S=function(e){return{type:eS,options:{value:e}}},ZS=function(e){return{type:tS,options:{value:e}}},eD=function(e){return{type:rS,options:{value:e}}},tD=function(e){return{type:nS,options:{value:e}}};const nD=(0,oe.Ng)((function(e){var t=e.setup;return{clusterState:gS(t)}}),(function(e){return{getClusterState:function(){e(function(){var e=JS(XS().mark((function e(t){var n,r;return XS().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee.urls("cluster_setup","server"),e.next=3,v(n);case 3:r=e.sent,t({type:ZO,options:{state:r.state}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(US);function rD(e){return rD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rD(e)}function oD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iD(r.key),r)}}function iD(e){var t=function(e){if("object"!=rD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=rD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rD(t)?t:t+""}function aD(e,t){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aD(e,t)}function cD(e){var t=sD();return function(){var n,r=uD(e);if(t){var o=uD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==rD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sD=function(){return!!e})()}function uD(e){return uD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uD(e)}var lD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aD(e,t)}(n,e);var t=cD(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&oD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.isAdminParty&&(e="Create Admin credentials."),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12"},re.createElement("label",null,e)),re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement(nt.A.Control,{type:"text",onChange:this.props.onAlterUsername,placeholder:"Username",value:this.props.username})),re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement(nt.A.Control,{type:"password",onChange:this.props.onAlterPassword,placeholder:"Password",value:this.props.password})))}}]),n}(re.Component);function pD(e){return pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pD(e)}function fD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gD(r.key),r)}}function dD(e,t){return dD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dD(e,t)}function mD(e){var t=yD();return function(){var n,r=bD(e);if(t){var o=bD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==pD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hD(e)}(this,n)}}function hD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yD=function(){return!!e})()}function bD(e){return bD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bD(e)}function vD(e,t,n){return(t=gD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gD(e){var t=function(e){if("object"!=pD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pD(t)?t:t+""}lD.propTypes={onAlterUsername:fe().func.isRequired,onAlterPassword:fe().func.isRequired,username:fe().string.isRequired,password:fe().string.isRequired,isAdminParty:fe().bool};var _D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dD(e,t)}(n,e);var t=mD(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return vD(hD(e=t.call.apply(t,[this].concat(o))),"handleIpChange",(function(t){e.props.onAlterBindAddress(t)})),vD(hD(e),"handlePortChange",(function(t){e.props.onAlterPort(t)})),e}return function(e,t){t&&fD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement("label",null,"Bind address the node will listen on"),re.createElement(nt.A.Control,{type:"text",value:this.props.ip,onChange:this.handleIpChange,placeholder:"IP Address"})),re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement("label",null,"Port that the node will use"),re.createElement(nt.A.Control,{type:"text",value:this.props.port,onChange:this.handlePortChange,placeholder:"IP Address"})))}}]),n}(re.Component);function wD(e){return wD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wD(e)}function ED(){return ED=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ED.apply(null,arguments)}function OD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RD(r.key),r)}}function SD(e,t){return SD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SD(e,t)}function DD(e){var t=PD();return function(){var n,r=CD(e);if(t){var o=CD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==wD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ND(e)}(this,n)}}function ND(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PD=function(){return!!e})()}function CD(e){return CD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CD(e)}function TD(e,t,n){return(t=RD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RD(e){var t=function(e){if("object"!=wD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wD(t)?t:t+""}_D.propTypes={ip:fe().string.isRequired,port:fe().number.isRequired,onAlterBindAddress:fe().func.isRequired,onAlterPort:fe().func.isRequired};var jD=fi.ConfirmButton,AD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SD(e,t)}(n,e);var t=DD(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),TD(ND(e=t.call(this)),"onChangeUsername",(function(t){return e.props.alterUsername(t.target.value)})),TD(ND(e),"onChangePassword",(function(t){return e.props.alterPassword(t.target.value)})),TD(ND(e),"onChangeBindAddress",(function(t){return e.props.alterBindAddress(t.target.value)})),TD(ND(e),"onChangePort",(function(t){return e.props.alterPort(t.target.value)})),TD(ND(e),"finishSingleNode",(function(t){t.preventDefault();var n=e.props,r={username:n.username,password:n.password},o={port:n.port,bindAddress:n.bindAddress};e.props.setupSingleNode(r,o)})),e.finishSingleNode=e.finishSingleNode.bind(ND(e)),e.onChangeUsername=e.onChangeUsername.bind(ND(e)),e.onChangePassword=e.onChangePassword.bind(ND(e)),e.onChangeBindAddress=e.onChangeBindAddress.bind(ND(e)),e.onChangePort=e.onChangePort.bind(ND(e)),e}return function(e,t){t&&OD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"setup-nodes"},re.createElement("div",{className:"setup-setupnode-section"},re.createElement(lD,ED({},this.props,{onAlterUsername:this.onChangeUsername,onAlterPassword:this.onChangePassword})),re.createElement(_D,ED({},this.props,{onAlterPort:this.onChangePort,onAlterBindAddress:this.onChangeBindAddress,ip:this.props.bindAddress,port:this.props.port})),re.createElement(jD,ED({},this.props,{onClick:this.finishSingleNode,text:"Configure Node"}))))}}]),n}(re.Component);AD.propTypes={username:fe().string.isRequired,password:fe().string.isRequired,port:fe().number.isRequired,bindAddress:fe().string.isRequired,isAdminParty:fe().bool.isRequired};const kD=(0,oe.Ng)((function(e){var t,n=e.setup;return{nodeList:_S(n),isAdminParty:wS(),setupNode:SS(n),username:ES(n),password:OS(n),port:(t=n,t.setupNode.port),bindAddress:DS(n)}}),(function(e){return{alterUsername:function(t){e($S(t))},alterPassword:function(t){e(ZS(t))},alterBindAddress:function(t){e(tD(t))},alterPort:function(t){e(eD(t))},setupSingleNode:function(t,n){e(function(e,t){return JS(XS().mark((function n(){var r,o,i,a,c,s;return XS().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=ee.urls("cluster_setup","server"),o={action:"enable_single_node",username:e.username,password:e.password,bind_address:t.bindAddress,port:t.port,singlenode:!0},!(i=qS(o))){n.next=5;break}return n.abrupt("return",YS(i));case 5:return n.prev=5,n.next=8,w(r,o,{raw:!0});case 8:if((a=n.sent).ok){n.next=15;break}return n.next=12,a.json();case 12:return c=n.sent,s=c.reason?c.reason:c.error,n.abrupt("return",YS(s));case 15:return n.next=17,VS({name:e.username,password:e.password});case 17:ee.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),ee.navigate("#setup/finish"),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),YS("The cluster has not been setuped successfully.",n.t0);case 24:case"end":return n.stop()}}),n,null,[[5,21]])})))}(t,n))}}}))(AD);function xD(e){return xD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xD(e)}function ID(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VD(r.key),r)}}function LD(e,t){return LD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},LD(e,t)}function MD(e){var t=qD();return function(){var n,r=BD(e);if(t){var o=BD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UD(e)}(this,n)}}function UD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qD=function(){return!!e})()}function BD(e){return BD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BD(e)}function VD(e){var t=function(e){if("object"!=xD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xD(t)?t:t+""}var FD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LD(e,t)}(n,e);var t=MD(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(e,t,n){(t=VD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(UD(e=t.call.apply(t,[this].concat(o))),"handleNodeCountChange",(function(t){e.props.onAlterNodeCount(t)})),e}return function(e,t){t&&ID(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement("label",null,"Number of nodes to be added to the cluster (including this one)"),re.createElement(nt.A.Control,{type:"text",value:this.props.nodeCount,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n"})))}}]),n}(re.Component);function KD(e){return KD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KD(e)}function HD(){return HD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HD.apply(null,arguments)}function zD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$D(r.key),r)}}function GD(e,t){return GD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},GD(e,t)}function WD(e){var t=QD();return function(){var n,r=JD(e);if(t){var o=JD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==KD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XD(e)}(this,n)}}function XD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(QD=function(){return!!e})()}function JD(e){return JD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JD(e)}function YD(e,t,n){return(t=$D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $D(e){var t=function(e){if("object"!=KD(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=KD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==KD(t)?t:t+""}FD.propTypes={onAlterNodeCount:fe().func.isRequired,nodeCount:fe().number.isRequired};var ZD=fi.ConfirmButton,eN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GD(e,t)}(n,e);var t=WD(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return YD(XD(e=t.call.apply(t,[this].concat(o))),"getNodeList",(function(){return e.props.nodeList.map((function(e,t){return re.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)}))})),YD(XD(e),"_addNode",(function(){var t=e.props,n=t.username,r=t.password,o=t.setupNode,i=t.additionalNode;e.props.addNode(e.isAdminParty,{username:n,password:r},o,i)})),YD(XD(e),"_alterPortAdditionalNode",(function(t){e.props.alterPortAdditionalNode(t.target.value)})),YD(XD(e),"_alterBindAddressAdditionalNode",(function(t){e.props.alterBindAddressAdditionalNode(t.target.value)})),YD(XD(e),"_alterRemoteAddressAdditionalNode",(function(t){e.props.alterRemoteAddressAdditionalNode(t.target.value)})),YD(XD(e),"_alterUsername",(function(t){e.props.alterUsername(t.target.value)})),YD(XD(e),"_alterPassword",(function(t){e.props.alterPassword(t.target.value)})),YD(XD(e),"_alterBindAddressSetupNode",(function(t){e.props.alterBindAddressForSetupNode(t.target.value)})),YD(XD(e),"_alterPortSetupNode",(function(t){e.props.alterPortForSetupNode(t.target.value)})),YD(XD(e),"_alterNodeCount",(function(t){e.props.alterNodeCount(t.target.value)})),YD(XD(e),"_finishClusterSetup",(function(){e.props.finishClusterSetup("CouchDB Cluster set up!")})),e}return function(e,t){t&&zD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.isAdminParty=wS()}},{key:"render",value:function(){var e=this.props,t=e.setupNode,n=e.additionalNode;return re.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",re.createElement("div",{className:"setup-setupnode-section"},re.createElement(lD,HD({},this.props,{onAlterUsername:this._alterUsername,onAlterPassword:this._alterPassword})),re.createElement(_D,HD({},this.props,{onAlterPort:this._alterPortSetupNode,onAlterBindAddress:this._alterBindAddressSetupNode,ip:t.bindAddress,port:t.port})),re.createElement(FD,HD({},this.props,{onAlterNodeCount:this._alterNodeCount,nodeCount:t.nodeCount}))),re.createElement("div",{className:"setup-addnode-section"},re.createElement("h2",null,"Add Nodes to the Cluster"),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement("label",null,"Remote host"),re.createElement(nt.A.Control,{type:"text",onChange:this._alterRemoteAddressAdditionalNode,placeholder:"IP Address",value:n.remoteAddress}))),re.createElement(_D,HD({},this.props,{onAlterPort:this._alterPortAdditionalNode,onAlterBindAddress:this._alterBindAddressAdditionalNode,ip:n.bindAddress,port:n.port})),re.createElement("div",{className:"row"},re.createElement("div",{className:"col12 col-md-5 col-xl-4 mb-3"},re.createElement(ZD,{onClick:this._addNode,showIcon:!1,variant:"secondary",text:"Add Node"}))),re.createElement("div",{className:"setup-nodelist"},this.getNodeList())),re.createElement("div",{className:"row"},re.createElement("div",{className:"col12 col-md-5 col-xl-4 mb-3"},re.createElement(ZD,{onClick:this._finishClusterSetup,text:"Configure Cluster"}))))}}]),n}(re.Component);eN.propTypes={username:fe().string.isRequired,password:fe().string.isRequired,nodeList:fe().array.isRequired,isAdminParty:fe().bool.isRequired,setupNode:fe().shape({bindAddress:fe().string.isRequired,port:fe().number.isRequired,nodeCount:fe().number.isRequired}).isRequired,additionalNode:fe().shape({bindAddress:fe().string.isRequired,port:fe().number.isRequired,remoteAddress:fe().string.isRequired}).isRequired};const tN=(0,oe.Ng)((function(e){var t,n=e.setup;return{nodeList:_S(n),isAdminParty:wS(),setupNode:SS(n),username:ES(n),password:OS(n),additionalNode:(t=n,t.additionalNode)}}),(function(e){return{addNode:function(t,n,r,o){e(function(e,t,n,r){return function(){var o=JS(XS().mark((function o(i){var a,c,s,u,l,p;return XS().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=ee.urls("cluster_setup","server"),c={action:"enable_cluster",username:t.username,password:t.password,bind_address:n.bindAddress,port:n.port,node_count:n.nodeCount,singlenode:!1},!(s=qS(GS({username:t.username,password:t.password},n)))){o.next=5;break}return o.abrupt("return",YS(s));case 5:if(u={action:"enable_cluster",username:t.username,password:t.password,bind_address:r.bindAddress,port:r.port,node_count:n.nodeCount,remote_node:r.remoteAddress,remote_current_user:t.username,remote_current_password:t.password},e&&(delete u.remote_current_user,delete u.remote_current_password),!(l=qS(u))){o.next=10;break}return o.abrupt("return",YS(l));case 10:return p=function(){var e=JS(XS().mark((function e(){var n,o,c,s,l,p,f;return XS().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"add_node",username:t.username,password:t.password,host:r.remoteAddress,port:r.port,singlenode:!1},e.next=3,w(a,u,{raw:!0});case 3:if((o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:return c=e.sent,s=c.reason?c.reason:c.error,e.abrupt("return",YS(s));case 10:return e.next=12,w(a,n,{raw:!0});case 12:if((l=e.sent).ok){e.next=19;break}return e.next=16,l.json();case 16:return p=e.sent,f=p.reason?p.reason:p.error,e.abrupt("return",YS(f));case 19:i({type:cS,options:{value:{port:r.port,remoteAddress:r.remoteAddress}}}),ee.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.prev=11,o.next=14,w(a,c,{raw:!0});case 14:return o.next=16,VS({name:t.username,password:t.password});case 16:return o.next=18,p();case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(11),YS("An error occured while adding the node.",o.t0);case 23:case"end":return o.stop()}}),o,null,[[11,20]])})));return function(e){return o.apply(this,arguments)}}()}(t,n,r,o))},alterPortAdditionalNode:function(t){e({type:oS,options:{value:t}})},alterBindAddressAdditionalNode:function(t){e({type:iS,options:{value:t}})},alterRemoteAddressAdditionalNode:function(t){e({type:aS,options:{value:t}})},alterUsername:function(t){e($S(t))},alterPassword:function(t){e(ZS(t))},alterBindAddressForSetupNode:function(t){e(tD(t))},alterPortForSetupNode:function(t){e(eD(t))},finishClusterSetup:function(t){var n;e((n=t,JS(XS().mark((function e(){var t,r,o,i;return XS().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ee.urls("cluster_setup","server"),r={action:"finish_cluster"},e.prev=2,e.next=5,w(t,r,{raw:!0});case 5:if(!(o=e.sent).ok){e.next=11;break}ee.addNotification({msg:n,type:"success",fade:!1,clear:!0}),ee.navigate("#setup/finish"),e.next=15;break;case 11:return e.next=13,o.json();case 13:i=e.sent,YS("The cluster is already finished",i.reason);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),YS("There was an error. Please check your setup and try again.",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))))},alterNodeCount:function(t){e({type:sS,options:{value:t}})}}}))(eN);var nN=ee.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=ee.urls("cluster_setup","apiurl");return KO.fetchNodes(),re.createElement(Jc,{component:re.createElement(nD,null),endpoint:e,docURL:ee.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ne.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=ee.urls("cluster_setup","apiurl");return KO.fetchNodes(),re.createElement(Jc,{component:re.createElement(kD,null),endpoint:e,docURL:ee.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ne.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=ee.urls("cluster_setup","apiurl");return KO.fetchNodes(),re.createElement(Jc,{component:re.createElement(tN,null),endpoint:e,docURL:ee.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ne.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=ee.urls("cluster_setup","apiurl");return re.createElement(Jc,{component:re.createElement(NS,null),endpoint:e,docURL:ee.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ne.i18n.en_US["couchdb-productname"]}]})}});const rN={RouteObjects:[nN],initialize:function(){ee.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})}};ee.addReducers({setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mS,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case ZO:return bS(e,"clusterState",n.state);case eS:return bS(e,"username",n.value);case tS:return bS(e,"password",n.value);case nS:return bS(e,"setupNode.bindAddress",n.value);case rS:return yS(e,"setupNode.port",parseInt(n.value));case oS:return yS(e,"additionalNode.port",parseInt(n.value));case iS:return bS(e,"additionalNode.bindAddress",n.value);case aS:return bS(e,"additionalNode.remoteAddress",n.value);case cS:var r=hS(e);return r.nodeList.push(n.value),vS(r),r;case"SETUP_RESET_ADDITIONAL_NODE":return vS(hS(e));case sS:return yS(e,"setupNode.nodeCount",parseInt(n.value));default:return e}}}),ee.registerUrls("cluster_setup",{server:function(){return ne.host+"/_cluster_setup"},app:function(){return"/_cluster_setup"},apiurl:function(){return window.location.origin+"/_cluster_setup"}});const oN=rN;function iN(e){return iN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iN(e)}function aN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yN(r.key),r)}}function sN(e,t,n){return t&&cN(e.prototype,t),n&&cN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uN(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lN(e,t)}function lN(e,t){return lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lN(e,t)}function pN(e){var t=dN();return function(){var n,r=mN(e);if(t){var o=mN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==iN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fN(e)}(this,n)}}function fN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dN=function(){return!!e})()}function mN(e){return mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mN(e)}function hN(e,t,n){return(t=yN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yN(e){var t=function(e){if("object"!=iN(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=iN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==iN(t)?t:t+""}var bN=fi.TabElement,vN=fi.TabElementWrapper,gN=function(e){uN(n,e);var t=pN(n);function n(){var e;aN(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return hN(fN(e=t.call.apply(t,[this].concat(o))),"checked",(function(t){return e.props.selectedRadio===t})),hN(fN(e),"onRadioClick",(function(t){var n=t.target.value;e.props.onRadioClick(n)})),hN(fN(e),"createFilterTabs",(function(){return e.props.radioNames.map((function(t,n){var r=e.checked(t);return re.createElement(bN,{key:n,selected:r,text:t,onChange:e.onRadioClick})}))})),e}return sN(n,[{key:"render",value:function(){var e=this.createFilterTabs();return re.createElement(vN,null,e)}}]),n}(re.Component);hN(gN,"defaultProps",{radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]});var _N=function(e){uN(n,e);var t=pN(n);function n(){var e;aN(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return hN(fN(e=t.call.apply(t,[this].concat(o))),"searchTermChange",(function(t){var n=t.target.value;e.props.onSearch(n)})),e}return sN(n,[{key:"render",value:function(){return re.createElement(md.A,{id:"replication-filter-group"},re.createElement(md.A.Text,null,re.createElement("i",{className:"fonticon-filter"})),re.createElement(nt.A.Control,{id:"active-tasks-search-box",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange}))}}]),n}(re.Component);function wN(e){return wN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wN(e)}function EN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TN(r.key),r)}}function ON(e,t){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ON(e,t)}function SN(e){var t=NN();return function(){var n,r=PN(e);if(t){var o=PN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==wN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return DN(e)}(this,n)}}function DN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NN=function(){return!!e})()}function PN(e){return PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PN(e)}function CN(e,t,n){return(t=TN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TN(e){var t=function(e){if("object"!=wN(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wN(t)?t:t+""}var RN=function(e){return[ne.helpers.formatDate(e),ne.helpers.getDateFromNow(e)]},jN=function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},AN=function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),_.has(e,"process_status")&&"waiting"!=e.process_status&&t.push("Process Status: "+e.process_status),t},kN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ON(e,t)}(n,e);var t=SN(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return CN(DN(e=t.call.apply(t,[this].concat(o))),"getInfo",(function(e){return{type:e.type,objectField:jN(e),started_on:RN(e.started_on),updated_on:RN(e.updated_on),node:e.node,pid:e.pid.replace(/[<>]/g,""),progress:AN(e),process_status:e.process_status}})),CN(DN(e),"multilineMessage",(function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map((function(e,t){return re.createElement("p",{key:t,className:n},e)}))})),e}return function(e,t){t&&EN(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=re.createElement("td",null,e.type),n=re.createElement("td",null,this.multilineMessage(e.objectField,"to-from-database")),r=re.createElement("td",null,this.multilineMessage(e.started_on,"time")),o=re.createElement("td",null,this.multilineMessage(e.updated_on,"time")),i=re.createElement("td",null,e.node),a=re.createElement("td",null,e.pid),c=re.createElement("td",null,this.multilineMessage(e.progress));return re.createElement("tr",null,-1!==this.props.hiddenColumns.indexOf("type")?null:t,-1!==this.props.hiddenColumns.indexOf("database")?null:n,-1!==this.props.hiddenColumns.indexOf("started-on")?null:r,-1!==this.props.hiddenColumns.indexOf("updated-on")?null:o,-1!==this.props.hiddenColumns.indexOf("node")?null:i,-1!==this.props.hiddenColumns.indexOf("pid")?null:a,-1!==this.props.hiddenColumns.indexOf("progress")?null:c)}}]),n}(re.Component);function xN(e){return xN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xN(e)}function IN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FN(r.key),r)}}function LN(e,t){return LN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},LN(e,t)}function MN(e){var t=qN();return function(){var n,r=BN(e);if(t){var o=BN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UN(e)}(this,n)}}function UN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qN=function(){return!!e})()}function BN(e){return BN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BN(e)}function VN(e,t,n){return(t=FN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FN(e){var t=function(e){if("object"!=xN(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xN(t)?t:t+""}CN(kN,"defaultProps",{hiddenColumns:[]});var KN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LN(e,t)}(n,e);var t=MN(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return VN(UN(e=t.call.apply(t,[this].concat(o))),"createRows",(function(){var t=""===e.props.searchTerm.trim();return 0===e.props.tasks.length||e.props.isLoading?t?e.noActiveTasks():e.noActiveTasksMatchFilter():e.props.tasks.map((function(t,n){return re.createElement(kN,{key:n,item:t,hiddenColumns:e.props.hiddenColumns})}))})),VN(UN(e),"getType",(function(){var t=e.props.selectedRadio;return"All Tasks"===t?"":t})),VN(UN(e),"noActiveTasks",(function(){var t=e.getType(),n=7-e.props.hiddenColumns.length,r=re.createElement("td",{colSpan:n},"No active ",t," tasks.");return e.props.isLoading&&(r=re.createElement("td",{colSpan:n},"Loading tasks.")),re.createElement("tr",{className:"no-matching-database-on-search"},r)})),VN(UN(e),"noActiveTasksMatchFilter",(function(){var t=e.getType();return re.createElement("tr",{className:"no-matching-database-on-search"},re.createElement("td",{colSpan:"6"},"No active ",t,' tasks match with filter: "',e.props.searchTerm,'"'))})),e}return function(e,t){t&&IN(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}]),n}(re.Component);function HN(e){return HN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HN(e)}function zN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tP(r.key),r)}}function WN(e,t,n){return t&&GN(e.prototype,t),n&&GN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function XN(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QN(e,t)}function QN(e,t){return QN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QN(e,t)}function JN(e){var t=$N();return function(){var n,r=ZN(e);if(t){var o=ZN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==HN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return YN(e)}(this,n)}}function YN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($N=function(){return!!e})()}function ZN(e){return ZN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZN(e)}function eP(e,t,n){return(t=tP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tP(e){var t=function(e){if("object"!=HN(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=HN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==HN(t)?t:t+""}var nP=function(e){XN(n,e);var t=JN(n);function n(e){var r;return zN(this,n),eP(YN(r=t.call(this,e)),"arrow",(function(){var e=r.props.sortByHeader,t=r.props.headerName,n=r.props.headerIsAscending?"fonticon fonticon-up-dir":"fonticon fonticon-down-dir";if(e===t)return re.createElement("i",{className:n})})),eP(YN(r),"onTableHeaderClick",(function(){r.props.onTableHeaderClick(r.props.headerName)})),r.onTableHeaderClick=r.onTableHeaderClick.bind(YN(r)),r}return WN(n,[{key:"render",value:function(){return re.createElement("th",{className:"header-".concat(this.props.headerName),onClick:this.onTableHeaderClick},this.props.displayName," ",this.arrow())}}]),n}(re.Component),rP=function(e){XN(n,e);var t=JN(n);function n(){var e;zN(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return eP(YN(e=t.call.apply(t,[this].concat(o))),"createTableHeadingFields",(function(){var t=e.props,n=t.onTableHeaderClick,r=t.sortByHeader,o=t.headerIsAscending;return e.props.headerNames.filter((function(t){return!(-1!==e.props.hiddenColumns.indexOf(t[0]))})).map((function(e){return re.createElement(nP,{headerName:e[0],displayName:e[1],key:e[0],onTableHeaderClick:n,sortByHeader:r,headerIsAscending:o})}))})),e}return WN(n,[{key:"render",value:function(){return re.createElement("thead",null,re.createElement("tr",null,this.createTableHeadingFields()))}}]),n}(re.Component);function oP(e){return oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oP(e)}function iP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aP(r.key),r)}}function aP(e){var t=function(e){if("object"!=oP(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=oP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oP(t)?t:t+""}function cP(e,t){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cP(e,t)}function sP(e){var t=uP();return function(){var n,r=lP(e);if(t){var o=lP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==oP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function uP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uP=function(){return!!e})()}function lP(e){return lP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lP(e)}eP(rP,"defaultProps",{headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["node","Node"],["pid","PID"],["progress","Status"]],hiddenColumns:[]});var pP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}(n,e);var t=sP(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&iP(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.selectedRadio,r=e.searchTerm,o=e.sortByHeader,i=e.onTableHeaderClick,a=e.headerIsAscending,c=e.isLoading,s=e.hiddenColumns;return re.createElement("div",{id:"dashboard-lower-content"},re.createElement(kw.A,{striped:!0,className:"table-active-tasks"},re.createElement(rP,{onTableHeaderClick:i,sortByHeader:o,headerIsAscending:a,hiddenColumns:s}),re.createElement(KN,{tasks:t,selectedRadio:n,isLoading:c,searchTerm:r,hiddenColumns:s})))}}]),n}(re.Component);function fP(e){return fP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fP(e)}function dP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_P(r.key),r)}}function mP(e,t){return mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mP(e,t)}function hP(e){var t=bP();return function(){var n,r=vP(e);if(t){var o=vP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==fP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yP(e)}(this,n)}}function yP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bP=function(){return!!e})()}function vP(e){return vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vP(e)}function gP(e,t,n){return(t=_P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _P(e){var t=function(e){if("object"!=fP(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fP(t)?t:t+""}var wP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mP(e,t)}(n,e);var t=hP(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gP(yP(e=t.call.apply(t,[this].concat(o))),"setNewSearchTerm",(function(t){e.props.setSearchTerm(t)})),gP(yP(e),"switchTab",(function(t){e.props.switchTab(t)})),gP(yP(e),"tableHeaderOnClick",(function(t){e.props.sortByColumnHeader(t)})),e}return function(e,t){t&&dP(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.tasks,r=e.searchTerm,o=e.selectedRadio,i=e.sortByHeader,a=e.headerIsAscending,c=e.hiddenColumns,s=this.setNewSearchTerm,u=this.tableHeaderOnClick;return re.createElement("div",{id:"active-tasks-page",className:"scrollable"},re.createElement("div",{className:"inner"},re.createElement(gN,{searchTerm:r,selectedRadio:o,onRadioClick:this.switchTab}),re.createElement("div",{className:"row"},re.createElement("div",{id:"active-tasks-search",className:"col-12 col-md-6"},re.createElement(_N,{onSearch:s}))),re.createElement(pP,{isLoading:t,tasks:n,searchTerm:r,selectedRadio:o,onTableHeaderClick:u,sortByHeader:i,headerIsAscending:a,hiddenColumns:c})))}}]),n}(re.Component);function EP(e){return EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(e)}function OP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RP(r.key),r)}}function SP(e,t){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SP(e,t)}function DP(e){var t=PP();return function(){var n,r=CP(e);if(t){var o=CP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==EP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NP(e)}(this,n)}}function NP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PP=function(){return!!e})()}function CP(e){return CP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CP(e)}function TP(e,t,n){return(t=RP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RP(e){var t=function(e){if("object"!=EP(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=EP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==EP(t)?t:t+""}var jP=fi.Polling,AP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t)}(n,e);var t=DP(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return TP(NP(e=t.call.apply(t,[this].concat(o))),"runPollingUpdate",(function(){e.props.runPollingUpdate()})),TP(NP(e),"getPluralForLabel",(function(){return"1"===e.state.pollingInterval?"":"s"})),e}return function(e,t){t&&OP(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",null,re.createElement(jP,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}]),n}(re.Component),kP=[{name:"Active Tasks"}];const xP={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION",ACTIVE_TASKS_SET_HIDDEN_COLUMNS:"ACTIVE_TASKS_SET_HIDDEN_COLUMNS"},IP=function(){return v(D.getServerUrl("/_active_tasks")).then((function(e){if(e.error)throw new Error(e.reason);return e}))};var LP=function(e){return{type:xP.ACTIVE_TASKS_SET_IS_LOADING,options:e}},MP=function(e){return{type:xP.ACTIVE_TASKS_FETCH_AND_SET,options:e}};function UP(e){return UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UP(e)}function qP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qP(Object(n),!0).forEach((function(t){VP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VP(e,t,n){return(t=function(e){var t=function(e){if("object"!=UP(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=UP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==UP(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FP={isLoading:!1,sortByHeader:"started-on",headerIsAscending:!0,selectedRadio:"All Tasks",searchTerm:"",tasks:[],filteredTasks:[],hiddenColumns:[]},KP=function(e,t,n,r,o){var i=r.filter((function(n){return function(e,t){var n=t.toLowerCase().replace(" ","_");return e.type===n||"all_tasks"===n}(n,t)&&function(e,t){var n=new RegExp(t,"g"),r="";return(0,a.has)(e,"database")&&(r+=e.database),(0,a.has)(e,"source")&&(r+=e.source),(0,a.has)(e,"target")&&(r+=e.target),n.test(r)}(n,e)}));return function(e,t,n){var r=(0,a.sortBy)(t,(function(t){var n=e;return(0,a.isUndefined)(t[n])&&(n="source"),t[n]}));return n?r:r.reverse()}(n,i,o)},HP=function(e){return e.headerIsAscending},zP=function(e){return e.isLoading},GP=function(e){return e.selectedRadio},WP=function(e){return e.sortByHeader},XP=function(e){return e.searchTerm},QP=function(e){return e.hiddenColumns};const JP=(0,oe.Ng)((function(e){var t,n=e.activetasks;return{tasks:(t=n,t.filteredTasks),headerIsAscending:HP(n),selectedRadio:GP(n),sortByHeader:WP(n),searchTerm:XP(n),isLoading:zP(n),hiddenColumns:QP(n)}}),(function(e){return{init:function(){return e((function(e){e(LP(!0)),IP().then((function(t){e(LP(!1)),e(MP(t))})).catch((function(e){ee.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))},setSearchTerm:function(t){return e({type:xP.ACTIVE_TASKS_SET_SEARCH_TERM,options:t})},sortByColumnHeader:function(t){return e({type:xP.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:t})},switchTab:function(t){return e(function(e){return{type:xP.ACTIVE_TASKS_SWITCH_TAB,options:e}}(t))},runPollingUpdate:function(){return e((function(e){IP().then((function(t){e(MP(t))})).catch((function(e){ee.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))}}}))((function(e){return re.createElement(Gc,null,re.createElement(Wc,{crumbs:kP,docURL:ee.constants.DOC_URLS.ACTIVE_TASKS,endpoint:D.getApiUrl("/_active_tasks")},re.createElement(AP,e)),re.createElement(Xc,null,re.createElement(wP,e)))})),YP={RouteObjects:[ee.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return re.createElement(JP,null)}})],initialize:function(){ee.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})}};ee.addReducers({activetasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FP,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case xP.ACTIVE_TASKS_FETCH_AND_SET:return BP(BP({},e),{},{tasks:r,filteredTasks:KP(e.searchTerm,e.selectedRadio,e.sortByHeader,r,e.headerIsAscending)});case xP.ACTIVE_TASKS_SWITCH_TAB:var o=KP(e.searchTerm,r,e.sortByHeader,e.tasks,a);return BP(BP({},e),{},{selectedRadio:r,filteredTasks:o});case xP.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL:return BP(BP({},e),{},{pollingIntervalSeconds:r});case xP.ACTIVE_TASKS_SET_SEARCH_TERM:return function(e,t){var n=KP(t,e.selectedRadio,e.sortbyHeader,e.tasks,e.headerIsAscending);return BP(BP({},e),{},{filteredTasks:n,searchTerm:t})}(e,r);case xP.ACTIVE_TASKS_SET_HIDDEN_COLUMNS:return BP(BP({},e),{},{hiddenColumns:r});case xP.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:var i=r,a=function(e,t,n){return e!==t||!n}(e.sortByHeader,i,e.headerIsAscending),c=KP(e.searchTerm,e.selectedRadio,i,e.tasks,a);return BP(BP({},e),{},{sortByHeader:i,headerIsAscending:a,filteredTasks:c});case xP.ACTIVE_TASKS_SET_IS_LOADING:return BP(BP({},e),{},{isLoading:r})}return e}});const $P=YP;function ZP(e){return ZP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZP(e)}function eC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tC(r.key),r)}}function tC(e){var t=function(e){if("object"!=ZP(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ZP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ZP(t)?t:t+""}function nC(e,t){return nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nC(e,t)}function rC(e){var t=oC();return function(){var n,r=iC(e);if(t){var o=iC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ZP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oC=function(){return!!e})()}function iC(e){return iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iC(e)}var aC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nC(e,t)}(n,e);var t=rC(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&eC(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",{className:"config-warning-cluster-wrapper"},re.createElement("div",{className:"config-warning-cluster-container"},re.createElement("div",null,re.createElement("div",{className:"config-warning-icon-container float-start"},re.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.props.nodes.length," nodes. For CouchDB 2.0 or greater we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",re.createElement("br",null),re.createElement("br",null),re.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}]),n}(re.Component);const cC=(0,oe.Ng)((function(e){return{nodes:e.clusters.nodes}}),null)(aC),sC={RouteObjects:[ee.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},showDisabledFeatureScreen:function(){return KO.fetchNodes(),re.createElement(Jc,{component:re.createElement(cC,null),endpoint:D.getServerUrl("/_membership"),docURL:ee.constants.DOC_URLS.MEMBERSHIP,crumbs:[{name:"Config disabled"}]})}})]};function uC(e){return uC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uC(e)}function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lC(Object(n),!0).forEach((function(t){fC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fC(e,t,n){return(t=function(e){var t=function(e){if("object"!=uC(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=uC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dC={nodes:[]};sC.initialize=function(){},ee.addReducers({clusters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dC,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;return n===FO?pC(pC({},e),{},{nodes:r.nodes}):e}});const mC=sC;var hC=function(e){return D.getServerUrl("/_node/"+e+"/_config")},yC=function(e,t,n){var r="/_node/"+e+"/_config/"+encodeURIComponent(t)+"/"+encodeURIComponent(n);return D.getServerUrl(r)},bC=function(e,t,n,r){var o=yC(e,t,n);return E(o,r).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))};const vC="EDIT_CONFIG",gC="LOADING_CONFIG",_C="EDIT_OPTION",wC="CANCEL_EDIT",EC="SAVING_OPTION",OC="OPTION_SAVE_SUCCESS",SC="OPTION_SAVE_FAILURE",DC="OPTION_DELETE_SUCCESS",NC="OPTION_ADD_SUCCESS",PC="OPTION_ADD_FAILURE";var CC=function(e,t){t({type:DC,options:e}),ee.addNotification({msg:"Option ".concat(e.optionName," deleted"),type:"success"})},TC=function(e,t,n){n({type:"OPTION_DELETE_FAILURE",options:e}),ee.addNotification({msg:"Option delete failed: ".concat(t),type:"error"})};function RC(e){return RC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RC(e)}function jC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LC(r.key),r)}}function AC(e,t){return AC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},AC(e,t)}function kC(e){var t=xC();return function(){var n,r=IC(e);if(t){var o=IC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==RC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xC=function(){return!!e})()}function IC(e){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IC(e)}function LC(e){var t=function(e){if("object"!=RC(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=RC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==RC(t)?t:t+""}var MC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AC(e,t)}(n,e);var t=kC(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state=r.getInitialState(),r}return function(e,t){t&&jC(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return re.createElement(tt.A,{className:"tray",id:"add-option-popover"},re.createElement(tt.A.Header,{as:"h3"},"Add Option"),re.createElement(tt.A.Body,null,re.createElement(nt.A.Control,{type:"text",className:"mb-3",onChange:this.updateSectionName.bind(this),name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),re.createElement(nt.A.Control,{type:"text",className:"mb-3",onChange:this.updateOptionName.bind(this),name:"name",placeholder:"Name"}),re.createElement(nt.A.Control,{type:"text",className:"mb-3",onChange:this.updateValue.bind(this),name:"value",placeholder:"Value"}),re.createElement("div",{className:"col12 text-end"},re.createElement(de.A,{id:"add-option-btn-create",variant:"cf-primary",onClick:this.onAdd.bind(this)},"Create"))))}},{key:"render",value:function(){var e=this;return re.createElement("div",{className:"row mb-3"},re.createElement("div",{className:"col-12 text-end"},re.createElement(de.A,{id:"add-option-button",variant:"cf-primary",className:"col-12 col-md-auto",onClick:this.togglePopover.bind(this),ref:function(t){return e.target=t}},re.createElement("i",{className:"fonticon-plus"}),"Add Option"),re.createElement(Gr.A,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom-end",rootClose:!0,target:function(){return e.target}},this.getPopover())))}}]),n}(re.Component);!function(e,t,n){(t=LC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(MC,"propTypes",{onAdd:fe().func.isRequired});const UC=(0,oe.Ng)((function(){return{}}),(function(e,t){return{onAdd:function(n){e(function(e,t){return function(n){n({type:"ADDING_OPTION"});var r=t.sectionName,o=t.optionName,i=t.value;return bC(e,r,o,i).then((function(){return function(e,t){t({type:NC,options:e}),ee.addNotification({msg:"Option ".concat(e.optionName," added"),type:"success"})}(t,n)})).catch((function(e){return function(e,t,n){n({type:PC,options:e}),ee.addNotification({msg:"Option add failed: ".concat(t),type:"error"})}(t,e.message,n)}))}}(t.node,n))}}}))(MC);function qC(e){return qC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qC(e)}function BC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WC(r.key),r)}}function VC(e,t){return VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},VC(e,t)}function FC(e){var t=HC();return function(){var n,r=zC(e);if(t){var o=zC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==qC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KC(e)}(this,n)}}function KC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(HC=function(){return!!e})()}function zC(e){return zC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zC(e)}function GC(e,t,n){return(t=WC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WC(e){var t=function(e){if("object"!=qC(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=qC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qC(t)?t:t+""}var XC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VC(e,t)}(n,e);var t=FC(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return GC(KC(e=t.call.apply(t,[this].concat(o))),"state",{value:e.props.value}),GC(KC(e),"onChange",(function(t){e.setState({value:t.target.value})})),GC(KC(e),"onSave",(function(){e.state.value!==e.props.value?e.props.onSave(e.state.value):e.props.onCancelEdit()})),GC(KC(e),"getButtons",(function(){return e.props.saving?null:re.createElement("span",null,re.createElement(de.A,{variant:"cf-primary",className:"fonticon-ok-circled btn-config-save",onClick:e.onSave.bind(KC(e))}),re.createElement(de.A,{variant:"cf-secondary",className:"fonticon-cancel-circled btn-config-cancel",onClick:e.props.onCancelEdit}))})),e}return function(e,t){t&&BC(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return this.props.editing?re.createElement("td",null,re.createElement("div",{className:"row g-2"},re.createElement("div",{className:"col"},re.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.props.saving,autoFocus:!0,type:"text",className:"form-control"})),re.createElement("div",{className:"col-auto"},this.getButtons()))):re.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}]),n}(re.Component);function QC(e){return QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QC(e)}function JC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rT(r.key),r)}}function YC(e,t){return YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},YC(e,t)}function $C(e){var t=eT();return function(){var n,r=tT(e);if(t){var o=tT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==QC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ZC(e)}(this,n)}}function ZC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eT=function(){return!!e})()}function tT(e){return tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tT(e)}function nT(e,t,n){return(t=rT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rT(e){var t=function(e){if("object"!=QC(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=QC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==QC(t)?t:t+""}GC(XC,"propTypes",{value:fe().string.isRequired,editing:fe().bool.isRequired,onEdit:fe().func.isRequired,onCancelEdit:fe().func.isRequired,onSave:fe().func.isRequired});var oT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t)}(n,e);var t=$C(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),nT(ZC(r=t.call(this,e)),"onDelete",(function(){r.props.onDelete()})),nT(ZC(r),"showModal",(function(){r.setState({show:!0})})),nT(ZC(r),"hideModal",(function(){r.setState({show:!1})})),r.onDelete=r.onDelete.bind(ZC(r)),r.showModal=r.showModal.bind(ZC(r)),r.hideModal=r.hideModal.bind(ZC(r)),r.state={show:!1},r}return function(e,t){t&&JC(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("td",{className:"text-center config-item-trash config-delete-value"},re.createElement(Ss.ConfirmationModal,{title:"Confirm Deletion",text:"Are you sure you want to delete ".concat(this.props.sectionName,"/").concat(this.props.optionName,"?"),onClose:this.hideModal,onSubmit:this.onDelete,visible:this.state.show}),re.createElement(fi.ToolbarButton,{icon:"fonticon-trash",onClick:this.showModal}))}}]),n}(re.Component);function iT(e){return iT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(e)}function aT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dT(r.key),r)}}function cT(e,t){return cT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cT(e,t)}function sT(e){var t=lT();return function(){var n,r=pT(e);if(t){var o=pT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==iT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uT(e)}(this,n)}}function uT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lT=function(){return!!e})()}function pT(e){return pT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pT(e)}function fT(e,t,n){return(t=dT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dT(e){var t=function(e){if("object"!=iT(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=iT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==iT(t)?t:t+""}nT(oT,"propTypes",{sectionName:fe().string.isRequired,optionName:fe().string.isRequired,onDelete:fe().func.isRequired});var mT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cT(e,t)}(n,e);var t=sT(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return fT(uT(e=t.call.apply(t,[this].concat(o))),"onSave",(function(t){var n=e.props.option;n.value=t,e.props.onSave(n)})),fT(uT(e),"onDelete",(function(){e.props.onDelete(e.props.option)})),fT(uT(e),"onEdit",(function(){e.props.onEdit(e.props.option)})),e}return function(e,t){t&&aT(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("tr",{className:"config-item"},re.createElement("th",null,this.props.option.header&&this.props.option.sectionName),re.createElement("td",null,this.props.option.optionName),re.createElement(XC,{value:this.props.option.value,editing:this.props.option.editing,saving:this.props.saving,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),re.createElement(oT,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}]),n}(re.Component);function hT(e){return hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hT(e)}function yT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OT(r.key),r)}}function bT(e,t){return bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bT(e,t)}function vT(e){var t=_T();return function(){var n,r=wT(e);if(t){var o=wT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==hT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gT(e)}(this,n)}}function gT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_T=function(){return!!e})()}function wT(e){return wT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wT(e)}function ET(e,t,n){return(t=OT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OT(e){var t=function(e){if("object"!=hT(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=hT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==hT(t)?t:t+""}fT(mT,"propTypes",{option:fe().object.isRequired,saving:fe().bool.isRequired,onSave:fe().func.isRequired,onDelete:fe().func.isRequired,onEdit:fe().func.isRequired,onCancelEdit:fe().func.isRequired});var ST=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bT(e,t)}(n,e);var t=vT(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ET(gT(e=t.call.apply(t,[this].concat(o))),"createOptions",(function(){return _.map(e.props.options,(function(t){return re.createElement(mT,{option:t,saving:e.props.saving,onDelete:e.props.onDeleteOption,onSave:e.props.onSaveOption,onEdit:e.props.onEditOption,onCancelEdit:e.props.onCancelEdit,key:"".concat(t.sectionName,"/").concat(t.optionName)})}))})),e}return function(e,t){t&&yT(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.createOptions();return re.createElement(kw.A,{striped:!0},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",{id:"config-section",width:"22%"},"Section"),re.createElement("th",{id:"config-option",width:"22%"},"Option"),re.createElement("th",{id:"config-value"},"Value"),re.createElement("th",{id:"config-trash"}))),re.createElement("tbody",null,e))}}]),n}(re.Component);function DT(e){return DT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DT(e)}function NT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kT(r.key),r)}}function PT(e,t){return PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},PT(e,t)}function CT(e){var t=RT();return function(){var n,r=jT(e);if(t){var o=jT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==DT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return TT(e)}(this,n)}}function TT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(RT=function(){return!!e})()}function jT(e){return jT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jT(e)}function AT(e,t,n){return(t=kT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kT(e){var t=function(e){if("object"!=DT(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=DT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==DT(t)?t:t+""}ET(ST,"propTypes",{options:fe().arrayOf(fe().shape({editing:fe().bool.isRequired,header:fe().bool,optionName:fe().string.isRequired,sectionName:fe().string.isRequired,value:fe().string})).isRequired,saving:fe().bool.isRequired,onDeleteOption:fe().func.isRequired,onEditOption:fe().func.isRequired,onSaveOption:fe().func.isRequired,onCancelEdit:fe().func.isRequired});var xT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PT(e,t)}(n,e);var t=CT(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),AT(TT(r=t.call(this,e)),"saveOption",(function(e){r.props.saveOption(r.props.node,e)})),AT(TT(r),"deleteOption",(function(e){r.props.deleteOption(r.props.node,e)})),AT(TT(r),"editOption",(function(e){r.props.editOption(e)})),AT(TT(r),"cancelEdit",(function(){r.props.cancelEdit()})),r.props.fetchAndEditConfig(r.props.node),r}return function(e,t){t&&NT(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return this.props.loading?re.createElement("div",{className:"view"},re.createElement(fi.LoadLines,null)):re.createElement(re.Fragment,null,re.createElement(UC,{node:this.props.node}),re.createElement(ST,{saving:this.props.saving,onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.props.options}))}}]),n}(re.Component);function IT(e){return IT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IT(e)}function LT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LT(Object(n),!0).forEach((function(t){UT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UT(e,t,n){return(t=function(e){var t=function(e){if("object"!=IT(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=IT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==IT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}AT(xT,"propTypes",{options:fe().array.isRequired,loading:fe().bool.isRequired,saving:fe().bool.isRequired,saveOption:fe().func.isRequired,deleteOption:fe().func.isRequired,editOption:fe().func.isRequired,cancelEdit:fe().func.isRequired,fetchAndEditConfig:fe().func.isRequired});var qT={sections:{},loading:!0,editSectionName:null,editOptionName:null,saving:!1};function BT(e,t){var n=t.sectionName,r=t.optionName,o=t.value,i=MT({},e.sections);return i[n]||(i[n]={}),i[n][r]=o||!0,i}function VT(e,t){var n=t.sectionName,r=t.optionName,o=MT({},e.sections);return o[n]&&(o[n]=MT({},o[n]),delete o[n][r],0==Object.keys(o[n]).length&&delete o[n]),o}function FT(e,t){var n=e.sections[t],r=Object.keys(n).map((function(r){return{editing:KT(e,t,r),sectionName:t,optionName:r,value:n[r]}})).sort((function(e,t){return e.optionName<t.optionName?-1:e.optionName>t.optionName?1:0}));return r.length>0&&(r[0].header=!0),r}function KT(e,t,n){return t===e.editSectionName&&n===e.editOptionName}var HT=(0,oe.Ng)((function(e,t){var n,r=e.config;return{node:t.node,options:(n=r,Object.keys(n.sections).map((function(e){return{sectionName:e,options:FT(n,e)}})).sort((function(e,t){return e.sectionName<t.sectionName?-1:e.sectionName>t.sectionName?1:0})).map((function(e){return e.options})).reduce((function(e,t){return e.concat(t)}),[])),loading:r.loading,saving:r.saving,editSectionName:r.editSectionName,editOptionName:r.editOptionName}}),(function(e){return{fetchAndEditConfig:function(t){e(function(e){return function(t){t({type:gC}),function(e){var t=hC(e);return v(t).then((function(e){if(e.error)throw new Error(e.reason);return{sections:e}}))}(e).then((function(n){t({type:vC,options:{sections:n.sections,node:e}})})).catch((function(n){ee.addNotification({msg:"Failed to load the configuration. "+n.message,type:"error",clear:!0}),t({type:vC,options:{sections:[],node:e}})}))}}(t))},saveOption:function(t,n){e(function(e,t){return function(n){n({type:EC,options:t});var r=t.sectionName,o=t.optionName,i=t.value;return bC(e,r,o,i).then((function(){return function(e,t){t({type:OC,options:e}),ee.addNotification({msg:"Option ".concat(e.optionName," saved"),type:"success"})}(t,n)})).catch((function(e){return function(e,t,n){n({type:SC,options:e}),ee.addNotification({msg:"Option save failed: ".concat(t),type:"error"})}(t,e.message,n)}))}}(t,n))},deleteOption:function(t,n){e(function(e,t){return function(n){n({type:"DELETING_OPTION",options:t});var r=t.sectionName,o=t.optionName;return function(e,t,n){var r=yC(e,t,n);return g(r).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,r,o).then((function(){return CC(t,n)})).catch((function(e){return TC(t,e.message,n)}))}}(t,n))},editOption:function(t){e(function(e){return function(t){t({type:_C,options:e})}}(t))},cancelEdit:function(t){e(function(e){return function(t){t({type:wC,options:e})}}(t))}}}))(xT);const zT=HT;var GT=function(e){var t=e.active,n=e.link,r=e.title;return re.createElement("li",{className:t?"active":""},re.createElement("a",{href:"#".concat(n)},r))};GT.propTypes={active:fe().bool.isRequired,link:fe().string.isRequired,icon:fe().string,title:fe().string.isRequired};const WT=function(e){var t=e.sidebarItems,n=e.selectedTab,r=t.map((function(e){return re.createElement(GT,{key:e.title,active:n===e.title,title:e.title,link:e.link})}));return re.createElement("nav",{className:"sidenav"},re.createElement("ul",{className:"nav flex-column"},r))};function XT(e){return XT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XT(e)}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JT(r.key),r)}}function JT(e){var t=function(e){if("object"!=XT(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=XT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==XT(t)?t:t+""}function YT(e,t){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},YT(e,t)}function $T(e){var t=ZT();return function(){var n,r=eR(e);if(t){var o=eR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==XT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ZT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZT=function(){return!!e})()}function eR(e){return eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eR(e)}var tR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YT(e,t)}(n,e);var t=$T(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&QT(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?re.createElement("div",null,re.createElement("p",null,re.createElement("strong",null," Origin Domains ")," "),re.createElement("p",null,"Databases will accept requests from these domains: "),re.createElement(nt.A.Check,{type:"radio",value:"all",label:"All domains ( * )",checked:this.props.isAllOrigins,onChange:this.onOriginChange.bind(this)}),re.createElement(nt.A.Check,{type:"radio",value:"selected",label:"Restrict to specific domains",checked:!this.props.isAllOrigins,onChange:this.onOriginChange.bind(this)})):null}}]),n}(re.Component);tR.propTypes={corsEnabled:fe().bool,isAllOrigins:fe().bool,originChange:fe().func.isRequired};var nR=function(e){return!!rR(e)||(ee.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},rR=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)};function oR(e){return oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oR(e)}function iR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aR(r.key),r)}}function aR(e){var t=function(e){if("object"!=oR(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=oR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oR(t)?t:t+""}function cR(e,t){return cR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cR(e,t)}function sR(e){var t=uR();return function(){var n,r=lR(e);if(t){var o=lR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==oR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function uR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uR=function(){return!!e})()}function lR(e){return lR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lR(e)}var pR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cR(e,t)}(n,e);var t=sR(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={origin:""},r}return function(e,t){t&&iR(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!nR(this.state.origin))return!1;var t=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?re.createElement("div",{id:"origin-domains-container"},re.createElement("div",{className:"origin-domains"},re.createElement(md.A,null,re.createElement(nt.A.Control,{name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin,"aria-label":"New domain name"}),re.createElement(de.A,{variant:"cf-secondary",id:"add-domain",onClick:this.addOrigin.bind(this)},re.createElement("i",{className:"fonticon-ok-circled"})," Add Domain")))):null}}]),n}(re.Component);function fR(e){return fR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fR(e)}function dR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mR(r.key),r)}}function mR(e){var t=function(e){if("object"!=fR(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fR(t)?t:t+""}function hR(e,t){return hR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hR(e,t)}function yR(e){var t=bR();return function(){var n,r=vR(e);if(t){var o=vR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==fR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bR=function(){return!!e})()}function vR(e){return vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vR(e)}pR.propTypes={isVisible:fe().bool.isRequired,addOrigin:fe().func.isRequired};var gR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hR(e,t)}(n,e);var t=yR(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={edit:!1,updatedOrigin:r.props.origin},r}return function(e,t){t&&dR(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),nR(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?re.createElement(md.A,null,re.createElement(nt.A.Control,{name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin,"aria-label":"Edit domain name"}),re.createElement(de.A,{variant:"cf-primary",onClick:this.updateOrigin.bind(this)},"Update")):re.createElement("div",null,this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return re.createElement("tr",null,re.createElement("td",null,e),re.createElement("td",{className:"action-btn-col"},re.createElement(fi.ToolbarButton,{icon:"fonticon-pencil",onClick:this.editOrigin.bind(this),"aria-label":"Edit domain"})),re.createElement("td",{className:"action-btn-col"},re.createElement(fi.ToolbarButton,{icon:"fonticon-trash",onClick:this.deleteOrigin.bind(this),"aria-label":"Delete domain"})))}}]),n}(re.Component);function _R(e){return _R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_R(e)}function wR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ER(r.key),r)}}function ER(e){var t=function(e){if("object"!=_R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_R(t)?t:t+""}function OR(e,t){return OR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},OR(e,t)}function SR(e){var t=DR();return function(){var n,r=NR(e);if(t){var o=NR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==_R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function DR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DR=function(){return!!e})()}function NR(e){return NR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NR(e)}gR.propTypes={origin:fe().string.isRequired,updateOrigin:fe().func.isRequired,deleteOrigin:fe().func.isRequired};var PR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OR(e,t)}(n,e);var t=SR(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&wR(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"createRows",value:function(){var e=this;return this.props.origins.map((function(t,n){return re.createElement(gR,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})}))}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var r=this.createRows();return re.createElement("table",{id:"origin-domain-table",className:"table table-striped"},re.createElement("tbody",null,r))}}]),n}(re.Component);function CR(e){return CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CR(e)}function TR(e){return function(e){if(Array.isArray(e))return RR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return RR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RR(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AR(r.key),r)}}function AR(e){var t=function(e){if("object"!=CR(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=CR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==CR(t)?t:t+""}function kR(e,t){return kR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kR(e,t)}function xR(e){var t=IR();return function(){var n,r=LR(e);if(t){var o=LR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==CR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function IR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IR=function(){return!!e})()}function LR(e){return LR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},LR(e)}PR.propTypes={isVisible:fe().bool.isRequired,origins:fe().arrayOf(fe().string),updateOrigin:fe().func.isRequired,deleteOrigin:fe().func.isRequired};var MR=fi.LoadLines,UR=Ss.ConfirmationModal,qR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kR(e,t)}(n,e);var t=xR(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&jR(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node;(!t||_.isEmpty(n)||window.confirm(ne.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:r})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),r=_.indexOf(n,t);-1!==r&&(n[r]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node,o=e.domainToDelete,i=this.props.origins.indexOf(o);if(-1!==i){var a=[].concat(TR(n.slice(0,i)),TR(n.slice(i+1)));this.props.saveCORS({corsEnabled:t,origins:a,node:r})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every((function(e){return!0===e})),t=re.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},re.createElement(tR,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),re.createElement(PR,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),re.createElement(pR,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=re.createElement(MR,null));var n=re.createElement("span",null,"Are you sure you want to delete ",re.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return re.createElement("div",{className:"cors-page flex-body"},re.createElement("header",{id:"cors-header"},re.createElement("p",null,ne.i18n.en_US["cors-notice"])),re.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},re.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",re.createElement("br",null),re.createElement(de.A,{type:"button",id:"enable-disable-cors",variant:"cf-primary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),re.createElement(UR,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}]),n}(re.Component);const BR="EDIT_CORS",VR="CORS_SET_IS_LOADING",FR="CORS_SHOW_DELETE_DOMAIN_MODAL",KR="CORS_HIDE_DELETE_DOMAIN_MODAL";var HR=function(e,t,n,r){if(!t)throw new Error("node not set");return E(e+"/cors/"+n,r).then((function(e){if(e.error)throw new Error(e.reason);return e}))},zR=function(){return{type:VR,isLoading:!1}},GR=function(e){return{type:BR,options:e,isLoading:!1}},WR=function(){return{type:KR}},XR=function(e){return"Reason: "+(e&&e.message||"n/a")},QR=function(e){return _.isEmpty(e)?"":e.join(",")},JR={fetchAndLoadCORSOptions:function(e,t){return function(n){var r=v(e+"/cors").then((function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})),o=v(e+"/chttpd").then((function(e){if(e.error)throw new Error(e.reason);return e}));ee.Promise.join(r,o,(function(e,r){var o=GR({origins:e.origins,corsEnabled:"true"===r.enable_cors,node:t});n(o)})).catch((function(e){ee.addNotification({msg:"Could not load CORS settings.  "+XR(e),type:"error"})}))}},showLoadingBars:function(){return{type:VR,isLoading:!0}},hideLoadingBars:zR,showDomainDeleteConfirmation:function(e){return{type:FR,domainToDelete:e}},hideDomainDeleteConfirmation:WR,loadCORSOptions:GR,sanitizeOrigins:QR,saveCors:function(e,t){return function(n){var r,o,i,a=[];return a.push(function(e,t,n){if(!t)throw new Error("node not set");return E(e+"/chttpd/enable_cors",n.toString()).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,t.node,t.corsEnabled)),t.corsEnabled&&(a.push((r=e,o=t.node,i=QR(t.origins),HR(r,o,"origins",i))),a.push(function(e,t){return HR(e,t,"credentials","true")}(e,t.node)),a.push(function(e,t){return HR(e,t,"headers","accept, authorization, content-type, origin, referer")}(e,t.node)),a.push(function(e,t){return HR(e,t,"methods","GET, PUT, POST, HEAD, DELETE")}(e,t.node))),ee.Promise.all(a).then((function(){ee.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(GR(t))})).catch((function(e){ee.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+XR(e),type:"error",clear:!0}),n(WR()),n(zR())}))}},overrideFetchAndLoadCORSOptions:function(e){JR.fetchAndLoadCORSOptions=e},overrideSaveCors:function(e){JR.saveCors=e}};const YR=JR;const $R={CORSContainer:(0,oe.Ng)((function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}}),(function(e,t){return{saveCORS:function(n){e(YR.showLoadingBars()),e(YR.saveCors(t.url,n))},fetchAndLoadCORSOptions:function(){e(YR.fetchAndLoadCORSOptions(t.url,t.node))},showDeleteDomainConfirmation:function(t){e(YR.showDomainDeleteConfirmation(t))},hideDeleteDomainConfirmation:function(){e(YR.hideDomainDeleteConfirmation())}}}))(qR),CORSScreen:qR,OriginInput:pR,Origins:tR,OriginTable:PR,OriginRow:gR};var ZR=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint;return re.createElement("header",{className:"two-panel-header"},re.createElement("div",{className:"flex-layout flex-row"},re.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},re.createElement(Fc,{crumbs:t})),re.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},re.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),re.createElement(zc,{docURL:n,endpoint:r}),re.createElement("div",{id:"notification-center-btn"},re.createElement(qc,null)))))};const ej=function(e){var t=e.showCors,n=e.docURL,r=e.node,o=e.endpoint,i=e.crumbs,a=[{title:"Main config",link:"_config/"+r},{title:"CORS",link:"_config/"+r+"/cors"}],c=t?"CORS":"Main config",s=t?re.createElement($R.CORSContainer,{node:r,url:o}):re.createElement(zT,{node:r});return re.createElement("div",{id:"dashboard",className:"with-sidebar"},re.createElement(ZR,{docURL:n,endpoint:o,node:r,crumbs:i}),re.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},re.createElement("aside",{id:"sidebar-content",className:"scrollable"},re.createElement(WT,{sidebarItems:a,selectedTab:c})),re.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},re.createElement("div",{id:"dashboard-upper-content"}),re.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},s),re.createElement("div",{id:"footer"}))))};var tj=ee.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){KO.navigateToNodeBasedOnNodeCount("/_config/")}}),nj=ee.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(){},configForNode:function(e){return re.createElement(ej,{node:e,docURL:ee.constants.DOC_URLS.CONFIG,endpoint:hC(e),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return re.createElement(ej,{node:e,docURL:ee.constants.DOC_URLS.CONFIG,endpoint:hC(e),crumbs:[{name:"Config"}],showCors:!0})}}),rj=ee.addon();rj.RouteObjects=[nj,tj];const oj=rj;oj.initialize=function(){ee.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},ee.addReducers({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qT,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case vC:return MT(MT({},e),{},{sections:n.sections,loading:!1,editOptionName:null,editSectionName:null});case _C:return MT(MT({},e),{},{editSectionName:n.sectionName,editOptionName:n.optionName});case gC:return MT(MT({},e),{},{loading:!0});case wC:return MT(MT({},e),{},{editOptionName:null,editSectionName:null});case EC:return MT(MT({},e),{},{saving:!0});case OC:return MT(MT({},e),{},{editOptionName:null,editSectionName:null,sections:BT(e,n),saving:!1});case SC:return MT(MT({},e),{},{saving:!1});case NC:return MT(MT({},e),{},{sections:BT(e,n),saving:!1});case PC:return MT(MT({},e),{},{saving:!1});case DC:return MT(MT({},e),{},{sections:VT(e,n)});default:return e}}});const ij=oj;var aj=n(77731),cj=n.n(aj);const sj={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}};function uj(e){return uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uj(e)}function lj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pj(r.key),r)}}function pj(e){var t=function(e){if("object"!=uj(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=uj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uj(t)?t:t+""}function fj(e,t){return fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fj(e,t)}function dj(e){var t=mj();return function(){var n,r=hj(e);if(t){var o=hj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==uj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mj=function(){return!!e})()}function hj(e){return hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hj(e)}var yj=function(e){var t=e.onChange,n=e.value;return re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12 col-md-2"},"Database URL:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Control,{id:"replication-remote-connection-url",type:"text",className:"form-control",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};yj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var bj=function(e){var t=e.value,n=e.onChange,r=e.databases.map((function(e){return re.createElement("option",{value:e,key:e},e)}));return re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12 col-md-2"},"Name:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Select,{id:"replication-source-local-database-select",value:t,placeholder:"Database name",onChange:function(e){return n(e.target.value)}},r)))};bj.propTypes={value:fe().string.isRequired,databases:fe().array.isRequired,onChange:fe().func.isRequired};var vj=function(e){var t=e.replicationSource,n=e.databases,r=e.localSource,o=e.remoteSource,i=e.onChangeRemote,a=e.onChangeLocal;return t===sj.REPLICATION_SOURCE.LOCAL?re.createElement(bj,{value:r,databases:n,onChange:a}):re.createElement(yj,{value:o,onChange:i})};vj.propTypes={replicationSource:fe().string.isRequired,databases:fe().array.isRequired,localSource:fe().string.isRequired,remoteSource:fe().string.isRequired,onChangeRemote:fe().func.isRequired,onChangeLocal:fe().func.isRequired};var gj=function(e){var t=e.onChange,n=e.value;return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-2"},"Type:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Select,{onChange:function(e){return t(e.target.value)},id:"replication-source",value:n},[{value:"",label:"Select source type"},{value:sj.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:sj.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map((function(e){return re.createElement("option",{value:e.value,key:e.value},e.label)})))))};gj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var _j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fj(e,t)}(n,e);var t=dj(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&lj(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,r=e.onLocalSourceChange,o=e.onRemoteSourceChange,i=e.remoteSource,a=e.databases;return t?re.createElement(vj,{replicationSource:t,databases:a,localSource:n,remoteSource:i,onChangeLocal:r,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return re.createElement(re.Fragment,null,re.createElement(gj,{onChange:n,value:t}),this.getReplicationSourceRow())}}]),n}(re.Component);function wj(e){return wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wj(e)}function Ej(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oj(r.key),r)}}function Oj(e){var t=function(e){if("object"!=wj(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wj(t)?t:t+""}function Sj(e,t){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sj(e,t)}function Dj(e){var t=Nj();return function(){var n,r=Pj(e);if(t){var o=Pj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==wj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Nj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nj=function(){return!!e})()}function Pj(e){return Pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pj(e)}_j.propTypes={replicationSource:fe().string.isRequired,localSource:fe().string.isRequired,remoteSource:fe().string.isRequired,databases:fe().array.isRequired,onLocalSourceChange:fe().func.isRequired,onRemoteSourceChange:fe().func.isRequired};var Cj=function(e){var t=e.value,n=e.onChange;return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-2"},"Type:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Select,{onChange:function(e){return n(e.target.value)},id:"replication-target",value:t},[{value:"",label:"Select target type"},{value:sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:sj.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map((function(e){return re.createElement("option",{value:e.value,key:e.value},e.label)})))))};Cj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var Tj=function(e){var t=e.onChange,n=e.value;return re.createElement(nt.A.Control,{type:"text",id:"replication-remote-connection-url",className:"form-control",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})};Tj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var Rj=function(e){var t=e.onChange,n=e.value,r=e.databases.map((function(e){return re.createElement("option",{value:e,key:e},e)}));return re.createElement(nt.A.Select,{id:"replication-target-existing-local-database-database-name",value:n,placeholder:"Database name",onChange:function(e){return t(e.target.value)}},r)};Rj.propTypes={value:fe().string.isRequired,databases:fe().array.isRequired,onChange:fe().func.isRequired};var jj=function(e){var t=e.onChange,n=e.value;return re.createElement(nt.A.Control,{id:"replication-target-new-local-database-database-name",type:"text",className:"form-control",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};jj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var Aj=function(e){var t,n=e.replicationTarget,r=e.onLocalTargetChange,o=e.onRemoteTargetChange,i=e.localTarget,a=e.remoteTarget,c=e.databases;if(!n)return null;n===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(s="New database:",t=re.createElement(jj,{value:i,onChange:r})):t=n===sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?re.createElement(Rj,{onChange:r,databases:c,value:i}):re.createElement(Tj,{onChange:o,value:a,newRemote:sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE===n});var s="Name:";return n!==sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&n!==sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(s="New database:"),re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12 col-md-2"},s),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},t))};Aj.propTypes={databases:fe().array.isRequired,onLocalTargetChange:fe().func.isRequired,onRemoteTargetChange:fe().func.isRequired,remoteTarget:fe().string.isRequired,localTarget:fe().string.isRequired,replicationTarget:fe().string.isRequired};var kj=function(e){var t=e.replicationTarget,n=e.targetDatabasePartitioned,r=e.onTargetDatabasePartitionedChange,o=e.allowNewPartitionedLocalDbs;if(!t)return null;if(t!==sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&t!==sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE)return null;var i=t===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!o,a=i?"Local server does not support partitioned databases":"Creates a new partitioned database",c=re.createElement(Ce.A,{id:"new-db-partitioned-tooltip"},a);return re.createElement(re.Fragment,null,re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12 col-md-2"},"New database options:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Check,{disabled:!0},re.createElement(nt.A.Check.Input,{id:"target-db-is-partitioned",type:"checkbox",value:"true",checked:n,onChange:function(){r(!n)},disabled:i}),re.createElement(Te.A,{placement:"right",overlay:c},re.createElement(nt.A.Check.Label,{className:"ms-2"},"Partitioned"))))))};kj.propTypes={onTargetDatabasePartitionedChange:fe().func.isRequired,targetDatabasePartitioned:fe().bool.isRequired,replicationTarget:fe().string.isRequired,allowNewPartitionedLocalDbs:fe().bool.isRequired};var xj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sj(e,t)}(n,e);var t=Dj(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Ej(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,r=e.onTargetChange,o=e.databases,i=e.localTarget,a=e.onRemoteTargetChange,c=e.remoteTarget,s=e.targetDatabasePartitioned,u=e.onTargetDatabasePartitionedChange,l=e.allowNewPartitionedLocalDbs;return re.createElement(re.Fragment,null,re.createElement(Cj,{value:t,onChange:r}),re.createElement(Aj,{remoteTarget:c,replicationTarget:t,databases:o,localTarget:i,onRemoteTargetChange:a,onLocalTargetChange:n}),re.createElement(kj,{replicationTarget:t,onTargetDatabasePartitionedChange:u,targetDatabasePartitioned:s,allowNewPartitionedLocalDbs:l}))}}]),n}(re.Component);function Ij(e){return Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ij(e)}function Lj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mj(r.key),r)}}function Mj(e){var t=function(e){if("object"!=Ij(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ij(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ij(t)?t:t+""}function Uj(e,t){return Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uj(e,t)}function qj(e){var t=Bj();return function(){var n,r=Vj(e);if(t){var o=Vj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Ij(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bj=function(){return!!e})()}function Vj(e){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vj(e)}xj.propTypes={databases:fe().array.isRequired,onTargetChange:fe().func.isRequired,onLocalTargetChange:fe().func.isRequired,onRemoteTargetChange:fe().func.isRequired,remoteTarget:fe().string.isRequired,localTarget:fe().string.isRequired,replicationTarget:fe().string.isRequired};var Fj=function(e){var t=e.value,n=e.onChange;return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-2"},"Replication type:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Select,{onChange:function(e){return n(e.target.value)},id:"replication-target",value:t},[{value:sj.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:sj.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map((function(e){return re.createElement("option",{value:e.value,key:e.value},e.label)})))))};Fj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var Kj=function(e){var t=e.value,n=e.onChange;return re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-12 col-md-2"},"Replication document:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Control,{id:"replication-options-replication-doc",type:"text",className:"form-control",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};Kj.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var Hj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uj(e,t)}(n,e);var t=qj(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Lj(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,r=e.onDocChange,o=e.onTypeChange;return re.createElement("div",{className:"col-12"},re.createElement(Fj,{onChange:o,value:t}),re.createElement(Kj,{onChange:r,value:n}))}}]),n}(re.Component);Hj.propTypes={replicationDocName:fe().string.isRequired,replicationType:fe().string.isRequired,onDocChange:fe().func.isRequired,onTypeChange:fe().func.isRequired};var zj=fi.ConfirmButton,Gj=function(e){var t=e.onClear,n=e.disabled,r=e.onClick;return re.createElement("div",{className:"row mt-3"},re.createElement("div",{className:"col-12 text-end"},re.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"),re.createElement(zj,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:r,disabled:n})))};function Wj(e){return Wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wj(e)}function Xj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rA(r.key),r)}}function Jj(e,t,n){return t&&Qj(e.prototype,t),n&&Qj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yj(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$j(e,t)}function $j(e,t){return $j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$j(e,t)}function Zj(e){var t=tA();return function(){var n,r=nA(e);if(t){var o=nA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Wj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eA(e)}(this,n)}}function eA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tA=function(){return!!e})()}function nA(e){return nA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nA(e)}function rA(e){var t=function(e){if("object"!=Wj(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Wj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wj(t)?t:t+""}Gj.propTypes={disabled:fe().bool.isRequired,onClick:fe().func.isRequired,onClear:fe().func.isRequired};var oA=function(e){Yj(n,e);var t=Zj(n);function n(e){var r;return Xj(this,n),function(e,t,n){(t=rA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(eA(r=t.call(this,e)),"getAuthOptions",(function(){var e=ne.i18n.en_US["replication-user-password-auth-label"],t=[{value:sj.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:sj.REPLICATION_AUTH_METHOD.BASIC,label:e}];return r.customAuths.map((function(e){t.push({value:e.typeValue,label:e.typeLabel})})),t.map((function(e){return re.createElement("option",{value:e.value,key:e.value},e.label)}))})),r.onChangeType=r.onChangeType.bind(eA(r)),r.onChangeValue=r.onChangeValue.bind(eA(r)),r.customAuths=ee.getExtensions("Replication:Auth"),r.customAuths||(r.customAuths=[]),r.customAuthTypes=r.customAuths.map((function(e){return e.typeValue})),r.customAuthHelp=ee.getExtensions("Replication:Auth-help"),r.customAuthHelp||(r.customAuthHelp=[]),r}return Jj(n,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==sj.REPLICATION_AUTH_METHOD.BASIC)return re.createElement(iA,{onChange:this.onChangeValue,auth:e,authId:n});var r=this.customAuths.filter((function(e){return e.typeValue===t}));if(r&&r.length>0){var o=r[0].inputComponent;return re.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"getHelpText",value:function(e){var t=this.customAuthHelp.filter((function(t){return e===t.authType})).map((function(e){return e.helpText}));return 0==t.length?null:re.createElement("span",{id:"replications-auth-help-span",className:"form-text"},t[0])}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,r=t.authType,o=t.authId;return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-2"},"Authentication:"),re.createElement("div",{className:"col-12 col-md mt-1 mt-md-0"},re.createElement(nt.A.Select,{onChange:function(t){return e.onChangeType(t.target.value)},id:"select-"+o,value:r},this.getAuthOptions()),this.getAuthInputFields(n,r),this.getHelpText(r)))}}]),n}(re.Component);oA.propTypes={authId:fe().string.isRequired,authType:fe().string.isRequired,credentials:fe().object,onChangeAuth:fe().func.isRequired,onChangeAuthType:fe().func.isRequired},oA.defaultProps={authType:sj.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var iA=function(e){Yj(n,e);var t=Zj(n);function n(e){var r;return Xj(this,n),(r=t.call(this,e)).updatePassword=r.updatePassword.bind(eA(r)),r.updateUsername=r.updateUsername.bind(eA(r)),r.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},r}return Jj(n,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=ne.i18n.en_US["replication-username-input-placeholder"],n=ne.i18n.en_US["replication-password-input-placeholder"],r=this.props.authId;return re.createElement(re.Fragment,null,re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 mt-2"},re.createElement(nt.A.Control,{id:r+"-username",type:"text",className:"form-control",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)}})),re.createElement("div",{className:"col-12 mt-2"},re.createElement(nt.A.Control,{id:r+"-password",type:"password",className:"form-control",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),n}(re.Component);iA.propTypes={auth:fe().object.isRequired,onChange:fe().func.isRequired};var aA=fi.ConfirmButton,cA=function(e){var t=e.visible,n=e.onClose,r=e.onClick,o=e.multipleDocs,i=e.isReplicationDB;if(!t)return null;var a=void 0,c="Delete ".concat(i?"Document":"Replication Job"),s="Deleting a replication ".concat(i?"document":"job"," stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.");o>1&&(a=re.createElement(re.Fragment,null,"You are deleting ",re.createElement("strong",null,o)," replication ",i?"documents":"jobs","."),c="Delete ".concat(i?"Documents":"Replication Jobs"));var u=function(e){e&&e.preventDefault(),n()};return re.createElement(Dt.A,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:u},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,"Confirm Deletion")),re.createElement(Dt.A.Body,null,re.createElement("p",null,a),re.createElement("p",null,s)),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",className:"cancel-link",onClick:u},"Cancel"),re.createElement(aA,{customIcon:"fonticon-trash",text:c,onClick:r})))};cA.propTypes={visible:fe().bool.isRequired,isReplicationDB:fe().bool.isRequired,onClick:fe().func.isRequired,onClose:fe().func.isRequired,multipleDocs:fe().number.isRequired},cA.defaultProps={isReplicationDB:!0};var sA=function(e){var t=e.visible,n=e.onClose,r=e.errorMsg,o=e.status;if(!t)return null;var i="Replication Error",a=re.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(i="Replication Error - Failed",a=null),re.createElement(Dt.A,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,i)),re.createElement(Dt.A.Body,null,re.createElement("p",null,r),a),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{variant:"cf-primary",onClick:function(){return n()}},"Close")))};sA.propTypes={visible:fe().bool.isRequired,onClick:fe().func.isRequired,onClose:fe().func.isRequired,errorMsg:fe().string.isRequired};var uA=function(e){var t=e.visible,n=e.docId,r=e.onClose,o=e.onClick;return t?re.createElement(Dt.A,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return r()}},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,"Custom ID Conflict")),re.createElement(Dt.A.Body,null,re.createElement("p",null,"A replication document with ID ",re.createElement("code",null,n)," already exists."),re.createElement("p",null,"You can overwrite the existing document, or change the new replication jobâ€™s document ID."),re.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{onClick:r,variant:"cf-primary",className:"replication__error-cancel"},"Change Document ID"),re.createElement(de.A,{onClick:o,variant:"cf-primary",className:"replication__error-continue"},"Overwrite Existing Document"))):null};function lA(e){return lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lA(e)}function pA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fA(r.key),r)}}function fA(e){var t=function(e){if("object"!=lA(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=lA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lA(t)?t:t+""}function dA(e,t){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dA(e,t)}function mA(e){var t=yA();return function(){var n,r=bA(e);if(t){var o=bA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==lA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hA(e)}(this,n)}}function hA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yA=function(){return!!e})()}function bA(e){return bA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bA(e)}uA.propTypes={visible:fe().bool.isRequired,onClick:fe().func.isRequired,onClose:fe().func.isRequired,docId:fe().string.isRequired};var vA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dA(e,t)}(n,e);var t=mA(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).submit=r.submit.bind(hA(r)),r.checkAuth=r.checkAuth.bind(hA(r)),r.runReplicationChecks=r.runReplicationChecks.bind(hA(r)),r}return function(e,t){t&&pA(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,r=t.replicationTarget,o=t.sourceAuthType,i=t.targetAuthType,a=t.sourceAuth,c=t.targetAuth,s=n===sj.REPLICATION_SOURCE.LOCAL,u=r===sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!ee.session.isAdminParty()){if(s&&o===sj.REPLICATION_AUTH_METHOD.NO_AUTH)return void ee.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(u&&i===sj.REPLICATION_AUTH_METHOD.NO_AUTH)return void ee.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,a,"source",s).then((function(){e.checkLocalAccountCredentials(i,c,"target",u).then((function(){e.submit()}),(function(){}))}),(function(){}))}},{key:"checkLocalAccountCredentials",value:function(e,t,n,r){if(e!==sj.REPLICATION_AUTH_METHOD.BASIC||!r)return ee.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing ".concat(n," credentials.");return ee.addNotification({msg:o,type:"error",clear:!0}),ee.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then((function(e){if(e.error)throw e;return!0})).catch((function(e){throw ee.addNotification({msg:"Your username or password for ".concat(n," database is incorrect."),type:"error",clear:!0}),e}))}},{key:"checkCredentials",value:function(e,t){return b(D.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+cj().encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,r=t.replicationDocName;(0,t.checkReplicationDocID)(r).then((function(t){t?n():e.checkAuth()}))}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;this.checkSourceTargetDatabases()&&(e?this.checkReplicationDocID():this.checkAuth())}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,r=e.replicationSource,o=e.replicationTarget,i=e.localTarget,c=e.localSource,s=e.databases;if(o===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(s,i))return ee.addNotification({msg:'The "'+i+'" database already exists locally. Please enter another database name.',type:"error",escape:!1,clear:!0}),!1;if(o===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE||o===sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var u="";if(/\s/.test(i)?u="The target database may not contain any spaces.":/^_/.test(i)&&(u="The target database may not start with an underscore."),u)return ee.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}if(r===sj.REPLICATION_SOURCE.REMOTE&&!(0,a.isEmpty)(n)){var l="";try{""===new URL(n).pathname.slice(1)&&(l="Invalid source database URL. Database name is missing.")}catch(e){l="Invalid source database URL."}if(l)return ee.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if((o===sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE||o===sj.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)&&!(0,a.isEmpty)(t)){var p="";try{""===new URL(t).pathname.slice(1)&&(p="Invalid target database URL. Database name is missing.")}catch(e){p="Invalid target database URL."}if(p)return ee.addNotification({msg:p,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!(0,a.isEmpty)(t)||c===i&&!(0,a.isEmpty)(c))||(ee.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e,t=this.props,n=t.replicationTarget,r=t.replicationSource,o=t.replicationType,i=t.replicationDocName,a=t.remoteTarget,c=t.remoteSource,s=t.localTarget,u=t.localSource,l=t.sourceAuthType,p=t.sourceAuth,f=t.targetAuthType,d=t.targetAuth,m=t.targetDatabasePartitioned,h=t.pageLimit;if(i){var y=this.props.docs.find((function(e){return e._id===i}));y&&(e=y._rev)}this.props.replicate({replicationTarget:n,replicationSource:r,replicationType:o,replicationDocName:i,localTarget:s,localSource:u,remoteTarget:a,remoteSource:c,_rev:e,sourceAuthType:l,sourceAuth:p,targetAuthType:f,targetAuth:d,targetDatabasePartitioned:m},h)}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,r=e.replicationSource,o=e.replicationTarget,i=e.localTargetKnown,a=e.localTarget;return!(e.submittedNoChange||!r||!o||r===sj.REPLICATION_SOURCE.LOCAL&&!n||o===sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!i||o===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!a||r===sj.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,i=e.conflictModalVisible,a=e.databases,c=e.localSource,s=e.remoteSource,u=e.remoteTarget,l=e.localTarget,p=e.targetDatabasePartitioned,f=e.allowNewPartitionedLocalDbs,d=e.updateFormField,m=e.clearReplicationForm,h=e.sourceAuthType,y=e.sourceAuth,b=e.targetAuthType,v=e.targetAuth;return re.createElement("div",{className:"container px-3 py-3"},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12"},re.createElement("h3",null,"Source")),re.createElement("div",{className:"col-12"},re.createElement(_j,{replicationSource:t,localSource:c,databases:a,remoteSource:s,onSourceSelect:d("replicationSource"),onRemoteSourceChange:d("remoteSource"),onLocalSourceChange:d("localSource")})),re.createElement("div",{className:"col-12 mt-2"},re.createElement(oA,{credentials:y,authType:h,onChangeAuthType:d("sourceAuthType"),onChangeAuth:d("sourceAuth"),authId:"replication-source-auth"}))),re.createElement("hr",{className:"replication__seperator my-3",size:"1"}),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12"},re.createElement("h3",null,"Target")),re.createElement("div",{className:"col-12"},re.createElement(xj,{replicationTarget:n,onTargetChange:d("replicationTarget"),databases:a,localTarget:l,remoteTarget:u,allowNewPartitionedLocalDbs:f,targetDatabasePartitioned:p,onRemoteTargetChange:d("remoteTarget"),onLocalTargetChange:d("localTarget"),onTargetDatabasePartitionedChange:d("targetDatabasePartitioned")})),re.createElement("div",{className:"col-12 mt-2"},re.createElement(oA,{credentials:v,authType:b,onChangeAuthType:d("targetAuthType"),onChangeAuth:d("targetAuth"),authId:"replication-target-auth"}))),re.createElement("hr",{className:"replication__seperator my-3",size:"1"}),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12"},re.createElement("h3",null,"Options")),re.createElement(Hj,{replicationType:r,replicationDocName:o,onDocChange:d("replicationDocName"),onTypeChange:d("replicationType")})),re.createElement(Gj,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:m}),re.createElement(uA,{visible:i,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}]),n}(re.Component);function gA(e){return gA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gA(e)}var _A=null,wA=function(e){return _A&&!e||(_A=new ee.Promise((function(e){var t=D.getServerUrl("/_scheduler/jobs");v(t,{raw:!0}).then((function(t){if(t.status>202)return e(!1);e(!0)}))}))),_A},EA=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(encodeURIComponent(t.pathname.slice(1)))},OA=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))},SA=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},DA=function(e){var t=e.replicationSource,n=e.localSource,r=e.remoteSource,o=e.sourceAuthType,i=e.sourceAuth,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,c=a.origin,s=a.pathname,u={};if(t===sj.REPLICATION_SOURCE.LOCAL){var l=encodeURIComponent(n),p=D.getRootUrl({origin:c,pathname:s});u.url="".concat(p).concat(l)}else u.url=EA(SA(r));return PA(u,o,i),u},NA=function(e){var t=e.replicationTarget,n=e.localTarget,r=e.remoteTarget,o=e.targetAuthType,i=e.targetAuth,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,c=a.origin,s=a.pathname,u={};if(t===sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===sj.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)u.url=EA(SA(r));else{var l=encodeURIComponent(n),p=D.getRootUrl({origin:c,pathname:s});u.url="".concat(p).concat(l)}return PA(u,o,i),u},PA=function(e,t,n){if(t&&t!==sj.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===sj.REPLICATION_AUTH_METHOD.BASIC)e.headers=(o=n.username,i=n.password,o&&i?{Authorization:"Basic "+cj().encode(o+":"+i)}:{});else{var r=ee.getExtensions("Replication:Auth");r&&r.filter((function(e){return e.typeValue===t})).map((function(t){t.setCredentials&&t.setCredentials(e,n)}))}else e.headers={};var o,i},CA=function(e){return-1!==_.indexOf([sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE,sj.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},TA=function(e){return e===sj.REPLICATION_TYPE.CONTINUOUS},RA=function(e){var t=e;return e?("object"===gA(e)&&(t=e.url),function(e){try{var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))}catch(t){return e}}(t)):""},jA=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},AA=function(){var e=D.getServerUrl("/_scheduler/docs?include_docs=true");return v(e).then((function(e){return e.error?[]:e.docs}))},kA=function(e){return new Promise((function(t){var n=D.getServerUrl("/_replicator/".concat(e));v(n).then((function(e){"not_found"!==e.error?t(!0):t(!1)}))}))};function xA(e){return xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xA(e)}function IA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UA(r.key),r)}}function MA(e,t,n){return t&&LA(e.prototype,t),n&&LA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UA(e){var t=function(e){if("object"!=xA(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xA(t)?t:t+""}function qA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BA(e,t)}function BA(e,t){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BA(e,t)}function VA(e){var t=FA();return function(){var n,r=KA(e);if(t){var o=KA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function FA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FA=function(){return!!e})()}function KA(e){return KA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},KA(e)}var HA=fi.ToolbarButton,zA=function(e){var t,n;try{t=new URL(SA(e))}catch(e){return""}var r=D.getRootUrl();return n=function(e,t){try{var n=new URL(t),r=e.pathname.substring(n.pathname.length);return encodeURIComponent(r)}catch(e){return""}}(t,r),e.indexOf(window.location.hostname)>-1?re.createElement("span",null,r,re.createElement("a",{href:"#/database/".concat(n,"/_all_docs")},decodeURIComponent(n))):"".concat(t.origin).concat(t.pathname)},GA=function(e){qA(n,e);var t=VA(n);function n(e){var r;return IA(this,n),(r=t.call(this,e)).state={modalVisible:!1},r}return MA(n,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:re.createElement("span",null,re.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning fonticon-attention-circled",onClick:this.showModal.bind(this),title:"View error message"}),re.createElement(sA,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,r=m()(t),o=re.createElement("span",null,n);if(r.isValid()){var i=r.format("MMM Do, h:mm a"),a=re.createElement(Ce.A,{id:""},"Last updated: ",i);o=re.createElement(Te.A,{placement:"top",overlay:a},re.createElement("span",null,n))}return re.createElement("td",{className:"replication__row-status replication__row-status--".concat(n)},o,this.getErrorIcon())}}]),n}(re.Component);GA.propTypes={statusTime:fe().any,status:fe().string,errorMsg:fe().string.isRequired},GA.defaultProps={status:""};var WA=function(e){var t=e.onlyDeleteAction,n=e._id,r=e.url,o=e.deleteDocs,i=[];return t||(i.push(re.createElement(HA,{icon:"fonticon-wrench",title:"Edit replication","aria-label":"Edit replication",key:1,onClick:function(){return ee.navigate("#replication/id/".concat(encodeURIComponent(n)))}})),i.push(re.createElement(HA,{icon:"fonticon-document",title:"Edit replication document","aria-label":"Edit replication document ".concat(n),key:2,onClick:function(){return ee.navigate(r)}}))),i.push(re.createElement(HA,{icon:"fonticon-trash",title:"Delete ".concat(t?"job":"document"),"aria-label":"Delete ".concat(t?"job":"document"," ").concat(n),key:3,onClick:function(){return o(n)}})),re.createElement("div",{className:"replication__actions"},i)};WA.propTypes={_id:fe().string.isRequired,url:fe().string,error:fe().bool.isRequired,errorMsg:fe().string.isRequired,deleteDocs:fe().func.isRequired};var XA=function(e){var t=e._id,n=e.source,r=e.target,o=e.type,i=e.startTime,a=e.status,c=e.statusTime,s=e.url,u=e.selected,l=e.selectDoc,p=e.errorMsg,f=e.deleteDocs,d=e.onlyDeleteAction,h=e.showStateRow,y=m()(i),b=y.isValid()?y.format("MMM Do, h:mm a"):"",v=null;return h&&(v=re.createElement(GA,{statusTime:c,status:a,errorMsg:p})),re.createElement("tr",{className:"replication__table-row"},re.createElement("td",{className:"replication__table-col"},re.createElement(nt.A.Check,{type:"checkbox",checked:u,onChange:function(){return l(t)}})),re.createElement("td",{className:"replication__table-col"},zA(n)),re.createElement("td",{className:"replication__table-col"},zA(r)),re.createElement("td",{className:"replication__table-col"},b),re.createElement("td",{className:"replication__table-col"},o),v,re.createElement("td",{className:"replication__table-col"},re.createElement(WA,{onlyDeleteAction:d,deleteDocs:f,_id:t,url:s,error:"error"===a||"retrying"===a,errorMsg:p})))};XA.propTypes={_id:fe().string.isRequired,source:fe().string.isRequired,target:fe().string.isRequired,type:fe().string.isRequired,status:fe().string,url:fe().string,statusTime:fe().object.isRequired,startTime:fe().object,selected:fe().bool.isRequired,selectDoc:fe().func.isRequired,errorMsg:fe().string.isRequired,deleteDocs:fe().func.isRequired,onlyDeleteAction:fe().bool.isRequired,showStateRow:fe().bool.isRequired};var QA=function(e){var t=e.isSelected,n=e.deleteDocs,r=e.someDocsSelected,o=e.onCheck,i=r?re.createElement(HA,{icon:"fonticon-trash",title:"Delete all selected","aria-label":"Delete all selected",onClick:function(){return n()}}):null;return re.createElement("div",{className:"replication__bulk-select-wrapper"},re.createElement("div",{className:"replication__bulk-select-header"},re.createElement(nt.A.Check,{type:"checkbox",className:"replication__bulk-select-input",checked:t,onChange:o})),i)};QA.propTypes={isSelected:fe().bool.isRequired,someDocsSelected:fe().bool.isRequired,onCheck:fe().func.isRequired,deleteDocs:fe().func.isRequired};var JA=function(e){var t=e.msg;return re.createElement("tr",null,re.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};JA.defaultProps={msg:"There is no replicator-db activity or history to display."};var YA=function(e){qA(n,e);var t=VA(n);function n(e){return IA(this,n),t.call(this,e)}return MA(n,[{key:"sort",value:function(e,t,n){var r=!1,o=n.sort((function(t,n){return t[e]<n[e]?(r=!0,-1):t[e]>n[e]?(r=!0,1):0}));return!t&&r&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?re.createElement(JA,null):this.sort(this.props.column,this.props.descending,this.props.docs).map((function(t,n){return re.createElement(XA,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})}))}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?re.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",re.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("status")," ").concat(this.isSelected("status"))})):null}},{key:"render",value:function(){return re.createElement(kw.A,{striped:!0},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",{className:"replication__table-bulk-select"},re.createElement(QA,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),re.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",re.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("source")," ").concat(this.isSelected("source"))})),re.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",re.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("target")," ").concat(this.isSelected("target"))})),re.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",re.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("statusTime")," ").concat(this.isSelected("statusTime"))})),re.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",re.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("continuous")," ").concat(this.isSelected("continuous"))})),this.stateCol(),re.createElement("th",{className:"replication__table-header-actions"},"Actions"))),re.createElement("tbody",null,this.renderRows()))}}]),n}(re.Component);YA.defaultProps={onlyDeleteAction:!1,showStateRow:!0};var $A=function(e){var t=e.value,n=e.onChange;return re.createElement(md.A,{id:"replication-filter-group"},re.createElement(md.A.Text,null,re.createElement("i",{className:"fonticon-filter"})),re.createElement(nt.A.Control,{id:"replication-filter-input",type:"text",placeholder:"Filter replications",value:t,onChange:function(e){n(e.target.value)},"aria-label":"Filter replication results"}))};$A.propTypes={value:fe().string.isRequired,onChange:fe().func.isRequired};var ZA=function(e){var t=e.filter,n=e.onFilterChange;return re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-6"},re.createElement($A,{value:t,onChange:n})),re.createElement("div",{className:"col-12 col-md text-end"},re.createElement(de.A,{id:"new-replication-btn",className:"mt-2 mt-md-0",href:"#/replication/_create",variant:"cf-primary"},re.createElement("i",{className:"fonticon-plus-circled"}),"New Replication")))};function ek(e){return ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ek(e)}function tk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nk(r.key),r)}}function nk(e){var t=function(e){if("object"!=ek(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ek(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ek(t)?t:t+""}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rk(e,t)}function ok(e){var t=ik();return function(){var n,r=ak(e);if(t){var o=ak(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==ek(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ik(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ik=function(){return!!e})()}function ak(e){return ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ak(e)}ZA.propTypes={filter:fe().string.isRequired,onFilterChange:fe().func.isRequired};var ck=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}(n,e);var t=ok(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},r}return function(e,t){t&&tk(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t,this.props.pageLimit),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,i=e.filter,a=e.selectAllDocs,c=e.someDocsSelected,s=e.allDocsSelected,u=e.selectDoc,l=this.state.modalVisible;return re.createElement("div",{className:"replication__activity"},re.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table."),re.createElement(ZA,{filter:i,onFilterChange:t}),re.createElement(YA,{someDocsSelected:c,allDocsSelected:s,selectAllDocs:a,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),re.createElement(cA,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:l,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}]),n}(re.Component);function sk(e){return sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sk(e)}function uk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lk(r.key),r)}}function lk(e){var t=function(e){if("object"!=sk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=sk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sk(t)?t:t+""}function pk(e,t){return pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pk(e,t)}function fk(e){var t=dk();return function(){var n,r=mk(e);if(t){var o=mk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==sk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dk=function(){return!!e})()}function mk(e){return mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mk(e)}ck.propTypes={docs:fe().array.isRequired,filter:fe().string.isRequired,selectAllDocs:fe().func.isRequired,allDocsSelected:fe().bool.isRequired,someDocsSelected:fe().bool.isRequired,selectDoc:fe().func.isRequired,onFilterChange:fe().func.isRequired,deleteDocs:fe().func.isRequired,activitySort:fe().object.isRequired,changeActivitySort:fe().func.isRequired,pageLimit:fe().number.isRequired};var hk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pk(e,t)}(n,e);var t=fk(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},r}return function(e,t){t&&uk(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,i=e.filter,a=e.selectAllDocs,c=e.someDocsSelected,s=e.allDocsSelected,u=e.selectDoc,l=this.state.modalVisible;return re.createElement("div",{className:"replication__activity"},re.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),re.createElement(ZA,{filter:i,onFilterChange:t}),re.createElement(YA,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:c,allDocsSelected:s,selectAllDocs:a,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),re.createElement(cA,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:l,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}]),n}(re.Component);function yk(e){return yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yk(e)}function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vk(r.key),r)}}function vk(e){var t=function(e){if("object"!=yk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yk(t)?t:t+""}function gk(e,t){return gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gk(e,t)}function _k(e){var t=wk();return function(){var n,r=Ek(e);if(t){var o=Ek(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==yk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wk=function(){return!!e})()}function Ek(e){return Ek=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ek(e)}hk.propTypes={docs:fe().array.isRequired,filter:fe().string.isRequired,selectAllDocs:fe().func.isRequired,allDocsSelected:fe().bool.isRequired,someDocsSelected:fe().bool.isRequired,selectDoc:fe().func.isRequired,onFilterChange:fe().func.isRequired,deleteDocs:fe().func.isRequired,activitySort:fe().object.isRequired,changeActivitySort:fe().func.isRequired};var Ok=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}(n,e);var t=_k(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&bk(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getFooterText",value:function(){var e=this.props,t=e.statusDocs,n=e.pageLimit;return 0===t.length?re.createElement("span",null,"Showing 0 replications."):re.createElement("span",null,"Showing replications 1 - ",Math.min(n,t.length))}},{key:"perPageChange",value:function(e){this.props.setPageLimit(e)}},{key:"render",value:function(){var e=this.props.pageLimit;return re.createElement("footer",{className:"pagination-footer"},re.createElement(ss,{label:"Max replications displayed:",options:[5,10,25,50,100,200,300,400,500],perPageChange:this.perPageChange.bind(this),perPage:e}),re.createElement("div",{className:"current-replications"},this.getFooterText()))}}]),n}(re.Component);function Sk(e){return Sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sk(e)}function Dk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nk(r.key),r)}}function Nk(e){var t=function(e){if("object"!=Sk(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Sk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sk(t)?t:t+""}function Pk(e,t){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pk(e,t)}function Ck(e){var t=Tk();return function(){var n,r=Rk(e);if(t){var o=Rk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Sk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tk=function(){return!!e})()}function Rk(e){return Rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rk(e)}Ok.propTypes={statusDocs:fe().array.isRequired,pageLimit:fe().number.isRequired,setPageLimit:fe().func.isRequired};var jk=fi.LoadLines,Ak=fi.Polling,kk=fi.RefreshBtn,xk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pk(e,t)}(n,e);var t=Ck(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Dk(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(this.props.pageLimit),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,i=e.databases,a=e.localSource,c=e.remoteSource,s=e.remoteTarget,u=e.localTarget,l=e.statusDocs,p=e.statusFilter,f=e.loading,d=e.allDocsSelected,m=e.someDocsSelected,h=e.showConflictModal,y=e.localSourceKnown,b=e.localTargetKnown,v=e.updateFormField,g=e.authenticated,_=e.activityLoading,w=e.submittedNoChange,E=e.activitySort,O=e.tabSection,S=e.replicateInfo,D=e.replicateLoading,N=e.replicateFilter,P=e.allReplicateSelected,C=e.someReplicateSelected,T=e.hideConflictModal,R=e.isConflictModalVisible,j=e.filterDocs,A=e.filterReplicate,k=e.replicate,x=e.clearReplicationForm,I=e.selectAllDocs,L=e.changeActivitySort,M=e.selectDoc,U=e.deleteDocs,q=e.deleteReplicates,B=e.selectAllReplicates,V=e.selectReplicate,F=e.sourceAuthType,K=e.sourceAuth,H=e.targetAuthType,z=e.targetAuth,G=e.targetDatabasePartitioned,W=e.allowNewPartitionedLocalDbs,X=e.pageLimit;return"new replication"===O?f?re.createElement(jk,null):re.createElement(vA,{docs:l,localTargetKnown:b,localSourceKnown:y,clearReplicationForm:x,replicate:k,replicationSource:t,replicationTarget:n,replicationType:r,replicationDocName:o,databases:i,localSource:a,remoteSource:c,remoteTarget:s,localTarget:u,sourceAuthType:F,sourceAuth:K,targetAuthType:H,targetAuth:z,targetDatabasePartitioned:G,allowNewPartitionedLocalDbs:W,updateFormField:v,conflictModalVisible:R,hideConflictModal:T,showConflictModal:h,checkReplicationDocID:kA,authenticated:g,submittedNoChange:w,pageLimit:X}):"_replicate"===O?D?re.createElement(jk,null):re.createElement(hk,{docs:S,filter:N,onFilterChange:A,selectDoc:V,selectAllDocs:B,allDocsSelected:P,someDocsSelected:C,activitySort:E,changeActivitySort:L,deleteDocs:q}):_?re.createElement(jk,null):re.createElement(ck,{docs:l,filter:p,onFilterChange:j,selectAllDocs:I,selectDoc:M,allDocsSelected:d,someDocsSelected:m,deleteDocs:U,activitySort:E,changeActivitySort:L,pageLimit:X})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return D.isIE1X()&&(e+=" "+e+"--ie1X"),re.createElement("div",{className:e},re.createElement(Ak,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),re.createElement(kk,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[re.createElement(go,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(re.createElement(go,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){ee.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:re.createElement(wo,null,this.getTabElements())}},{key:"getFooter",value:function(){var e=this.props,t=e.tabSection,n=e.statusDocs,r=e.pageLimit,o=e.setPageLimit;return"activity"===t?re.createElement(Ok,{statusDocs:n,pageLimit:r,setPageLimit:o}):null}},{key:"render",value:function(){return this.props.checkingAPI?re.createElement(jk,null):re.createElement(Gc,null,re.createElement(Wc,{crumbs:this.getCrumbs()},this.getHeaderComponents()),re.createElement(Xc,null,re.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),re.createElement("div",{className:"replication__page"},this.showSection()))),re.createElement(Qc,null,this.getFooter()))}}]),n}(re.Component);const Ik="INIT_REPLICATION",Lk="REPLICATION_DATABASES_LOADED",Mk="REPLICATION_UPDATE_FORM_FIELD",Uk="REPLICATION_CLEAR_FORM",qk="REPLICATION_STARTING",Bk="REPLICATION_STATUS",Vk="REPLICATION_FETCHING_STATUS",Fk="REPLICATION_FILTER_DOCS",Kk="REPLICATION_TOGGLE_ALL_DOCS",Hk="REPLICATION_TOGGLE_DOC",zk="REPLICATION_SET_STATE_FROM_DOC",Gk="REPLICATION_SHOW_CONFLICT_MODAL",Wk="REPLICATION_HIDE_CONFLICT_MODAL",Xk="REPLICATION_CHANGE_ACTIVITY_SORT",Qk="REPLICATION_CLEAR_SELECTED_DOCS",Jk="REPLICATION_FETCHING_REPLICATE_STATUS",Yk="REPLICATION_REPLICATE_STATUS",$k="REPLICATION_SUPPORT_NEW_API",Zk="REPLICATION_FILTER_REPLICATE",ex="REPLICATION_TOGGLE_ALL_REPLICATE",tx="REPLICATION_TOGGLE_REPLICATE",nx="REPLICATION_CLEAR_SELECTED_REPLICATES",rx="REPLICATION_FETCHING_FORM_STATE",ox="REPLICATION_SET_PAGE_LIMIT",ix=function(e){var t=c().isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()};var ax=function e(t,n){return function(r){var o=function(e){var t=e.replicationTarget,n=e.replicationSource,r=e.replicationType,o=e.replicationDocName,i=e.localTarget,a=e.localSource,c=e.remoteTarget,s=e.remoteSource,u=e._rev,l=e.sourceAuthType,p=e.sourceAuth,f=e.targetAuthType,d=e.targetAuth,m=e.targetDatabasePartitioned,h={user_ctx:{name:ee.session.user().name,roles:["_admin","_reader","_writer"]},source:DA({replicationSource:n,localSource:a,remoteSource:s,sourceAuthType:l,sourceAuth:p}),target:NA({replicationTarget:t,replicationSource:n,remoteTarget:c,localTarget:i,targetAuthType:f,targetAuth:d}),create_target:CA(t),continuous:TA(r)};return m&&(h.create_target_params={partitioned:!0}),function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n}(o,u,h)}(t),i=D.getServerUrl("/_replicator"),a=w(i,o),c=ix(o.source),s=ix(o.target);r({type:qk});var u=function(e){ee.addNotification({msg:e.reason,type:"error",clear:!0})};return a.then((function(e){if(!e.ok)throw e;ee.addNotification({msg:'Replication from "'.concat(decodeURIComponent(c),'" to "').concat(decodeURIComponent(s),'" has been scheduled.'),type:"success",escape:!1,clear:!0}),r(cx(n)),ee.navigate("#/replication")})).catch((function(o){if(o.error&&"not_found"===o.error)return function(){var e=D.getServerUrl("/_replicator");return E(e).then((function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0}))}().then((function(){return e(t,n)(r)})).catch(u);u(o)}))}},cx=function(e){return function(t){var n;t({type:Vk}),(n=e,wA().then((function(e){var t=D.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=".concat(n+1)),r=v(t).then((function(e){if(e.error)return[];var t=e.rows.filter((function(e){return-1===e.id.indexOf("_design/")}));return t.length>n&&t.pop(),t.map((function(e){return e.doc})).map((function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:RA(e.source),target:RA(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/".concat(encodeURIComponent(e._id)),raw:e}}))}));if(!e)return r;var o=AA();return ee.Promise.join(r,o,(function(e,t){return function(e,t){return e.map((function(e){var n=t.find((function(t){return t.doc_id===e._id}));return n?(e.status=jA(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e}))}(e,t)})).catch((function(){return[]}))}))).then((function(e){t({type:Bk,options:e})}))}},sx=function(){return function(e){wA().then((function(t){t&&(e({type:Jk}),wA().then((function(e){if(!e)return[];var t=D.getServerUrl("/_scheduler/jobs");return v(t).then((function(e){return function(e){return e.jobs.filter((function(e){return null===e.database})).map((function(e){return{_id:e.id,source:RA(e.source.slice(0,e.source.length-1)),target:RA(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:jA(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}}))}(e)}))})).then((function(t){e({type:Yk,options:t})})))}))}},ux=function(e){var t={type:sj.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6);try{var r=cj().decode(n);return t.type=sj.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:r.split(":")[0],password:r.split(":")[1]},t}catch(e){throw new Error("Error decoding Authorization header from replication document")}}var o=ee.getExtensions("Replication:Auth"),i=void 0,a=void 0;return o&&o.map((function(t){!i&&t.getCredentials&&(i=t.getCredentials(e),a=t.typeValue)})),i&&(t.type=a,t.creds=i),t},lx=function(){return function(e){wA().then((function(t){e({type:$k,options:t})}))}};function px(e){return px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(e)}function fx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fx(Object(n),!0).forEach((function(t){mx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mx(e,t,n){return(t=function(e){var t=function(e){if("object"!=px(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=px(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==px(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hx=function(e){ne.utils.localStorageSet("replication-activity-sort",e)},yx=function(){var e=ne.utils.localStorageGet("replication-activity-sort");return e||(e={descending:!1,column:"statusTime"}),hx(e),e},bx={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth",targetDatabasePartitioned:"targetDatabasePartitioned"},vx={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:sj.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:sj.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},targetDatabasePartitioned:!1,isConflictModalVisible:!1,replicationType:sj.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:yx(),pageLimit:100},gx=function(e,t,n){var r=dx(dx({},e),{},{submittedNoChange:!1});if(r[bx[t]]=n,t===bx.sourceAuthType||t===bx.replicationSource){var o=r[bx.sourceAuthType]===sj.REPLICATION_AUTH_METHOD.BASIC,i=r[bx.replicationSource]===sj.REPLICATION_SOURCE.LOCAL,a=!r[bx.sourceAuth]||!r[bx.sourceAuth].username;o&&i&&a&&(r[bx.sourceAuth]={username:ee.session.user().name,password:""})}else if(t===bx.targetAuthType||t===bx.replicationTarget){var c=r[bx.targetAuthType]===sj.REPLICATION_AUTH_METHOD.BASIC,s=r[bx.replicationTarget]===sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r[bx.replicationTarget]===sj.REPLICATION_TARGET.NEW_LOCAL_DATABASE,u=!r[bx.targetAuth]||!r[bx.targetAuth].username;c&&s&&u&&(r[bx.targetAuth]={username:ee.session.user().name,password:""})}return t===bx.replicationSource&&r[bx.replicationSource]===sj.REPLICATION_SOURCE.LOCAL&&r.databases.length>0&&(r[bx.localSource]=r.databases[0]),t===bx.replicationTarget&&r[bx.replicationTarget]===sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&r.databases.length>0&&(r[bx.localTarget]=r.databases[0]),r},_x=function(e){return e.activityLoading},wx=function(e){return e.databases},Ex=function(e){return e.replicationSource},Ox=function(e){return e.localSource},Sx=function(e){return-1!==_.indexOf(e.databases,e.localSource)},Dx=function(e){return e.remoteSource},Nx=function(e){return e.replicationTarget},Px=function(e){return e.localTarget},Cx=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},Tx=function(e){return e.remoteTarget},Rx=function(e){return e.isConflictModalVisible},jx=function(e){return e.replicationType},Ax=function(e){return e.replicationDocName},kx=function(e){return e.submittedNoChange},xx=function(e){return e.statusDocs.filter((function(t){return Object.values(t).filter((function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null})).length>0}))},Ix=function(e){return e.statusFilter},Lx=function(e){return e.replicateFilter},Mx=function(e){return e.allDocsSelected},Ux=function(e){return xx(e).some((function(e){return e.selected}))},qx=function(e){return e.username},Bx=function(e){return e.password},Vx=function(e){return e.activitySort},Fx=function(e){return e.checkingAPI},Kx=function(e){return e.supportNewApi},Hx=function(e){return e.fetchingReplicateInfo},zx=function(e){return e.allReplicateSelected},Gx=function(e){return Wx(e).some((function(e){return e.selected}))},Wx=function(e){return e.replicateInfo.filter((function(t){return Object.values(t).filter((function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)})).length>0}))},Xx=function(e){return e.pageLimit};const Qx=(0,oe.Ng)((function(e,t){var n,r=e.replication;return{allowNewPartitionedLocalDbs:e.databases.partitionedDatabasesAvailable,routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(n=r,n.isLoading),activityLoading:_x(r),databases:wx(r),replicationSource:Ex(r),localSource:Ox(r),localSourceKnown:Sx(r),remoteSource:Dx(r),sourceAuthType:r.sourceAuthType,sourceAuth:r.sourceAuth,replicationTarget:Nx(r),localTarget:Px(r),localTargetKnown:Cx(r),remoteTarget:Tx(r),targetAuthType:r.targetAuthType,targetAuth:r.targetAuth,targetDatabasePartitioned:r.targetDatabasePartitioned,isConflictModalVisible:Rx(r),replicationType:jx(r),replicationDocName:Ax(r),submittedNoChange:kx(r),statusDocs:xx(r),statusFilter:Ix(r),replicateFilter:Lx(r),allDocsSelected:Mx(r),someDocsSelected:Ux(r),username:qx(r),password:Bx(r),activitySort:Vx(r),checkingApi:Fx(r),supportNewApi:Kx(r),replicateLoading:Hx(r),replicateInfo:Wx(r),allReplicateSelected:zx(r),someReplicateSelected:Gx(r),pageLimit:Xx(r)}}),(function(e){return{checkForNewApi:function(){return e(lx())},updateFormField:function(t){return function(n){e(function(e,t){return{type:Mk,options:{fieldName:e,value:t}}}(t,n))}},clearReplicationForm:function(){return e({type:Uk})},initReplicator:function(t){return e((n=t,function(e){n&&void 0!==n&&e({type:Ik,options:{localSource:n}})}));var n},getReplicationActivity:function(t){return e(cx(t))},getReplicateActivity:function(){return e(sx())},getReplicationStateFrom:function(t){return e(function(e){return function(t){t({type:rx});var n=D.getServerUrl("/_replicator/".concat(encodeURIComponent(e)));v(n).then((function(e){var n={replicationDocName:e._id,replicationType:e.continuous?sj.REPLICATION_TYPE.CONTINUOUS:sj.REPLICATION_TYPE.ONE_TIME},r=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(r.indexOf(window.location.hostname)>-1){var i=new URL(r);n.replicationSource=sj.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(i.pathname.slice(1))}else n.replicationSource=sj.REPLICATION_SOURCE.REMOTE,n.remoteSource=OA(r);var a=ux(e.source);if(n.sourceAuthType=a.type,n.sourceAuth=a.creds,o.indexOf(window.location.hostname)>-1){var c=new URL(o);n.replicationTarget=sj.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(c.pathname.slice(1))}else n.replicationTarget=sj.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=OA(o);var s,u=ux(e.target);n.targetAuthType=u.type,n.targetAuth=u.creds,n.targetDatabasePartitioned=!(!(s=e.create_target_params)||!0!==s.partitioned),t({type:zk,options:n})})).catch((function(e){ee.addNotification({msg:e.reason||e.message,type:"error",clear:!0})}))}}(t))},getDatabasesList:function(){return e((function(e){var t=D.getServerUrl("/_all_dbs");v(t).then((function(t){e({type:Lk,options:{databases:t}})}))}))},replicate:function(t,n){return e(ax(t,n))},showConflictModal:function(){return e({type:Gk})},hideConflictModal:function(){return e({type:Wk})},filterReplicate:function(t){return e(function(e){return{type:Zk,options:e}}(t))},filterDocs:function(t){return e(function(e){return{type:Fk,options:e}}(t))},selectDoc:function(t){return e({type:Hk,options:t})},deleteDocs:function(t,n){return e(function(e,t){return function(n){var r=e.map((function(e){var t=e.raw;return t._deleted=!0,t}));ee.addNotification({msg:"Deleting doc".concat(r.length>1?"s":"","."),type:"success",escape:!1,clear:!0});var o=D.getServerUrl("/_replicator/_bulk_docs");w(o,{docs:r},{raw:!0}).then((function(e){if(!e.ok)throw e;return e})).then((function(){var r="The selected documents have been deleted.";1===e.length&&(r='Document "'.concat(e[0]._id,'" has been deleted')),ee.addNotification({msg:r,type:"success",escape:!1,clear:!0}),n({type:Qk}),n(cx(t))})).catch((function(e){e.json().then((function(e){ee.addNotification({msg:e.reason,type:"error",clear:!0})}))}))}}(t,n))},selectAllDocs:function(){return e({type:Kk})},changeActivitySort:function(t){return e(function(e){return{type:Xk,options:e}}(t))},selectAllReplicates:function(){return e({type:ex})},deleteReplicates:function(t){return e(function(e){return function(t){ee.addNotification({msg:"Deleting _replicate".concat(e.length>1?"s":"","."),type:"success",escape:!1,clear:!0}),function(e){var t=e.map((function(e){var t={replication_id:e._id,cancel:!0},n=D.getServerUrl("/_replicate");return w(n,t)}));return ee.Promise.all(t)}(e).then((function(){var n="The selected replications have been deleted.";1===e.length&&(n='Replication "'.concat(e[0]._id,'" has been deleted')),t({type:nx}),t(sx()),ee.addNotification({msg:n,type:"success",escape:!1,clear:!0})}),(function(e){var t=JSON.parse(e.responseText);ee.addNotification({msg:t.reason,type:"error",clear:!0})}))}}(t))},selectReplicate:function(t){return e({type:tx,options:t})},setPageLimit:function(t){return e(function(e){return function(t){t({type:ox,options:e}),cx(e)(t)}}(t))}}}))(xk),Jx={RouteObjects:[ee.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return re.createElement(Qx,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return re.createElement(Qx,{replicationId:e,section:"new replication"})},activityView:function(){return re.createElement(Qx,{section:"activity"})},replicateView:function(){return re.createElement(Qx,{section:"_replicate"})}})],initialize:function(){ee.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),ee.session.isAuthenticated().then((function(){lx()}))}};ee.addReducers({replication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vx,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case Ik:var o=dx(dx({},e),{},{loading:!0});return r.localSource&&(o.localSource=r.localSource,o.replicationSource=sj.REPLICATION_SOURCE.LOCAL,o.remoteSource="",o.replicationTarget="",o.localTarget="",o.remoteTarget=""),o;case Lk:return dx(dx({},e),{},{loading:!1,databases:r.databases});case rx:return dx(dx({},e),{},{loading:!0});case Mk:return gx(e,r.fieldName,r.value);case Uk:return function(e){var t=dx({},e);return Object.values(bx).forEach((function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:"targetDatabasePartitioned"!==e&&""})),t.sourceAuthType=sj.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=sj.REPLICATION_AUTH_METHOD.NO_AUTH,t}(e);case qk:return dx(dx({},e),{},{submittedNoChange:!0});case Vk:return dx(dx({},e),{},{activityLoading:!0});case Bk:return dx(dx({},e),{},{activityLoading:!1,statusDocs:r});case Fk:return dx(dx({},e),{},{statusFilter:r});case Zk:return dx(dx({},e),{},{replicateFilter:r});case Hk:return function(e,t){var n=e.statusDocs.find((function(e){return e._id===t}));return n?(n.selected=!n.selected,dx(dx({},e),{},{allDocsSelected:!1})):e}(e,r);case Kk:return function(e){var t=dx(dx({},e),{},{allDocsSelected:!e.allDocsSelected});return xx(t).forEach((function(e){return e.selected=t.allDocsSelected})),t}(e);case tx:return function(e,t){var n=dx({},e),r=n._replicateInfo.find((function(e){return e._id===t}));if(!r)return n;r.selected=!r.selected,n._allReplicateSelected=!1}(e,r);case ex:return function(e){var t=dx(dx({},e),{},{allReplicateSelected:!e.allReplicateSelected});return Wx(t).forEach((function(e){return e.selected=t.allReplicateSelected})),t}(e);case zk:return function(e,t){var n=dx(dx({},e),{},{loading:!1});return Object.keys(t).reduce((function(e,n){return gx(e,n,t[n])}),n)}(e,r);case Gk:return dx(dx({},e),{},{isConflictModalVisible:!0});case Wk:return dx(dx({},e),{},{isConflictModalVisible:!1});case Xk:return hx(r),dx(dx({},e),{},{activitySort:yx()});case Qk:return dx(dx({},e),{},{allDocsSelected:!1});case"REPLICATION_CHANGE_TAB_SECTION":return dx(dx({},e),{},{tabSection:r});case $k:return dx(dx({},e),{},{checkingApi:!1,supportNewApi:r});case Jk:return dx(dx({},e),{},{fetchingReplicateInfo:!0});case Yk:return dx(dx({},e),{},{fetchingReplicateInfo:!1,replicateInfo:r});case nx:return dx(dx({},e),{},{allReplicateSelected:!1});case ox:return dx(dx({},e),{},{pageLimit:r});default:return e}}}),ee.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return D.getApiUrl("/_replicator")}});const Yx=Jx,$x="SEARCH_INDEX_DESIGN_DOCS_LOADED",Zx="SEARCH_INDEX_INIT",eI="SEARCH_INDEX_SET_NAME",tI="SEARCH_INDEX_SET_ANALYZER_TYPE",nI="SEARCH_INDEX_ADD_ANALYZER_ROW",rI="SEARCH_INDEX_REMOVE_ANALYZER_ROW",oI="SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME",iI="SEARCH_INDEX_SET_ANALYZER_ROW",aI="SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER",cI="SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX",sI="SEARCH_INDEX_PREVIEW_MODEL_UPDATED",uI="SEARCH_INDEX_PREVIEW_REQUEST_MADE",lI="PREVIEW_MODEL_REQUEST_ERROR",pI="SEARCH_INDEX_SELECT_DESIGN_DOC",fI="SEARCH_INDEX_SET_SINGLE_ANALYZER",dI="SEARCH_INDEX_SET_SEARCH_QUERY",mI="SEARCH_INDEX_SET_LOADING",hI="SEARCH_INDEX_CLEAR",yI="SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED",bI="SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED",vI="SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED",gI="SEARCH_INDEX_PARTITION_PARAM_MANDATORY",_I="single",wI="multiple",EI="newSearch",OI="single",SI="standard",DI='function (doc) {\n  index("name", doc.name);\n}',NI=[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}},{label:"Single field (text)",code:{index:{fields:[{name:"foo",type:"string"}]},name:"foo-text",type:"text"}},{label:"All fields (text)",code:{index:{default_field:{enabled:!1},index_array_lengths:!1},name:"all-text",type:"text"}},{label:"All fields with default field (text)",code:{index:{index_array_lengths:!1},name:"all-text",type:"text"}}];function PI(e){return PI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PI(e)}var CI={};CI.Doc=yc.Doc.extend({setIndex:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("indexes");return r||(r={}),r[e]||(r[e]={}),n&&(r[e].analyzer=n),r[e].index=t,this.set({indexes:r})},getIndex:function(e){return this.get("indexes")[e].index},getAnalyzer:function(e){return this.get("indexes")[e].analyzer},analyzerType:function(e){return"object"===PI(this.getAnalyzer(e))?wI:_I},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new CI.Doc(e,{database:this.database})}}),CI.AllDocs=yc.AllDocs.extend({model:CI.Doc});const TI=CI;var RI=function(e,t,n,r,o,i){return i({type:uI}),function(e,t,n,r,o){var i=function(e,t,n,r,o){var i=t?encodeURIComponent(t):"";return ee.urls("search","server",encodeURIComponent(e),i,encodeURIComponent(n),encodeURIComponent(r),"?limit=10&q="+encodeURIComponent(o))}(e,t,n,r,o);return v(i).then((function(e){if(e.error)throw new Error(e.reason);return e.rows}))}(e,t,n,r,o).then((function(e){i({type:sI,options:{searchResults:e}})})).catch((function(t){i({type:lI}),t&&-1!==t.message.indexOf("`partition` not supported")?i(jI()):t&&-1!==t.message.indexOf("`partition` parameter is mandatory")?i(AI()):ee.addNotification({msg:"Search failed: "+t.message,type:"error",clear:!0}),-1!==t.message.indexOf("not found")&&ee.navigate(ee.urls("allDocsSanitized","app",e),{trigger:!0})}))},jI=function(){return{type:vI}},AI=function(){return{type:gI}};const kI={dispatchInitNewSearchIndex:function(e){ee.reduxDispatch({type:hI}),ee.reduxDispatch({type:mI,options:{loading:!0}}),e.designDocs.fetch().then((function(){ee.reduxDispatch({type:$x,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},dispatchInitSearchIndex:function(e){if(ee.reduxDispatch({type:mI,options:{loading:!0}}),ee.reduxDispatch({type:Zx,options:{databaseName:e.databaseName,partitionKey:e.partitionKey,ddocName:e.designDoc,indexName:e.indexName,searchQuery:e.query?e.query:""}}),e.query)return RI(e.databaseName,e.partitionKey,e.designDoc,e.indexName,e.query,ee.reduxDispatch)},dispatchEditSearchIndex:function(e){var t=e.database,n=e.ddocID,r=e.designDocs,o=e.indexName;ee.reduxDispatch({type:mI,options:{loading:!0}}),r.fetch().then((function(e){var i=e.rows.find((function(e){return e._id===n})).doc;if(!i.indexes||!i.indexes[o])throw Error('Index "'.concat(o,'" not found'));ee.reduxDispatch({type:cI,options:{indexName:o,database:t,ddocID:n,designDocs:r}})})).catch((function(e){var t=e.message?e.message:"";ee.addNotification({msg:'There was a problem editing the search index "'.concat(o,'". ')+t,type:"error",clear:!0})}))},selectTab:function(e){return function(t){t({type:"SEARCH_INDEX_SELECT_TAB",options:{tab:e}})}},setSearchIndexName:function(e){return function(t){t({type:eI,options:{value:e}})}},setAnalyzerType:function(e){return function(t){t({type:tI,options:{value:e}})}},addAnalyzerRow:function(e){return function(t){t({type:nI,options:{analyzer:e}})}},removeAnalyzerRow:function(e){return function(t){t({type:rI,options:{rowIndex:e}})}},setAnalyzerRowFieldName:function(e){return function(t){t({type:oI,options:{rowIndex:e.rowIndex,fieldName:e.fieldName}})}},setAnalyzer:function(e){return function(t){t({type:iI,options:{rowIndex:e.rowIndex,analyzer:e.analyzer}})}},setDefaultMultipleAnalyzer:function(e){return function(t){t({type:aI,options:{analyzer:e}})}},selectDesignDoc:function(e){return function(t){t({type:pI,options:{value:e}})}},saveSearchIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction,t.analyzerInfo),t.lastSavedDesignDocName===e.id&&t.lastSavedSearchIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedSearchIndexName],e.set({indexes:r})}e.save().then((function(){if(t.designDocs.add(e,{merge:!0}),ee.addNotification({msg:"The search index has been saved.",type:"success",clear:!0}),!t.isCreatingIndex&&t.lastSavedDesignDocName!==e.id){var r=xl.helpers.findDesignDoc(t.designDocs,t.lastSavedDesignDocName);xl.safeDeleteIndex(r,t.designDocs,"indexes",t.lastSavedSearchIndexName,{onSuccess:function(){Cu(t.designDocs)}})}Cu(t.designDocs),ee.navigate(n,{trigger:!0})}),(function(e){var t=JSON.parse(e.responseText).reason;ee.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},cloneSearchIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,indexes:{},language:"javascript"};return new TI.Doc(o,{database:r})}var i=e.find((function(e){return e.id===t}));return i?i.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("indexes");if(n&&_.has(n,e.newIndexName))ee.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=xl.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.indexes[e.sourceIndexName],t.set({indexes:n}),t.save().then((function(){e.onComplete(),ee.addNotification({msg:"The search index has been cloned.",type:"success",clear:!0}),Cu(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;ee.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},deleteSearchIndex:function(e){xl.safeDeleteIndex(e.designDoc,e.designDocs,"indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=ee.urls("allDocs","app",e.database.safeID());ee.navigate(t)}Cu(e.designDocs),ee.addNotification({msg:'The "'+e.indexName+'" search index has been deleted.',type:"info",escape:!1,clear:!0}),Tu()}})},gotoEditSearchIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";ee.navigate("#"+ee.urls("search","edit",encodeURIComponent(e),o,encodeURIComponent(n),encodeURIComponent(r)))},querySearch:function(e,t,n,r,o){var i=encodeURIComponent(e),a=encodeURIComponent(t),c=encodeURIComponent(n),s=encodeURIComponent(r),u=encodeURIComponent(o),l=t?ee.urls("partitioned_search","app",i,a,c,s):ee.urls("search","app",i,c,s);ee.navigate("".concat(l).concat(s,"?").concat(u),{trigger:!0})},setSearchQuery:function(e){return function(t){t({type:dI,options:{query:e}})}},setSingleAnalyzer:function(e){return function(t){t({type:fI,options:{analyzer:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:yI,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:bI,options:{value:e}})}},partitionParamNotSupported:jI,partitionParamIsMandatory:AI};function xI(e){return xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xI(e)}function II(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FI(r.key),r)}}function LI(e,t){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},LI(e,t)}function MI(e){var t=qI();return function(){var n,r=BI(e);if(t){var o=BI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UI(e)}(this,n)}}function UI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qI=function(){return!!e})()}function BI(e){return BI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BI(e)}function VI(e,t,n){return(t=FI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FI(e){var t=function(e){if("object"!=xI(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xI(t)?t:t+""}var KI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LI(e,t)}(n,e);var t=MI(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return VI(UI(e=t.call.apply(t,[this].concat(o))),"querySearch",(function(t){if(t.preventDefault(),""===e.props.searchQuery.trim())return ee.addNotification({msg:"Please enter a search term.",type:"error",clear:!0}),void e.searchInput.focus();var n=e.props,r=n.databaseName,o=n.partitionKey,i=n.ddocName,a=n.indexName,c=n.searchQuery;e.props.querySearch(r,o,i,a,c)})),VI(UI(e),"getRows",(function(){var t=encodeURIComponent(e.props.databaseName);return e.props.searchResults.map((function(n){var r={header:n.id,content:JSON.stringify(n,null,"  "),url:ee.urls("document","app",t,encodeURIComponent(n.id))};return re.createElement(fi.Document,{key:n.id,keylabel:"id:",doc:r,header:n.id,isDeletable:!1,docContent:r.content,onClick:e.onClick,docChecked:function(){},docIdentifier:n.id})}))})),VI(UI(e),"onClick",(function(e,t){t.url&&ee.navigate(t.url)})),VI(UI(e),"onType",(function(t){e.props.setSearchQuery(t.target.value)})),VI(UI(e),"getResults",(function(){return e.props.hasActiveQuery?re.createElement(fi.LoadLines,null):e.props.noResultsWarning?re.createElement("div",{"data-select":"search-result-set"},e.props.noResultsWarning):!!e.props.searchResults&&(0===e.props.searchResults.length?re.createElement("div",{"data-select":"search-result-set"},"No results found."):re.createElement("div",{id:"doc-list","data-select":"search-result-set"},e.getRows()))})),e}return function(e,t){t&&II(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.searchInput.focus()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){var e=this,t=this.props.hasActiveQuery?"Querying...":"Run Query";return re.createElement("div",null,re.createElement("form",{id:"search-index-preview-form"},re.createElement("div",{className:"row gx-3"},re.createElement("div",{className:"mb-3 mb-lg-0 col-12 col-lg-8 col-xl-4"},re.createElement(nt.A.Control,{type:"text",ref:function(t){return e.searchInput=t},placeholder:"Enter your search query",onChange:this.onType,value:this.props.searchQuery})),re.createElement("div",{className:"col-12 col-lg"},re.createElement(de.A,{type:"submit",variant:"cf-primary",id:"search-index-query-button",disabled:this.props.hasActiveQuery,onClick:this.querySearch},t),re.createElement("a",{className:"help-link","data-bypass":"true",href:ee.constants.DOC_URLS.SEARCH_INDEX_QUERIES,target:"_blank",rel:"noopener noreferrer"},re.createElement("i",{className:"fonticon-help-circled"}))))),this.getResults())}}]),n}(re.Component);VI(KI,"propTypes",{hasActiveQuery:fe().bool.isRequired,searchQuery:fe().string.isRequired,searchPerformed:fe().bool.isRequired,querySearch:fe().func.isRequired,setSearchQuery:fe().func.isRequired,searchResults:fe().array});const HI=(0,oe.Ng)((function(e){var t=e.search;return{databaseName:t.databaseName,partitionKey:t.partitionKey,ddocName:t.ddocName,indexName:t.indexName,hasActiveQuery:t.hasActiveQuery,searchQuery:t.searchQuery,searchPerformed:t.searchPerformed,searchResults:t.searchResults,noResultsWarning:t.noResultsWarning}}),(function(e){return{querySearch:function(e,t,n,r,o){kI.querySearch(e,t,n,r,o)},setSearchQuery:function(t){e(kI.setSearchQuery(t))}}}))(KI);var zI=n(3791);function GI(e){return GI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GI(e)}function WI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eL(r.key),r)}}function XI(e,t){return XI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},XI(e,t)}function QI(e){var t=YI();return function(){var n,r=$I(e);if(t){var o=$I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==GI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JI(e)}(this,n)}}function JI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YI=function(){return!!e})()}function $I(e){return $I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$I(e)}function ZI(e,t,n){return(t=eL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eL(e){var t=function(e){if("object"!=GI(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=GI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==GI(t)?t:t+""}var tL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XI(e,t)}(n,e);var t=QI(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ZI(JI(e=t.call.apply(t,[this].concat(o))),"getAnalyzers",(function(){return["Standard","Keyword","Simple","Whitespace","Classic","Email"].map((function(e){return re.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),ZI(JI(e),"getLanguages",(function(){return["Arabic","Armenian","Basque","Bulgarian","Brazilian","Catalan","Cjk","Chinese","Czech","Danish","Dutch","English","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Japanese","Latvian","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Spanish","Swedish","Thai","Turkish"].map((function(e){return re.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),ZI(JI(e),"getLabel",(function(){return""===e.props.label?null:re.createElement("label",{htmlFor:e.props.id},e.props.label)})),e}return function(e,t){t&&WI(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=re.createElement("optgroup",{label:"Language-specific",key:"languages"},this.getLanguages());return re.createElement("div",{className:this.props.classes},this.getLabel(),re.createElement(nt.A.Select,{onChange:this.props.onChange,value:this.props.defaultSelected,id:this.props.id},[this.getAnalyzers(),e]))}}]),n}(re.Component);function nL(e){return nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nL(e)}function rL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lL(r.key),r)}}function oL(e,t){return oL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oL(e,t)}function iL(e){var t=cL();return function(){var n,r=sL(e);if(t){var o=sL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==nL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aL(e)}(this,n)}}function aL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cL=function(){return!!e})()}function sL(e){return sL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sL(e)}function uL(e,t,n){return(t=lL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lL(e){var t=function(e){if("object"!=nL(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nL(t)?t:t+""}ZI(tL,"defaultProps",{defaultSelected:"standard",label:"Type",id:"analyzer-default",classes:"",onChange:function(){}}),ZI(tL,"propTypes",{defaultSelected:fe().string.isRequired,label:fe().string.isRequired,id:fe().string.isRequired,classes:fe().string.isRequired,onChange:fe().func.isRequired});var pL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oL(e,t)}(n,e);var t=iL(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return uL(aL(e=t.call.apply(t,[this].concat(o))),"deleteRow",(function(t){t.preventDefault(),e.props.removeAnalyzerRow(e.props.rowIndex)})),uL(aL(e),"getFieldNameHeading",(function(t){return 0===e.props.rowIndex&&re.createElement("label",{htmlFor:t},"Field name")})),uL(aL(e),"changeFieldName",(function(t){e.props.setAnalyzerRowFieldName({rowIndex:e.props.rowIndex,fieldName:t.target.value})})),uL(aL(e),"selectAnalyzer",(function(t){e.props.setAnalyzer({rowIndex:e.props.rowIndex,analyzer:t.target.value})})),e}return function(e,t){t&&rL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e="analyzer-row-"+this.props.rowIndex,t=0===this.props.rowIndex?"Analyzer":"",n="";return this.props.showErrors&&!this.props.row.valid&&(n="is-invalid"),re.createElement("div",{className:"row align-items-end"},re.createElement("div",{className:"mb-3 col col-lg"},this.getFieldNameHeading(e),re.createElement(nt.A.Control,{type:"text",value:this.props.row.fieldName,className:n,onChange:this.changeFieldName})),re.createElement("div",{className:"mb-3 col-auto col-lg"},re.createElement(tL,{id:e,label:t,defaultSelected:this.props.row.analyzer,onChange:this.selectAnalyzer})),re.createElement("div",{className:"mb-3 col-auto col-lg-auto"},re.createElement(de.A,{variant:"cf-danger",onClick:this.deleteRow},"delete")))}}]),n}(re.Component);function fL(e){return fL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fL(e)}function dL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_L(r.key),r)}}function mL(e,t){return mL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mL(e,t)}function hL(e){var t=bL();return function(){var n,r=vL(e);if(t){var o=vL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==fL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yL(e)}(this,n)}}function yL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bL=function(){return!!e})()}function vL(e){return vL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vL(e)}function gL(e,t,n){return(t=_L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _L(e){var t=function(e){if("object"!=fL(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fL(t)?t:t+""}uL(pL,"propTypes",{rowIndex:fe().number.isRequired,row:fe().object.isRequired,showErrors:fe().bool.isRequired,removeAnalyzerRow:fe().func.isRequired,setAnalyzerRowFieldName:fe().func.isRequired,setAnalyzer:fe().func.isRequired});var wL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mL(e,t)}(n,e);var t=hL(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),gL(yL(r=t.call(this,e)),"addRow",(function(e){e.preventDefault(),r.props.addAnalyzerRow(r.props.defaultAnalyzer)})),gL(yL(r),"getRows",(function(){return r.props.fields.map((function(e,t){return re.createElement(pL,{row:e,key:e.key,rowIndex:t,showErrors:r.state.showErrors,setAnalyzer:r.props.setAnalyzer,setAnalyzerRowFieldName:r.props.setAnalyzerRowFieldName,removeAnalyzerRow:r.props.removeAnalyzerRow})}))})),gL(yL(r),"validate",(function(){r.setState({showErrors:!0});var e=!1,t=[],n=r.props.fields.every((function(n){return-1!==t.indexOf(n.fieldName)&&(e=!0),t.push(n.fieldName),n.valid}))&&!e;return n||ee.addNotification({msg:"Field names cannot be empty and must be unique.",type:"error",clear:!0}),n})),r.state={showErrors:!1},r}return function(e,t){t&&dL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",null,re.createElement(tL,{label:"Default",id:"defaultAnalyzer",classes:"mb-3",defaultSelected:this.props.defaultAnalyzer,onChange:this.props.selectDefaultMultipleAnalyzer,isValidating:this.validate}),re.createElement("div",null,this.getRows()),re.createElement(de.A,{className:"addfield",variant:"cf-secondary",onClick:this.addRow},"Add Field"))}}]),n}(re.Component);function EL(e){return EL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EL(e)}function OL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RL(r.key),r)}}function SL(e,t){return SL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SL(e,t)}function DL(e){var t=PL();return function(){var n,r=CL(e);if(t){var o=CL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==EL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NL(e)}(this,n)}}function NL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PL=function(){return!!e})()}function CL(e){return CL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CL(e)}function TL(e,t,n){return(t=RL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RL(e){var t=function(e){if("object"!=EL(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=EL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==EL(t)?t:t+""}gL(wL,"propTypes",{addAnalyzerRow:fe().func.isRequired,defaultAnalyzer:fe().string.isRequired,selectDefaultMultipleAnalyzer:fe().func.isRequired,fields:fe().array.isRequired});var jL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SL(e,t)}(n,e);var t=DL(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return TL(NL(e=t.call.apply(t,[this].concat(o))),"selectAnalyzerType",(function(t){e.props.setAnalyzerType(t)})),TL(NL(e),"validate",(function(){return e.props.analyzerType===_I||e.analyzerMultiple.validate()})),TL(NL(e),"getAnalyzerFieldsAsObject",(function(){return e.props.analyzerFields.reduce((function(e,t){return e[t.fieldName.replace(/["']/g,"")]=t.analyzer,e}),{})})),TL(NL(e),"getInfo",(function(){return e.props.analyzerType===_I?e.props.singleAnalyzer:{name:"perfield",default:e.props.defaultMultipleAnalyzer,fields:e.getAnalyzerFieldsAsObject()}})),TL(NL(e),"selectSingleAnalyzer",(function(t){e.props.setSingleAnalyzer(t.target.value)})),TL(NL(e),"selectDefaultMultipleAnalyzer",(function(t){e.props.setDefaultMultipleAnalyzer(t.target.value)})),TL(NL(e),"getAnalyzerType",(function(){return e.props.analyzerType===_I?re.createElement(tL,{label:"Type",defaultSelected:e.props.singleAnalyzer,onChange:e.selectSingleAnalyzer}):re.createElement(wL,{ref:function(t){return e.analyzerMultiple=t},defaultAnalyzer:e.props.defaultMultipleAnalyzer,selectDefaultMultipleAnalyzer:e.selectDefaultMultipleAnalyzer,fields:e.props.analyzerFields,addAnalyzerRow:e.props.addAnalyzerRow,removeAnalyzerRow:e.props.removeAnalyzerRow,setAnalyzerRowFieldName:e.props.setAnalyzerRowFieldName,setAnalyzer:e.props.setAnalyzer})})),e}return function(e,t){t&&OL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this;return re.createElement(zI.A,{className:"mb-3 col-12 col-xxl-8"},re.createElement(zI.A.Body,null,re.createElement("div",{className:"row"},re.createElement("div",{className:"mb-3 col-12"},re.createElement("label",null,"Analyzer"),re.createElement("div",{className:"search-analyzer-type-selector"},re.createElement(Ds.A,{"aria-label":"analyzer type selector"},re.createElement(de.A,{type:"button",id:"single-analyzer",active:this.props.analyzerType===_I,onClick:function(){e.selectAnalyzerType(_I)},variant:"cf-secondary"},"Single"),re.createElement(de.A,{type:"button",id:"multiple-analyzer",active:this.props.analyzerType===wI,onClick:function(){e.selectAnalyzerType(wI)},variant:"cf-secondary"},"Multiple"))))),this.getAnalyzerType()))}}]),n}(re.Component);function AL(e){return AL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AL(e)}function kL(){return kL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kL.apply(null,arguments)}function xL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VL(r.key),r)}}function IL(e,t){return IL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IL(e,t)}function LL(e){var t=UL();return function(){var n,r=qL(e);if(t){var o=qL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==AL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ML(e)}(this,n)}}function ML(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UL=function(){return!!e})()}function qL(e){return qL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qL(e)}function BL(e,t,n){return(t=VL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VL(e){var t=function(e){if("object"!=AL(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=AL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==AL(t)?t:t+""}TL(jL,"propTypes",{analyzerType:fe().string.isRequired,analyzerFields:fe().array.isRequired,defaultMultipleAnalyzer:fe().string.isRequired,singleAnalyzer:fe().string.isRequired,setAnalyzerType:fe().func.isRequired,setSingleAnalyzer:fe().func.isRequired,setDefaultMultipleAnalyzer:fe().func.isRequired,addAnalyzerRow:fe().func.isRequired});var FL=Wl.DesignDocSelector,KL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IL(e,t)}(n,e);var t=LL(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return BL(ML(e=t.call.apply(t,[this].concat(o))),"updateSearchIndexName",(function(t){e.props.setSearchIndexName(t.target.value)})),BL(ML(e),"saveIndex",(function(t){if(t.preventDefault(),e.designDocSelector.validate()&&e.analyzer.validate())if(e.props.searchIndexName.trim()){var n=e.props.saveDoc.id.replace(/_design\//,""),r=e.props.partitionKey?encodeURIComponent(e.props.partitionKey):"",o=ee.urls("search","fragment",encodeURIComponent(e.props.database.id),r,encodeURIComponent(n),encodeURIComponent(e.props.searchIndexName));e.props.saveSearchIndex(e.props.saveDoc,{isCreatingIndex:e.props.isCreatingIndex,indexName:e.props.searchIndexName,designDocs:e.props.designDocs,database:e.props.database,indexFunction:e.getIndexFunction(),analyzerInfo:e.analyzer.getInfo(),lastSavedSearchIndexName:e.props.lastSavedSearchIndexName,lastSavedDesignDocName:e.props.lastSavedDesignDocName},o)}else ee.addNotification({msg:"Please enter the index name.",type:"error",clear:!0})})),BL(ML(e),"getIndexFunction",(function(){return e.searchIndexEditor.getValue()})),BL(ML(e),"getDesignDocList",(function(){return e.props.designDocs.map((function(e){return e.id}))})),e}return function(e,t){t&&xL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if(!this.props.lastSavedDesignDocName||this.props.isCreatingIndex)return"#"+ee.urls("allDocs","app",e,t);var n=ne.utils.getSafeIdForDoc(this.props.lastSavedDesignDocName),r=encodeURIComponent(this.props.lastSavedSearchIndexName);return"#"+ee.urls("search","showIndex",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return re.createElement("div",{className:"search-index-page-loading"},re.createElement(fi.LoadLines,null));if(!this.props.database)return null;var t=this.props.isCreatingIndex?"New Search Index":"Edit Search Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return re.createElement("form",{id:"search-index"},re.createElement("h3",{className:"simple-header"},t),re.createElement(FL,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.getDesignDocList(),isDbPartitioned:this.props.isDbPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,selectedDesignDocName:this.props.ddocName,selectedDesignDocPartitioned:this.props.ddocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:ne.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),re.createElement("div",{className:"row"},re.createElement("div",{className:"mb-3 col-12 col-lg-6 col-xxl-4  "},re.createElement("label",{htmlFor:"search-name"},"Index name"),re.createElement(nt.A.Control,{type:"text",id:"search-name",value:this.props.searchIndexName,onChange:this.updateSearchIndexName}))),re.createElement(fi.CodeEditorPanel,{id:"search-function",className:"ace-editor-section mb-3",ref:function(t){return e.searchIndexEditor=t},title:"Search index function",allowZenMode:!1,docLink:ne.helpers.getDocUrl("SEARCH_INDEXES"),defaultCode:this.props.searchIndexFunction,blur:this.props.blur}),re.createElement(jL,kL({ref:function(t){return e.analyzer=t}},this.props)),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12"},re.createElement(de.A,{id:"save-index",variant:"cf-primary",onClick:this.saveIndex},re.createElement("i",{className:"fonticon-ok-circled"}),n),re.createElement(de.A,{href:this.getCancelLink(),variant:"cf-cancel",className:"index-cancel-link"},"Cancel"))))}}]),n}(re.Component);function HL(e){return HL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HL(e)}function zL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zL(Object(n),!0).forEach((function(t){WL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WL(e,t,n){return(t=function(e){var t=function(e){if("object"!=HL(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=HL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==HL(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}BL(KL,"defaultProps",{isCreatingIndex:!0,blur:function(){},isLoading:!0}),BL(KL,"propTypes",{isLoading:fe().bool,isCreatingIndex:fe().bool,database:fe().object.isRequired,saveDoc:fe().object.isRequired,newDesignDocName:fe().string,blur:fe().func,setSearchIndexName:fe().func.isRequired,searchIndexFunction:fe().string.isRequired,saveSearchIndex:fe().func.isRequired,selectDesignDoc:fe().func.isRequired,updateNewDesignDocName:fe().func.isRequired});var XL=GL({designDocs:new Backbone.Collection,database:{},loading:!0,ddocName:"new-doc",partitionKey:"",indexName:"",databaseName:""},YL()),QL=[];function JL(){function e(){return Math.random().toString(36).substring(7)}for(var t=e();-1!==QL.indexOf(t);)t=e();return QL.push(t),t}function YL(){return{noResultsWarning:"",hasActiveQuery:!1,searchQuery:"",searchResults:void 0,searchPerformed:!1,newDesignDocName:"",newDesignDocPartitioned:!0,lastSavedSearchIndexName:"",searchIndexFunction:DI,searchIndexName:EI,analyzerType:OI,analyzerFields:[],singleAnalyzer:SI,defaultMultipleAnalyzer:SI}}function $L(e,t){var n=t.analyzer,r=t.fieldName,o=e.analyzerFields.slice();return o.push({key:JL(),fieldName:r||"",analyzer:n,valid:r&&r.trim().length>0}),o}function ZL(e,t){var n=e.analyzerFields.slice();return t=parseInt(t,10),n.splice(t,1),n}function eM(e,t){var n=t.fieldName,r=t.rowIndex,o=e.analyzerFields.slice(),i=parseInt(r,10);return o[i].fieldName=n,o[i].valid=""!==n,o}function tM(e,t){var n=t.analyzer,r=t.rowIndex,o=e.analyzerFields.slice();return o[parseInt(r,10)].analyzer=n,o}function nM(e,t){if("new-doc"===e.ddocName){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new TI.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}var o=e.designDocs.find((function(t){return t.id===e.ddocName||t.id==="_design/"+e.ddocName}));return o?o.dDocModel():null}var rM=(0,oe.Ng)((function(e,t){var n,r,o,i=e.search,a=e.databases,c=(n=i,r=a.isDbPartitioned,!!(o=n.designDocs.find((function(e){return e.id===n.ddocName||e.id==="_design/"+n.ddocName})))&&Mt(o.get("doc"),r));return{isCreatingIndex:t.isCreatingIndex,isLoading:i.loading,database:i.database,designDocs:i.designDocs,searchIndexFunction:i.searchIndexFunction,ddocName:i.ddocName,ddocPartitioned:c,lastSavedDesignDocName:i.lastSavedDesignDocName,lastSavedSearchIndexName:i.lastSavedSearchIndexName,searchIndexName:i.searchIndexName,analyzerType:i.analyzerType,analyzerFields:i.analyzerFields,analyzerFieldsObj:i.analyzerFieldsObj,defaultMultipleAnalyzer:i.defaultMultipleAnalyzer,singleAnalyzer:i.singleAnalyzer,saveDoc:nM(i,a.isDbPartitioned),newDesignDocName:i.newDesignDocName,newDesignDocPartitioned:i.newDesignDocPartitioned,isDbPartitioned:a.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{setSearchIndexName:function(t){e(kI.setSearchIndexName(t))},saveSearchIndex:function(e,t,n){kI.saveSearchIndex(e,t,n)},selectDesignDoc:function(t){e(kI.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(kI.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(kI.updateNewDesignDocPartitioned(t))},setAnalyzerType:function(t){e(kI.setAnalyzerType(t))},setSingleAnalyzer:function(t){e(kI.setSingleAnalyzer(t))},setDefaultMultipleAnalyzer:function(t){e(kI.setDefaultMultipleAnalyzer(t))},addAnalyzerRow:function(t){e(kI.addAnalyzerRow(t))},removeAnalyzerRow:function(t){e(kI.removeAnalyzerRow(t))},setAnalyzerRowFieldName:function(t){e(kI.setAnalyzerRowFieldName(t))},setAnalyzer:function(t){e(kI.setAnalyzer(t))}}}))(KL);const oM=rM;var iM=function(e){var t=e.section,n=e.database,r=e.indexName,o=e.ddocName,i=e.docURL,a=e.endpoint,c=e.dropDownLinks,s=e.designDocs,u=e.ddoc,l=e.selectedNavItem,p=e.partitionKey,f=e.onPartitionKeySelected,d=e.onGlobalModeSelected,m=e.globalMode;return re.createElement("div",{id:"dashboard",className:"with-sidebar"},re.createElement(dv,{hideQueryOptions:!0,docURL:i,endpoint:a,dbName:n.id,dropDownLinks:c,database:n,showPartitionKeySelector:"search"===t,partitionKey:p,onPartitionKeySelected:f,onGlobalModeSelected:d,globalMode:m}),re.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},re.createElement("aside",{id:"sidebar-content",className:"scrollable"},re.createElement(Of,{selectedNavItem:l,selectedPartitionKey:p})),re.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},re.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},re.createElement("div",{className:"search-index-content"},re.createElement("div",{className:"tab-content search-index-tab-content"},function(e,t,n,r,o,i,a){return"create"===e?re.createElement(oM,{designDocs:o,ddoc:i,database:t,isCreatingIndex:!0,partitionKey:a}):"edit"===e?re.createElement(oM,{database:t,indexName:n,ddocName:r,isCreatingIndex:!1,partitionKey:a}):re.createElement(HI,null)}(t,n,r,o,s,u,p)))))))};iM.propTypes={section:fe().string.isRequired,docURL:fe().string,endpoint:fe().string,ddocName:fe().string,indexName:fe().string,dropDownLinks:fe().array.isRequired,database:fe().object.isRequired};const aM=iM;var cM=Au.extend({routes:{"database/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_search/:search/edit":{route:"editNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search/edit":{route:"edit",roles:["fx_loggedIn"]},"database/:database/new_search":"createNoPartition","database/:database/_partition/:partitionkey/new_search":"create","database/:database/new_search/:designDoc":"createNoPartition","database/:database/_partition/:partitionkey/new_search/:designDoc":"create"},initialize:function(e,t){this.databaseName=t[0],this.database=new du.Model({id:this.databaseName}),this.data={database:new du.Model({id:this.databaseName})},this.data.designDocs=new TI.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),Pu({database:this.data.database,designDocs:this.data.designDocs})},searchNoPartition:function(e,t,n,r){return this.search(e,"",t,n,r)},search:function(e,t,n,r,o){this.databaseName=e,this.ddocName=n,this.indexName=r;var i=new Mu("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});Ru(i);var a=this.getCrumbs(this.database);kI.dispatchInitSearchIndex({databaseName:e,partitionKey:t,designDoc:n,indexName:r,query:o}),Rc.fetchSelectedDatabaseInfo(e);var c=t?encodeURIComponent(t):"",s=ee.urls("search","apiurl",this.databaseName,c,this.ddocName,this.indexName,o||"*:*"),u=o?"?".concat(encodeURIComponent(o)):"";return re.createElement(aM,{section:"search",dropDownLinks:a,endpoint:s,docURL:ee.constants.DOC_URLS.SEARCH_INDEXES,database:this.database,indexName:r,selectedNavItem:i,partitionKey:t,onPartitionKeySelected:function(t){var o=ee.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));ee.navigate("#/"+o+encodeURIComponent(r)+u)},onGlobalModeSelected:function(){var t=ee.urls("search","app",encodeURIComponent(e),encodeURIComponent(n));ee.navigate("#/"+t+encodeURIComponent(r)+u)},globalMode:""===t})},editNoPartition:function(e,t,n){return this.edit(e,"",t,n)},edit:function(e,t,n,r){var o=new Mu("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});Ru(o),kI.dispatchEditSearchIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs}),Rc.fetchSelectedDatabaseInfo(e);var i=this.getCrumbs(this.database);return re.createElement(aM,{section:"edit",dropDownLinks:i,database:this.database,indexName:r,ddocName:n,selectedNavItem:o,partitionKey:t})},createNoPartition:function(e,t){return this.create(e,"",t)},create:function(e,t,n){var r=new Mu("");kI.dispatchInitNewSearchIndex({database:this.database,designDocs:this.data.designDocs,defaultDDoc:n}),Rc.fetchSelectedDatabaseInfo(e);var o=this.getCrumbs(this.database);return re.createElement(aM,{section:"create",dropDownLinks:o,database:this.database,designDocs:this.data.designDocs,ddoc:n,selectedNavItem:r,partitionKey:t})},getCrumbs:function(e){return[{type:"back",link:"/_all_dbs"},{name:e.id}]}});TI.RouteObjects=[cM];const sM=TI;function uM(e){return e?"/_partition/"+e:""}sM.initialize=function(){v(D.getServerUrl("/")).then((function(e){return e.features&&-1!==e.features.indexOf("search")})).catch((function(){return!1})).then((function(e){e&&(ee.registerExtension("sidebar:list",{selector:"indexes",name:"Search Indexes",urlNamespace:"search",indexLabel:"search index",onDelete:kI.deleteSearchIndex,onClone:kI.cloneSearchIndex,onEdit:kI.gotoEditSearchIndexPage}),ee.registerExtension("sidebar:links",{title:"New Search Index",url:"new_search",icon:"fonticon-plus-circled",showForPartitionedDDocs:!0}),ee.registerExtension("sidebar:newLinks",{url:"new_search",name:"Search Index"}),ee.registerExtension("IndexTypes:propNames","indexes"),ee.registerExtension("mango:indexTemplates",NI))}))},ee.registerUrls("partitioned_search",{app:function(e,t,n){return"database/"+e+uM(t)+"/_design/"+n+"/_search/"}}),ee.registerUrls("search",{server:function(e,t,n,r,o){return D.getServerUrl("/"+e+uM(t)+"/_design/"+n+"/_search/"+r+o)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_search/"},edit:function(e,t,n,r){return"database/"+e+uM(t)+"/_design/"+n+"/_search/"+r+"/edit"},fragment:function(e,t,n,r){return"database/"+e+uM(t)+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return"database/"+e+uM(t)+"/"+n+"/_search/"+r},apiurl:function(e,t,n,r,o){return window.location.origin+"/"+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)+"?q="+encodeURIComponent(o)}}),ee.addReducers({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:XL,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case mI:return GL(GL({},e),{},{loading:n.loading});case $x:var r=GL(GL({},e),{},{loading:!1,designDocs:n.designDocs,database:n.database},YL());return n.defaultDDoc&&(r.ddocName="_design/"+n.defaultDDoc),r;case eI:return GL(GL({},e),{},{searchIndexName:n.value});case tI:return GL(GL({},e),{},{analyzerType:n.value});case fI:return GL(GL({},e),{},{singleAnalyzer:n.analyzer});case nI:return GL(GL({},e),{},{analyzerFields:$L(e,n)});case uI:return GL(GL({},e),{},{hasActiveQuery:!0});case lI:return GL(GL({},e),{},{hasActiveQuery:!1,searchResults:[]});case dI:return GL(GL({},e),{},{searchQuery:n.query});case sI:return GL(GL({},e),{},{searchResults:n.searchResults,hasActiveQuery:!1,searchPerformed:!0});case rI:return GL(GL({},e),{},{analyzerFields:ZL(e,n.rowIndex)});case oI:return GL(GL({},e),{},{analyzerFields:eM(e,n)});case iI:return GL(GL({},e),{},{analyzerFields:tM(e,n)});case aI:return GL(GL({},e),{},{defaultMultipleAnalyzer:n.analyzer});case cI:return GL(GL({},e),function(e,t){var n,r=t.database,o=t.designDocs,i=t.ddocID,a=t.indexName,c=o.find((function(e){return e.id===i})).dDocModel(),s=c.getAnalyzer(a);n=_.isString(s)?s:_.has(s,"default")?s.default:SI;var u=[];return s&&s.fields&&Object.keys(s.fields).forEach((function(e){u.push({key:JL(),fieldName:e||"",analyzer:s.fields[e],valid:!_.isUndefined(e)&&!_.isEmpty(e)})})),{loading:!1,searchPerformed:!1,database:r,designDocs:o,searchIndexName:a,ddocName:i,lastSavedSearchIndexName:a,lastSavedDesignDocName:i,searchIndexFunction:c.getIndex(a),analyzerType:c.analyzerType(a),singleAnalyzer:n,defaultMultipleAnalyzer:n,analyzerFields:u}}(0,n));case pI:return GL(GL({},e),{},{ddocName:n.value});case hI:return GL(GL({},XL),{},{designDocs:new Backbone.Collection});case Zx:return GL(GL({},e),{},{loading:!1,databaseName:n.databaseName,partitionKey:n.partitionKey,ddocName:n.ddocName,indexName:n.indexName,searchQuery:n.searchQuery,searchResults:""===n.searchQuery?void 0:e.searchResults,noResultsWarning:""});case yI:return GL(GL({},e),{},{newDesignDocName:n.value});case bI:return GL(GL({},e),{},{newDesignDocPartitioned:n.value});case vI:return GL(GL({},e),{},{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case gI:return GL(GL({},e),{},{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});default:return e}}});const lM=sM;function pM(e){return pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pM(e)}function fM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fM(Object(n),!0).forEach((function(t){mM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mM(e,t,n){return(t=function(e){var t=function(e){if("object"!=pM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pM(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hM={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""},yM=ee.addon();yM.initialize=function(){},ee.addReducers({cors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hM,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case BR:var n=t.options;return dM(dM({},e),{},{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==c().indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case FR:return dM(dM({},e),{},{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case KR:return dM(dM({},e),{},{deleteDomainModalVisible:!1,domainToDelete:""});case VR:return dM(dM({},e),{},{isLoading:t.isLoading});default:return e}}});const bM=yM;var vM=n(60468),gM=function(e){var t=e.removeItem,n=e.section,r=e.type,o=e.value;return re.createElement("li",null,re.createElement("span",null,o),re.createElement(vM.A,{className:"float-end","aria-label":"Remove item",onClick:function(){return t(n,r,o)}}))};gM.propTypes={value:fe().string.isRequired,removeItem:fe().func.isRequired};const _M=gM;function wM(e){return wM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wM(e)}function EM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TM(r.key),r)}}function OM(e,t){return OM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},OM(e,t)}function SM(e){var t=NM();return function(){var n,r=PM(e);if(t){var o=PM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==wM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return DM(e)}(this,n)}}function DM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(NM=function(){return!!e})()}function PM(e){return PM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PM(e)}function CM(e,t,n){return(t=TM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TM(e){var t=function(e){if("object"!=wM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wM(t)?t:t+""}var RM=ne.helpers.getDocUrl,jM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OM(e,t)}(n,e);var t=SM(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return CM(DM(e=t.call.apply(t,[this].concat(o))),"state",{newRole:"",newName:""}),CM(DM(e),"getHelp",(function(){return e.props.section,"Database members can access the database. If no members are defined, the database is public. "})),CM(DM(e),"isEmptyValue",(function(e,t){return!!c().isEmpty(e)&&(ee.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)})),CM(DM(e),"addNames",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newName,"names")||(e.props.addItem({type:"names",section:e.props.section,value:e.state.newName}),e.setState({newName:""}))})),CM(DM(e),"addRoles",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newRole,"roles")||(e.props.addItem({type:"roles",section:e.props.section,value:e.state.newRole}),e.setState({newRole:""}))})),CM(DM(e),"getItems",(function(t,n){return t.map((function(t,r){return re.createElement(_M,{key:r,value:t,section:e.props.section,type:n,removeItem:e.props.removeItem})}))})),CM(DM(e),"getNames",(function(){return e.getItems(e.props.names,"names")})),CM(DM(e),"getRoles",(function(){return e.getItems(e.props.roles,"roles")})),CM(DM(e),"nameChange",(function(t){e.setState({newName:t.target.value})})),CM(DM(e),"roleChange",(function(t){e.setState({newRole:t.target.value})})),e}return function(e,t){t&&EM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props.section;return re.createElement("div",{id:"permissions__"+e},re.createElement("header",{className:"page-header"},re.createElement("h3",null,e),re.createElement("p",{className:"help"},this.getHelp(),re.createElement("a",{className:"help-link","data-bypass":"true",href:RM("DB_PERMISSION"),target:"_blank",rel:"noopener noreferrer"},re.createElement("i",{className:"fonticon-help-circled"})))),re.createElement("div",{className:"row mt-2"},re.createElement("div",{className:"col-lg-6"},re.createElement("header",null,re.createElement("h4",null,"Users"),re.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),re.createElement("form",{onSubmit:this.addNames,id:"form-users-permissions"},re.createElement(md.A,null,re.createElement(nt.A.Control,{placeholder:"Username",onChange:this.nameChange,"aria-label":"Username",type:"text"}),re.createElement(de.A,{type:"submit",variant:"cf-primary","aria-label":"Add username"},re.createElement("i",{className:"fonticon-plus-circled"}),"Add User"))),re.createElement("ul",{className:"list-unstyled permission-items"},this.getNames())),re.createElement("div",{className:"col-lg-6"},re.createElement("header",null,re.createElement("h4",null,"Roles"),re.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),re.createElement("form",{onSubmit:this.addRoles},re.createElement(md.A,null,re.createElement(nt.A.Control,{placeholder:"Role",value:this.state.newRole,onChange:this.roleChange,"aria-label":"Role",type:"text"}),re.createElement(de.A,{type:"submit",variant:"cf-primary","aria-label":"Add role"},re.createElement("i",{className:"fonticon-plus-circled"}),"Add Role"))),re.createElement("ul",{className:"list-unstyled permission-items"},this.getRoles()))))}}]),n}(re.Component);CM(jM,"defaultProps",{names:[],roles:[]});const AM=jM;function kM(e,t,n,r){return!!e[t]&&!!e[t][n]&&-1!==e[t][n].indexOf(r)}var xM="PERMISSIONS_UPDATE",IM=function(e){return{type:xM,permissions:e}},LM=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!e.ok)throw new Error(e.reason);return e})).then((function(){return ee.addNotification({msg:"Database permissions have been updated."}),n(IM(t))})).catch((function(e){ee.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})}))};function MM(e){return MM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MM(e)}function UM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qM(r.key),r)}}function qM(e){var t=function(e){if("object"!=MM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=MM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==MM(t)?t:t+""}function BM(e,t){return BM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BM(e,t)}function VM(e){var t=KM();return function(){var n,r=HM(e);if(t){var o=HM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==MM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FM(e)}(this,n)}}function FM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KM=function(){return!!e})()}function HM(e){return HM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},HM(e)}var zM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BM(e,t)}(n,e);var t=VM(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).addItem=r.addItem.bind(FM(r)),r.removeItem=r.removeItem.bind(FM(r)),r}return function(e,t){t&&UM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"addItem",value:function(e){var t=e.section,n=e.type,r=e.value;if(kM(this.props.security,t,n,r))return ee.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch(function(e,t,n,r,o){return function(i){!function(e,t,n,r){if(kM(e,t,n,r))throw new Error("Role/Name has already been added");!function(e,t,n,r){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(r)}(e,t,n,r)}(t,n,r,o),LM(e,t,i).catch((function(e){ee.addNotification({msg:e.message,type:"error"})}))}}(this.props.url,this.props.security,t,n,r))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch(function(e,t,n,r,o){return function(i){!function(e,t,n,r){if(!kM(e,t,n,r))throw new Error("Role/Name does not exist");e[t][n]=e[t][n].filter((function(e){return e!==r}))}(t,n,r,o),LM(e,t,i).catch((function(e){ee.addNotification({msg:e.message,type:"error"})}))}}(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,r=e.memberRoles,o=e.memberNames;return re.createElement("div",{className:"permissions-page flex-body"},re.createElement("div",null,re.createElement(AM,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),re.createElement(AM,{roles:r,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"})))}}]),n}(re.Component);function GM(e){return GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GM(e)}function WM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XM(r.key),r)}}function XM(e){var t=function(e){if("object"!=GM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=GM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==GM(t)?t:t+""}function QM(e,t){return QM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QM(e,t)}function JM(e){var t=YM();return function(){var n,r=$M(e);if(t){var o=$M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==GM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function YM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YM=function(){return!!e})()}function $M(e){return $M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$M(e)}zM.propTypes={security:fe().object.isRequired};var ZM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QM(e,t)}(n,e);var t=JM(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t){t&&WM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatch)(function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.error&&e.reason)throw t(IM({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(IM(e))})).catch((function(e){ee.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})}))}}(e.url))}},{key:"render",value:function(){return this.props.isLoading?re.createElement(Er,null):re.createElement(zM,this.props)}}]),n}(re.Component);function eU(){return eU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eU.apply(null,arguments)}ZM.propTypes={isLoading:fe().bool.isRequired,adminRoles:fe().array.isRequired,adminNames:fe().array.isRequired,memberNames:fe().array.isRequired,memberRoles:fe().array.isRequired,security:fe().object.isRequired};var tU={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[]};function nU(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function rU(e,t){return t[e]&&t[e].names?t[e].names:[]}var oU=function(e){return e.security},iU=function(e){return e.adminRoles},aU=function(e){return e.adminNames},cU=function(e){return e.memberNames},sU=function(e){return e.memberRoles};const uU=(0,oe.Ng)((function(e){var t,n=e.permissions;return{isLoading:(t=n,t.isLoading),adminRoles:iU(n),adminNames:aU(n),memberNames:cU(n),memberRoles:sU(n),security:oU(n)}}))(ZM),lU=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,i=e.dropDownLinks,a=e.partitionKey,c=new Mu("permissions");return re.createElement("div",{id:"dashboard",className:"with-sidebar"},re.createElement(dv,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:r,dbName:o,dropDownLinks:i,database:n}),re.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},re.createElement("aside",{id:"sidebar-content",className:"scrollable"},re.createElement(Of,{selectedNavItem:c,selectedPartitionKey:a})),re.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},re.createElement(uU,{url:r}))))};var pU=Au.extend({roles:["fx_loggedIn"],routes:{"database/:database/_partition/:partitionKey/permissions":{route:"permissions",roles:["fx_loggedIn"]},"database/:database/permissions":{route:"permissions",roles:["fx_loggedIn"]}},initialize:function(){ne.getParams().include_docs=!0},permissions:function(e,t){this.database=new du.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var n=[{name:this.database.id,link:du.databaseUrl(e)},{name:"Permissions"}],r=encodeURIComponent(e),o=ee.urls("permissions","server",r);return re.createElement(lU,{docURL:ee.constants.DOC_URLS.DB_PERMISSION,endpoint:o,dbName:this.database.id,dropDownLinks:n,database:this.database,partitionKey:t})}});const fU={RouteObjects:[pU],initialize:function(){}};ee.addReducers({permissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tU,t=arguments.length>1?arguments[1]:void 0;if(t.type===xM){var n=t.permissions;return eU({},e,{isLoading:!1,security:n,adminRoles:nU("admins",n),adminNames:rU("admins",n),memberRoles:nU("members",n),memberNames:rU("members",n)})}return e}});const dU=fU;var mU=function(e){var t=e.message;ee.addNotification({msg:t,type:"error"})},hU=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e}))},yU=function(e,t){return hU(!_.isEmpty(e),!_.isEmpty(t))},bU=function(){ee.dispatch({type:"AUTH_HIDE_PASSWORD_MODAL"})};function vU(e){return vU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vU(e)}function gU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_U(r.key),r)}}function _U(e){var t=function(e){if("object"!=vU(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=vU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vU(t)?t:t+""}function wU(e,t){return wU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wU(e,t)}function EU(e){var t=OU();return function(){var n,r=SU(e);if(t){var o=SU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==vU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function OU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OU=function(){return!!e})()}function SU(e){return SU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},SU(e)}var DU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wU(e,t)}(n,e);var t=EU(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).state={username:"",password:""},e}return function(e,t){t&&gU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:this.usernameField.value,t=this.props.testBlankPassword?this.props.testBlankPassword:this.passwordField.value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){!function(e,t,n){yU(e,t)?VS({name:e,password:t}).then((function(e){if(e.error)return mU({message:e.reason}),e;var t=ne.i18n.en_US["auth-logged-in"];if(t&&ee.addNotification({msg:t}),n&&-1===n.indexOf("login"))return ee.navigate(n);ee.navigate("/")})).catch(mU):mU({message:ne.i18n.en_US["auth-missing-credentials"]})}(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"render",value:function(){var e=this;return re.createElement("div",{className:"couch-login-wrapper"},re.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},re.createElement("div",{className:"row"},re.createElement("div",{className:"col12 col-md-5 col-xl-4 mb-3"},re.createElement("label",null,"Enter your username and password"),re.createElement(nt.A.Control,{type:"text",id:"username",name:"username",ref:function(t){return e.usernameField=t},placeholder:"Username",onChange:this.onUsernameChange.bind(this),value:this.state.username}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col12 col-md-5 col-xl-4 mb-3"},re.createElement(nt.A.Control,{type:"password",id:"password",name:"password",ref:function(t){return e.passwordField=t},placeholder:"Password",onChange:this.onPasswordChange.bind(this),value:this.state.password}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col12 col-md-5 col-xl-4 mb-3"},re.createElement(de.A,{id:"login-btn",variant:"cf-primary",type:"submit"},"Log In")))))}}]),n}(re.Component);DU.defaultProps={urlBack:""},DU.propTypes={urlBack:fe().string.isRequired};const NU=DU;function PU(e){return PU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PU(e)}function CU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TU(r.key),r)}}function TU(e){var t=function(e){if("object"!=PU(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=PU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==PU(t)?t:t+""}function RU(e,t){return RU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RU(e,t)}function jU(e){var t=kU();return function(){var n,r=xU(e);if(t){var o=xU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==PU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AU(e)}(this,n)}}function AU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kU=function(){return!!e})()}function xU(e){return xU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xU(e)}var IU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RU(e,t)}(n,e);var t=jU(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={password:""},r.authenticate=r.authenticate.bind(AU(r)),r.onKeyPress=r.onKeyPress.bind(AU(r)),r}return function(e,t){t&&CU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=ee.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.onClose,o=t.submitBtnLabel,i=t.headerTitle,a=t.modalMessage;return this.props.visible?re.createElement(Dt.A,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return r()}},re.createElement(Dt.A.Header,{closeButton:!0},re.createElement(Dt.A.Title,null,i)),re.createElement(Dt.A.Body,null,a,re.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),re.createElement(Dt.A.Footer,null,re.createElement(de.A,{href:"#","data-bypass":"true",variant:"cf-cancel",className:"cancel-link",onClick:function(){return r()}},"Cancel"),re.createElement(fi.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}]),n}(re.Component);IU.propTypes={visible:fe().bool.isRequired,modalMessage:fe().oneOfType([fe().string,fe().element]),onSubmit:fe().func.isRequired,onClose:fe().func.isRequired,submitBtnLabel:fe().string},IU.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:bU,onSubmit:function(e,t,n){VS({name:e,password:t}).then((function(r){if(r.error)throw r;bU(),n(e,t)})).catch((function(){ee.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})}))},onSuccess:function(){},submitBtnLabel:"Continue"};const LU=IU;function MU(e){return MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MU(e)}function UU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qU(r.key),r)}}function qU(e){var t=function(e){if("object"!=MU(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=MU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==MU(t)?t:t+""}function BU(e,t){return BU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},BU(e,t)}function VU(e){var t=FU();return function(){var n,r=KU(e);if(t){var o=KU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==MU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function FU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FU=function(){return!!e})()}function KU(e){return KU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},KU(e)}var HU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BU(e,t)}(n,e);var t=VU(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={username:"",password:""},r}return function(e,t){t&&UU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter,this.props.nodes)}},{key:"render",value:function(){var e=this;return re.createElement("div",{className:"faux__auth-page"},re.createElement("h3",null,"Create Admins"),re.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users.",re.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),re.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),re.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement(nt.A.Control,{type:"text",id:"username",ref:function(t){return e.usernameField=t},name:"name",placeholder:"Username",onChange:this.onChangeUsername.bind(this)}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement(nt.A.Control,{type:"password",id:"password",name:"password",placeholder:"Password",onChange:this.onChangePassword.bind(this)}))),re.createElement("div",{className:"row"},re.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement(de.A,{id:"create-admin",type:"submit",variant:"cf-primary"},"Create Admin")))))}}]),n}(re.Component);HU.propTypes={loginAfter:fe().bool.isRequired},HU.defaultProps={loginAfter:!1};const zU=(0,oe.Ng)((function(e){return{nodes:e.clusters.nodes}}),{createAdmin:function(e,t,n,r){return function(){var o=r[0].node;if(!yU(e,t))return mU({message:ne.i18n.en_US["auth-missing-credentials"]});BS({name:e,password:t,node:o}).then((function(e){return e.error?mU({message:"".concat(ne.i18n.en_US["auth-admin-creation-failed-prefix"]," ").concat(e.reason)}):(ee.addNotification({msg:ne.i18n.en_US["auth-admin-created"]}),n?ee.navigate("/login"):void 0)}))}}})(HU);function GU(e){return GU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GU(e)}function WU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XU(r.key),r)}}function XU(e){var t=function(e){if("object"!=GU(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=GU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==GU(t)?t:t+""}function QU(e,t){return QU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QU(e,t)}function JU(e){var t=YU();return function(){var n,r=$U(e);if(t){var o=$U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==GU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function YU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YU=function(){return!!e})()}function $U(e){return $U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$U(e)}var ZU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QU(e,t)}(n,e);var t=JU(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={password:"",passwordConfirm:""},r}return function(e,t){t&&WU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){this.passwordField.focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm,this.props.nodes)}},{key:"render",value:function(){var e=this;return re.createElement("div",{className:"faux__auth-page"},re.createElement("h3",null,"Change Password"),re.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement("label",null,"Enter your new password"),re.createElement(nt.A.Control,{type:"password",id:"password",ref:function(t){return e.passwordField=t},name:"password",placeholder:"Password",onChange:this.onChangePassword.bind(this),value:this.state.password}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 col-md-5 col-xl-4 mb-3"},re.createElement(nt.A.Control,{type:"password",id:"password-confirm",name:"password_confirm",placeholder:"Verify Password",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}))),re.createElement("div",{className:"row"},re.createElement("div",{className:"col-12 mb-3"},re.createElement(de.A,{type:"submit",variant:"cf-primary"},"Change")))))}}]),n}(re.Component);const eq={LoginForm:NU,PasswordModal:LU,CreateAdminForm:zU,ChangePasswordForm:(0,oe.Ng)((function(e){return{nodes:e.clusters.nodes,username:ee.session.user().name}}),{changePassword:function(e,t,n,r){return function(){if(!function(e,t){return hU(!_.isEmpty(e),!_.isEmpty(t),e===t)}(t,n))return mU({message:ne.i18n.en_US["auth-passwords-not-matching"]});BS({name:e,password:t,node:r[0].node}).then((function(){ee.addNotification({msg:ne.i18n.en_US["auth-change-password"]})}),mU)}}})(ZU)};var tq=eq.CreateAdminForm,nq=eq.ChangePasswordForm,rq=function(e){var t=e.crumbs;return re.createElement("header",null,re.createElement("div",{className:"flex-layout flex-row"},re.createElement("div",{id:"breadcrumbs",className:"flex-body"},re.createElement(Fc,{crumbs:t}))))},oq=function(e){var t=e.crumbs,n=e.component;return re.createElement(Gc,null,re.createElement(rq,{crumbs:t}),re.createElement(Xc,null,n))},iq=function(e){var t=e.changePassword;return re.createElement(wo,null,re.createElement(go,{key:1,selected:t,text:"Change Password",onChange:function(){ee.navigate("#changePassword")}}),re.createElement(go,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){ee.navigate("#addAdmin")}}))},aq=function(e){var t=e.crumbs,n=e.changePassword,r=n?re.createElement(nq,null):re.createElement(tq,{loginAfter:!1});return re.createElement(Gc,null,re.createElement(rq,{crumbs:t}),re.createElement(Xc,null,re.createElement("div",{className:"template-content flex-body flex-layout flex-col"},re.createElement(iq,{changePassword:n}),re.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},r))))},cq=eq.LoginForm,sq=eq.CreateAdminForm,uq=[{name:"Log In to CouchDB"}];const lq=[ee.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){KO.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return re.createElement(oq,{crumbs:uq,component:re.createElement(cq,{urlBack:ne.getParams().urlback})})},logout:function(){ee.addNotification({msg:"You have been logged out."}),FS().then(KS).then((function(){return ee.navigate("/")})).catch(mU)},createAdminForNode:function(){return KO.fetchNodes(),re.createElement(oq,{crumbs:[{name:"Create Admin"}],component:re.createElement(sq,{loginAfter:!0})})}}),ee.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){KO.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){KO.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return KO.fetchNodes(),re.createElement(aq,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return KO.fetchNodes(),re.createElement(aq,{crumbs:[{name:"User Management"}],changePassword:!1})}})];function pq(e){return pq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pq(e)}function fq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dq(r.key),r)}}function dq(e){var t=function(e){if("object"!=pq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pq(t)?t:t+""}function mq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.includes)(e,"_admin")}var hq=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new(U())((function(e,t){n._authenticateResolve=e,n._authenticateReject=t})),this._allowAdminParty=t.allowAdminParty}return function(e,t){t&&fq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:mq(e.roles)},(0,a.each)(this._onChange,(function(e){return e(t._user)}))),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return KS().then((function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())})).catch((function(t){e._authenticateReject(t)}))}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=(0,a.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length||_.intersection(this.userRoles(),e).length>0}}]),e}(),yq=function(){ee.removeHeaderLink({id:"auth",bottomNav:!0})};ee.setSession(new hq({allowAdminParty:!0}));const bq={initialize:function(){ee.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),ee.session.onChange((function(){var e,t=ee.session;t.isAdminParty()?(e={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},yq(),ee.addHeaderLink(e),ee.hideLogin()):t.isLoggedIn()?(e={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},yq(),ee.addHeaderLink(e),ee.showLogout()):(yq(),ee.showLogin())}))},RouteObjects:lq};var vq,gq,_q=ee.addon(),wq=new vc.Model({id:"verifytestdb",name:"verifytestdb"}),Eq=new vc.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"});_q.testProcess={saveDoc:function(){return(vq=new yc.Doc({_id:"test_doc_1",a:1},{database:wq})).save()},destroyDoc:function(){return vq.destroy()},updateDoc:function(){return vq.set({b:"hello"}),vq.save()},saveDB:function(){return wq.save()},setupDB:function(e){return new ee.Promise((function(t,n){e.fetch().then((function(){return e.destroy()}),(function(){t()})).then((function(){t()}),(function(e,t,r){n(new Error(r))}))}))},setup:function(){return ee.Promise.all([this.setupDB(wq),this.setupDB(Eq)])},testView:function(){var e,t,n=new ee.Promise((function(n,r){e=n,t=r}));return v(gq.url()+"/_view/testview").then((function(e){if(e.error)throw new Error(e.reason||e.error);return e})).then((function(n){var r=(n=_.isString(n)?JSON.parse(n):n).rows[0];6===r.value&&e(),t(new Error("Values expect 6, got "+r.value))}),t),n},setupView:function(){var e=new yc.Doc({_id:"test_doc_10",a:1},{database:wq}),t=new yc.Doc({_id:"test_doc_20",a:2},{database:wq}),n=new yc.Doc({_id:"test_doc_30",a:3},{database:wq});return gq=new yc.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:wq}),ee.Promise.all([e.save(),t.save(),n.save(),gq.save()])},setupReplicate:function(){return w(D.getServerUrl("/_replicate"),{create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"}).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},testReplicate:function(){return new ee.Promise((function(e,t){Eq.fetch().then((function(){var n=Eq.get("doc_count");4!==n?t(new Error("Replication Failed, expected 4 docs got "+n)):e()}),t)}))},removeDBs:function(){Eq.destroy(),wq.destroy()}};const Oq=_q;function Sq(e){return Sq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sq(e)}function Dq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rq(r.key),r)}}function Nq(e,t){return Nq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nq(e,t)}function Pq(e){var t=Cq();return function(){var n,r=Tq(e);if(t){var o=Tq(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Sq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Cq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Cq=function(){return!!e})()}function Tq(e){return Tq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tq(e)}function Rq(e){var t=function(e){if("object"!=Sq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Sq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sq(t)?t:t+""}var jq=fi.ConfirmButton,Aq=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nq(e,t)}(n,e);var t=Pq(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t){t&&Dq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement(jq,{id:"start",showIcon:!1,onClick:this.props.verify,disabled:this.props.isVerifying,text:this.props.isVerifying?"Verifying...":"Verify Installation"})}}]),n}(re.Component);!function(e,t,n){(t=Rq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Aq,"propTypes",{verify:fe().func.isRequired,isVerifying:fe().bool.isRequired});const kq={CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"};function xq(e){return xq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xq(e)}function Iq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fq(r.key),r)}}function Lq(e,t){return Lq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lq(e,t)}function Mq(e){var t=qq();return function(){var n,r=Bq(e);if(t){var o=Bq(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==xq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uq(e)}(this,n)}}function Uq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qq=function(){return!!e})()}function Bq(e){return Bq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bq(e)}function Vq(e,t,n){return(t=Fq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e){var t=function(e){if("object"!=xq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xq(t)?t:t+""}var Kq=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lq(e,t)}(n,e);var t=Mq(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Vq(Uq(e=t.call.apply(t,[this].concat(o))),"showTestResult",(function(t){var n=e.props,r=n.testResults,o=n.isVerifying;return r[t].complete?e.props.testResults[t].success?re.createElement("span",{className:"install-result-success"},"âœ“ success"):re.createElement("span",{className:"install-result-failure"},"âœ— failure"):o?"In-progress...":""})),e}return function(e,t){t&&Iq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement(kw.A,{striped:!0},re.createElement("thead",null,re.createElement("tr",null,re.createElement("th",{className:"verify-test-col"},"Test"),re.createElement("th",null,"Status"))),re.createElement("tbody",null,re.createElement("tr",null,re.createElement("td",null,"Create Database"),re.createElement("td",{id:"js-test-create-db"},this.showTestResult(kq.CREATE_DATABASE))),re.createElement("tr",null,re.createElement("td",null,"Create Document"),re.createElement("td",{id:"js-test-create-doc"},this.showTestResult(kq.CREATE_DOCUMENT))),re.createElement("tr",null,re.createElement("td",null,"Update Document"),re.createElement("td",{id:"js-test-update-doc"},this.showTestResult(kq.UPDATE_DOCUMENT))),re.createElement("tr",null,re.createElement("td",null,"Delete Document"),re.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(kq.DELETE_DOCUMENT))),re.createElement("tr",null,re.createElement("td",null,"Create View"),re.createElement("td",{id:"js-test-create-view"},this.showTestResult(kq.CREATE_VIEW))),re.createElement("tr",null,re.createElement("td",null,"Replication"),re.createElement("td",{id:"js-test-replication"},this.showTestResult(kq.REPLICATION)))))}}]),n}(re.Component);function Hq(e){return Hq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hq(e)}function zq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gq(r.key),r)}}function Gq(e){var t=function(e){if("object"!=Hq(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Hq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Hq(t)?t:t+""}function Wq(e,t){return Wq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wq(e,t)}function Xq(e){var t=Qq();return function(){var n,r=Jq(e);if(t){var o=Jq(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Hq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qq=function(){return!!e})()}function Jq(e){return Jq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jq(e)}Vq(Kq,"propTypes",{testResults:fe().object.isRequired,isVerifying:fe().bool.isRequired});var Yq=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wq(e,t)}(n,e);var t=Xq(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).props.resetTests(),r}return function(e,t){t&&zq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return re.createElement("div",null,re.createElement(Aq,{verify:this.props.startVerification,isVerifying:this.props.isVerifying}),re.createElement(Kq,{testResults:this.props.testResults,isVerifying:this.props.isVerifying}))}}]),n}(re.Component);const $q="VERIFY_INSTALL_START",Zq="VERIFY_INSTALL_RESET",eB="VERIFY_INSTALL_SINGLE_TEST_COMPLETE",tB="VERIFY_INSTALL_ALL_TESTS_COMPLETE";var nB=function(e,t){return function(){t({type:eB,test:e,success:!0})}},rB=!0,oB=function(e,t){return function(n){if(rB=!1,n){t({type:eB,test:e,success:!1});var r="n/a";n.responseText?r=JSON.parse(n.responseText).reason:n.message&&(r=n.message),ee.addNotification({msg:"Error: "+r,type:"error"})}}},iB=function(){return function(e){e({type:Zq})}};const aB=(0,oe.Ng)((function(e){var t=e.verifyinstall;return{isVerifying:t.isVerifying,testResults:t.tests}}),(function(e){return{resetTests:function(){e(iB())},startVerification:function(){e(iB()),e((function(e){e({type:$q});var t=Oq.testProcess;t.setup().then((function(){return t.saveDB().then(nB(kq.CREATE_DATABASE,e))}),oB(kq.CREATE_DATABASE,e)).then((function(){return t.saveDoc().then(nB(kq.CREATE_DOCUMENT,e))}),oB(kq.CREATE_DATABASE,e)).then((function(){return t.updateDoc().then(nB(kq.UPDATE_DOCUMENT,e))}),oB(kq.CREATE_DOCUMENT,e)).then((function(){return t.destroyDoc().then(nB(kq.DELETE_DOCUMENT,e))}),oB(kq.UPDATE_DOCUMENT,e)).then((function(){return t.setupView().then((function(){return t.testView().then(nB(kq.CREATE_VIEW,e))}))}),oB(kq.DELETE_DOCUMENT,e)).then((function(){return t.setupReplicate().then((function(){return t.testReplicate().then(nB(kq.REPLICATION,e))}))}),oB(kq.CREATE_VIEW,e)).then((function(){}),oB(kq.REPLICATION,e)).then((function(){e({type:tB}),rB&&ee.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),t.removeDBs()}))}))}}}))(Yq);var cB=ee.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return re.createElement(Jc,{component:re.createElement(aB,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});Oq.RouteObjects=[cB];const sB=Oq;function uB(e){return uB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uB(e)}function lB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lB(Object(n),!0).forEach((function(t){fB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fB(e,t,n){return(t=function(e){var t=function(e){if("object"!=uB(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=uB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uB(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dB={isVerifying:!1,tests:{}};function mB(e,t,n){var r=pB({},e);if(!_.has(r,t))throw new Error("Invalid test name passed to updateTestStatus()");return r[t]={complete:!0,success:n},r}Object.keys(kq).forEach((function(e){dB.tests[kq[e]]={complete:!1}})),sB.initialize=function(){ee.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},ee.addReducers({verifyinstall:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dB,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case $q:return pB(pB({},n),{},{isVerifying:!0});case Zq:return pB(pB({},n),{},{tests:(e=n.tests,t=pB({},e),Object.keys(t).forEach((function(e){t[e]={complete:!1}})),t)});case eB:return pB(pB({},n),{},{tests:mB(n.tests,r.test,r.success)});case tB:return pB(pB({},n),{},{isVerifying:!1});default:return n}}});const hB=sB;var yB=function(e){var t=e.iconClassName,n=e.link,r=e.title;return re.createElement("div",{className:"col-12 col-sm-6 col-lg-4 mb-4"},re.createElement("div",{className:"logo "+t},re.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},r)))};const bB=function(){return re.createElement("div",{id:"documentation-page",className:"scrollable"},re.createElement("div",{className:"links row mb-4"},re.createElement(yB,{iconClassName:"couchdb-icon",link:"https://docs.couchdb.org/en/latest/",title:"CouchDB Official Documentation â€” Online"}),re.createElement(yB,{iconClassName:"couchdb-icon",link:"./docs/index.html",title:"CouchDB Official Documentation â€” Offline"}),re.createElement(yB,{iconClassName:"couchdb-icon",link:"https://blog.couchdb.org/",title:"CouchDB Weekly News"}),re.createElement(yB,{iconClassName:"couchdb-icon",link:"https://couchdb.apache.org/",title:"CouchDB Homepage"}),re.createElement(yB,{iconClassName:"couchdb-icon",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",title:"Fauxton Visual Guide"})),re.createElement("div",{className:"links row mb-4"},re.createElement(yB,{iconClassName:"github-icon",link:"https://github.com/apache/couchdb",title:"CouchDB on GitHub"}),re.createElement(yB,{iconClassName:"github-icon",link:"https://github.com/apache/couchdb-fauxton",title:"Fauxton on GitHub"})),re.createElement("div",{className:"links row mb-4"},re.createElement(yB,{iconClassName:"asf-feather-icon",link:"https://www.apache.org/",title:"The Apache Software Foundation"}),re.createElement(yB,{iconClassName:"mastodon-icon",link:"https://fosstodon.org/@couchdb",title:"Follow CouchDB on Mastodon"}),re.createElement(yB,{iconClassName:"linkedin-icon",link:"https://www.linkedin.com/company/apache-couchdb",title:"Follow CouchDB on LinkedIn"})))};var vB=ee.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return re.createElement(Jc,{component:re.createElement(bB,null),docURL:"",endpoint:"",crumbs:[{name:"Documentation"}]})}});vB.RouteObjects=[vB];const gB=vB;gB.initialize=function(){ee.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})};const _B=gB;function wB(e){return wB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wB(e)}function EB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OB(r.key),r)}}function OB(e){var t=function(e){if("object"!=wB(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=wB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wB(t)?t:t+""}function SB(e,t){return SB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},SB(e,t)}function DB(e){var t=PB();return function(){var n,r=CB(e);if(t){var o=CB(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==wB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NB(e)}(this,n)}}function NB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(PB=function(){return!!e})()}function CB(e){return CB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CB(e)}var TB=function(e){var t=e.showNews,n=e.isChecked,r=e.toggleChange;return re.createElement("div",null,re.createElement("p",null,"When you click this button, you are requesting content and sharing your IP address with ",re.createElement("a",{href:"https://blog.couchdb.org/"},"blog.couchdb.org")," ","which is edited by the Apache CouchDB PMC and maintained by"," ",re.createElement("a",{href:"https://wordpress.com/"},"wordpress.com"),"."),re.createElement("p",null,"If you donâ€™t want to share your IP address, do not click the button."),re.createElement(de.A,{onClick:t,variant:"cf-primary",className:"mb-3"},"Load News"),re.createElement(nt.A.Check,{type:"checkbox",checked:n,onChange:r,label:"Remember my choice"}))},RB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SB(e,t)}(n,e);var t=DB(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).showNews=r.showNews.bind(NB(r)),r.toggleChange=r.toggleChange.bind(NB(r));var o=!!ne.utils.localStorageGet("allow-IP-sharing");return r.state={showNews:!!o,allowsIpSharing:o},r}return function(e,t){t&&EB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"showNews",value:function(){this.setState({showNews:!0})}},{key:"toggleChange",value:function(){var e=this.state.allowsIpSharing;this.setState({allowsIpSharing:!e}),ne.utils.localStorageSet("allow-IP-sharing",!e)}},{key:"render",value:function(){var e=re.createElement(TB,{showNews:this.showNews,toggleChange:this.toggleChange,isChecked:this.state.allowsIpSharing});return this.state.showNews&&(e=re.createElement("iframe",{src:"https://blog.couchdb.org",width:"100%",height:"100%"})),re.createElement("div",{className:"news-page"},e)}}]),n}(re.Component);const jB={NewsPage:RB};var AB=ee.RouteObject.extend({selectedHeader:"News",hideApiBar:!0,hideNotificationCenter:!0,routes:{news:"news"},roles:["fx_loggedIn"],news:function(){return re.createElement(Jc,{component:re.createElement(jB.NewsPage,null),crumbs:[{name:"News"}]})}});AB.RouteObjects=[AB];const kB=AB;kB.initialize=function(){ee.addHeaderLink({id:"News",title:"News",icon:"fonticon-clipboard",href:"#/news",bottomNav:!0,top:!0})};const xB=[sc,{initialize:function(){}},du,BO,oN,$P,mC,ij,Yx,lM,bM,dU,bq,hB,_B,kB];function IB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}ee.addMiddleware(Ka.A);var LB=(0,Fa.y$)((0,Fa.HY)(ee.reducers),Fa.Tw.apply(void 0,function(e){return function(e){if(Array.isArray(e))return IB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return IB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IB(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ee.middlewares)));ee.reduxDispatch=function(e){LB.dispatch(e)},ee.reduxState=function(){return LB.getState()},ne.addons=xB,ee.router=ne.router=new ee.Router(ne.addons),P().history.start({pushState:!1,root:ne.root}),"ActiveXObject"in window&&o().ajaxSetup({cache:!1});var MB=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null};document.addEventListener("click",(function(e){var t=MB(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var r=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,r.length)===r&&(e.preventDefault(),ne.router.navigate(n.attr,!0))}}})),V.render(re.createElement(oe.Kq,{store:LB},re.createElement(Va,{router:ne.router})),document.getElementById("app"))},84612:(e,t)=>{var n,r,o;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}r=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===a(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1).Beautifier,o=n(5).Options;e.exports=function(e,t){return new r(e,t).beautify()},e.exports.defaultOptions=function(){return new o}},function(e,t,n){"use strict";var r=n(2).Output,o=n(3).Token,i=n(4),a=n(5).Options,c=n(7).Tokenizer,s=n(7).line_starters,u=n(7).positionable_operators,l=n(7).TOKEN;function p(e,t){return-1!==t.indexOf(e)}function f(e,t){return e&&e.type===l.RESERVED&&e.text===t}function d(e,t){return e&&e.type===l.RESERVED&&p(e.text,t)}var m=["case","return","do","if","throw","else","await","break","continue","async"],h=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(["before-newline","after-newline","preserve-newline"]),y=[h.before_newline,h.preserve_newline],b="BlockStatement",v="Statement",g="ObjectLiteral",_="ArrayLiteral",w="ForInitializer",E="Conditional",O="Expression";function S(e,t){t.multiline_frame||t.mode===w||t.mode===E||e.remove_indent(t.start_line_index)}function D(e){return e===_}function N(e){return p(e,[O,w,E])}function P(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new a(t)}P.prototype.create_flags=function(e,t){var n=0;return e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_token:e?e.last_token:new o(l.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},P.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new r(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(b);var n=new c(e,this._options);return this._tokens=n.tokenize(),e},P.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._reset(this._source_text),t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&i.lineBreak.test(e||"")&&(t=e.match(i.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(t)},P.prototype.handle_token=function(e,t){e.type===l.START_EXPR?this.handle_start_expr(e):e.type===l.END_EXPR?this.handle_end_expr(e):e.type===l.START_BLOCK?this.handle_start_block(e):e.type===l.END_BLOCK?this.handle_end_block(e):e.type===l.WORD||e.type===l.RESERVED?this.handle_word(e):e.type===l.SEMICOLON?this.handle_semicolon(e):e.type===l.STRING?this.handle_string(e):e.type===l.EQUALS?this.handle_equals(e):e.type===l.OPERATOR?this.handle_operator(e):e.type===l.COMMA?this.handle_comma(e):e.type===l.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===l.COMMENT?this.handle_comment(e,t):e.type===l.DOT?this.handle_dot(e):e.type===l.EOF?this.handle_eof(e):(e.type,l.UNKNOWN,this.handle_unknown(e,t))},P.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,r=this._options.keep_array_indentation&&D(this._flags.mode);if(e.comments_before)for(var o=e.comments_before.next();o;)this.handle_whitespace_and_comments(o,t),this.handle_token(o,t),o=e.comments_before.next();if(r)for(var i=0;i<n;i+=1)this.print_newline(i>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var a=1;a<n;a+=1)this.print_newline(!0,t)}};var C=["async","break","continue","return","throw","yield"];P.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t;if(p(this._flags.last_token.text,u)||p(e.text,u)){var r=p(this._flags.last_token.text,u)&&p(this._options.operator_position,y)||p(e.text,u);n=n&&r}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(d(this._flags.last_token,C))return;this._output.set_wrap_point()}}},P.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==l.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==v||this._flags.if_block&&f(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},P.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||D(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},P.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===l.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},P.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},P.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},P.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},P.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===v&&S(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},P.prototype.start_of_object_property=function(){return this._flags.parent.mode===g&&this._flags.mode===v&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,["get","set"]))},P.prototype.start_of_statement=function(e){var t=!1;return!!(t=(t=(t=(t=(t=(t=(t=t||d(this._flags.last_token,["var","let","const"])&&e.type===l.WORD)||f(this._flags.last_token,"do"))||!(this._flags.parent.mode===g&&this._flags.mode===v)&&d(this._flags.last_token,C)&&!e.newlines)||f(this._flags.last_token,"else")&&!(f(e,"if")&&!e.comments_before))||this._flags.last_token.type===l.END_EXPR&&(this._previous_flags.mode===w||this._previous_flags.mode===E))||this._flags.last_token.type===l.WORD&&this._flags.mode===b&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==l.WORD&&e.type!==l.RESERVED)||this._flags.mode===g&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,["get","set"])))&&(this.set_mode(v),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,d(e,["do","for","if","while"])),!0)},P.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=O;if("["===e.text){if(this._flags.last_token.type===l.WORD||")"===this._flags.last_token.text)return d(this._flags.last_token,s)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=_,D(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),p(this._flags.last_token.type,[l.START_EXPR,l.END_EXPR,l.WORD,l.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===l.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=w):p(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=E):p(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(p(this._flags.last_token.text,s)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===l.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var r=this._tokens.peek(-4);d(n,["async","function"])||"*"===n.text&&d(r,["async","function"])?this._output.space_before_token=!0:this._flags.mode===g&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==r.text&&","!==r.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===l.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(p(this._last_last_text,["function","yield"])||this._flags.mode===g&&p(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===l.START_BLOCK?this.print_newline():this._flags.last_token.type!==l.END_EXPR&&this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==l.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},P.prototype.handle_end_expr=function(e){for(;this._flags.mode===v;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&D(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==l.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),S(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===E&&(this._previous_flags.mode=O,this._flags.do_block=!1,this._flags.do_while=!1)},P.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===l.END_EXPR?(this.set_mode(b),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(b):n&&(p(n.text,[":",","])&&p(t.type,[l.STRING,l.WORD,l.RESERVED])||p(t.text,["get","set","..."])&&p(n.type,[l.WORD,l.RESERVED]))?p(this._last_last_text,["class","interface"])?this.set_mode(b):this.set_mode(g):this._flags.last_token.type===l.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(b):p(this._flags.last_token.type,[l.EQUALS,l.START_EXPR,l.COMMA,l.OPERATOR])||d(this._flags.last_token,["return","throw","import","default"])?this.set_mode(g):this.set_mode(b);var r=!t.comments_before&&"}"===t.text,o=r&&"function"===this._flags.last_word&&this._flags.last_token.type===l.END_EXPR;if(this._options.brace_preserve_inline){var i=0,a=null;this._flags.inline_frame=!0;do{if(i+=1,(a=this._tokens.peek(i-1)).newlines){this._flags.inline_frame=!1;break}}while(a.type!==l.EOF&&(a.type!==l.END_BLOCK||a.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==l.OPERATOR&&(o||this._flags.last_token.type===l.EQUALS||d(this._flags.last_token,m)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!D(this._previous_flags.mode)||this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.COMMA||((this._flags.last_token.type===l.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==l.OPERATOR&&this._flags.last_token.type!==l.START_EXPR&&(this._flags.last_token.type!==l.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),r||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},P.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===v;)this.restore_mode();var t=this._flags.last_token.type===l.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(D(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},P.prototype.handle_word=function(e){if(e.type===l.RESERVED&&(p(e.text,["set","get"])&&this._flags.mode!==g||"import"===e.text&&"("===this._tokens.peek().text||p(e.text,["as","from"])&&!this._flags.import_block||this._flags.mode===g&&":"===this._tokens.peek().text)&&(e.type=l.WORD),this.start_of_statement(e)?d(this._flags.last_token,["var","let","const"])&&e.type===l.WORD&&(this._flags.declaration_statement=!0):!e.newlines||N(this._flags.mode)||this._flags.last_token.type===l.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===l.EQUALS||!this._options.preserve_newlines&&d(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(f(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&f(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===v;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&d(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==l.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==l.COMMA&&this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.EQUALS&&this._flags.last_token.type!==l.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),f(e,"function"))return(p(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!p(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==l.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD?d(this._flags.last_token,["get","set","new","export"])||d(this._flags.last_token,C)||f(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===l.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!N(this._flags.mode)&&!D(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var t="NONE";this._flags.last_token.type===l.END_BLOCK?this._previous_flags.inline_frame?t="SPACE":d(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?t="NEWLINE":(t="SPACE",this._output.space_before_token=!0):t="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&this._flags.mode===b?t="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&N(this._flags.mode)?t="SPACE":this._flags.last_token.type===l.STRING?t="NEWLINE":this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||"*"===this._flags.last_token.text&&(p(this._last_last_text,["function","yield"])||this._flags.mode===g&&p(this._last_last_text,["{",","]))?t="SPACE":this._flags.last_token.type===l.START_BLOCK?t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===l.END_EXPR&&(this._output.space_before_token=!0,t="NEWLINE"),d(e,s)&&")"!==this._flags.last_token.text&&(t=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),d(e,["else","catch","finally"])?(this._flags.last_token.type!==l.END_BLOCK||this._previous_flags.mode!==b||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===t?d(this._flags.last_token,m)||"declare"===this._flags.last_token.text&&d(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==l.END_EXPR?this._flags.last_token.type===l.START_EXPR&&d(e,["var","let","const"])||":"===this._flags.last_token.text||(f(e,"if")&&f(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):d(e,s)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&D(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===t&&(this._output.space_before_token=!0),!e.previous||e.previous.type!==l.WORD&&e.previous.type!==l.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===l.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&f(e,"from")&&(this._flags.import_block=!1))},P.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();!(this._flags.mode!==v||this._flags.if_block&&f(t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},P.prototype.handle_string=function(e){this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):this.print_newline()),this.print_token(e)},P.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},P.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(N(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===g||this._flags.mode===v&&this._flags.parent.mode===g?(this._flags.mode===v&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},P.prototype.handle_operator=function(e){var t="*"===e.text&&(d(this._flags.last_token,["function","yield"])||p(this._flags.last_token.type,[l.START_BLOCK,l.COMMA,l.END_BLOCK,l.SEMICOLON])),n=p(e.text,["-","+"])&&(p(this._flags.last_token.type,[l.START_BLOCK,l.START_EXPR,l.EQUALS,l.OPERATOR])||p(this._flags.last_token.text,s)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var r=!t;this.handle_whitespace_and_comments(e,r)}if(d(this._flags.last_token,m))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==l.DOT)if("::"!==e.text){if(this._flags.last_token.type===l.OPERATOR&&p(this._options.operator_position,y)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==l.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var o=!0,i=!0,a=!1;if(":"===e.text?0===this._flags.ternary_depth?o=!1:(this._flags.ternary_depth-=1,a=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&p(e.text,u)){var c=":"===e.text,f=c&&a,g=c&&!a;switch(this._options.operator_position){case h.before_newline:return this._output.space_before_token=!g,this.print_token(e),c&&!f||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case h.after_newline:return this._output.space_before_token=!0,!c||f?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case h.preserve_newline:return g||this.allow_wrap_or_preserved_newline(e),o=!(this._output.just_added_newline()||g),this._output.space_before_token=o,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),o=!1;var _=this._tokens.peek();i=_&&p(_.type,[l.WORD,l.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),o=this._flags.last_token.type===l.START_BLOCK,i=!1):(p(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==l.COMMA&&this._flags.last_token.type!==l.START_EXPR||this.allow_wrap_or_preserved_newline(e),o=!1,i=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&N(this._flags.mode)&&(o=!0),this._flags.last_token.type===l.RESERVED?o=!0:this._flags.last_token.type===l.END_EXPR?o=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===l.OPERATOR&&(o=p(e.text,["--","-","++","+"])&&p(this._flags.last_token.text,["--","-","++","+"]),p(e.text,["+","-"])&&p(this._flags.last_token.text,["--","++"])&&(i=!0)),(this._flags.mode!==b||this._flags.inline_frame)&&this._flags.mode!==v||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||o,this.print_token(e),this._output.space_before_token=i}else this.print_token(e);else this.print_token(e)},P.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):i.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},P.prototype.print_block_commment=function(e,t){var n,r=function(e){for(var t=[],n=(e=e.replace(i.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}(e.text),o=!1,a=!1,c=e.whitespace_before,s=c.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(r[0]),this.print_newline(!1,t),r.length>1){for(o=function(e){for(var t=0;t<e.length;t++)if("*"!==e[t].trim().charAt(0))return!1;return!0}(r=r.slice(1)),a=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if((n=e[r])&&0!==n.indexOf(t))return!1;return!0}(r,c),o&&(this._flags.alignment=1),n=0;n<r.length;n++)o?(this.print_token_line_indentation(e),this._output.add_token(r[n].replace(/^\s+/g,""))):a&&r[n]?(this.print_token_line_indentation(e),this._output.add_token(r[n].substring(s))):(this._output.current_line.set_indent(-1),this._output.add_token(r[n])),this.print_newline(!1,t);this._flags.alignment=0}},P.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},P.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),d(this._flags.last_token,m)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},P.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},P.prototype.handle_eof=function(e){for(;this._flags.mode===v;)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=P},function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function o(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function i(e,t){this.__indent_cache=new o(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},o.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),(n+=e*this.__indent_size)+t},o.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+this.__cache[t]},o.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},o.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},i.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},i.prototype.get_line_number=function(){return this.__lines.length},i.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},i.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},i.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},i.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},i.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},i.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},i.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},i.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},i.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},i.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},i.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},i.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},i.prototype.just_added_newline=function(){return this.current_line.is_empty()},i.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},i.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var o=this.__lines[n];if(o.is_empty())break;if(0!==o.item(0).indexOf(e)&&o.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=i},function(e,t,n){"use strict";e.exports.Token=function(e,t,n,r){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(e,t,n){"use strict";var r="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",i="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",a="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+o+"])",c="(?:\\\\u[0-9a-fA-F]{4}|["+r+o+i+"])*";t.identifier=new RegExp(a+c,"g"),t.identifierStart=new RegExp(a),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+r+o+i+"])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,n){"use strict";var r=n(6).Options,o=["before-newline","after-newline","preserve-newline"];function i(e){r.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<n.length;i++)"preserve-inline"===n[i]?this.brace_preserve_inline=!0:this.brace_style=n[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",o),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}i.prototype=new r,e.exports.Options=i},function(e,t,n){"use strict";function r(e,t){this.raw_options=o(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function o(e,t){var n,r={};for(n in e=i(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function i(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"===a(n)?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=i,e.exports.mergeOpts=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(9).Tokenizer,i=n(9).TOKEN,a=n(13).Directives,c=n(4),s=n(12).Pattern,u=n(14).TemplatablePattern;function l(e,t){return-1!==t.indexOf(e)}var p={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},f=new a(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,m=/[0-9]/,h=/[^\d\.]/,y=">>> === !== << && >= ** != == <= >> || |> < / - + > : & % ? ^ | *".split(" "),b=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";b=(b="\\?\\.(?!\\d) "+(b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var v,g=new RegExp(b),_="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),w=_.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),E=new RegExp("^(?:"+w.join("|")+")$"),O=function(e,t){o.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new s(this._input),r=new u(this._input).read_options(this._options);this.__patterns={template:r,identifier:r.starting_with(c.identifier).matching(c.identifierMatch),number:n.matching(d),punct:n.matching(g),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(c.lineBreak),shebang:n.starting_with(/#!/).until_after(c.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:r.until(/['\\\n\r\u2028\u2029]/),double_quote:r.until(/["\\\n\r\u2028\u2029]/),template_text:r.until(/[`\\$]/),template_expression:r.until(/[`}\\]/)}};(O.prototype=new o)._is_comment=function(e){return e.type===p.COMMENT||e.type===p.BLOCK_COMMENT||e.type===p.UNKNOWN},O.prototype._is_opening=function(e){return e.type===p.START_BLOCK||e.type===p.START_EXPR},O.prototype._is_closing=function(e,t){return(e.type===p.END_BLOCK||e.type===p.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},O.prototype._reset=function(){v=!1},O.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(p.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(r))||this._read_string(r))||this._read_word(e))||this._read_singles(r))||this._read_comment(r))||this._read_regexp(r,e))||this._read_xml(r,e))||this._read_punctuation())||this._create_token(p.UNKNOWN,this._input.next())},O.prototype._read_word=function(e){var t;return""!==(t=this.__patterns.identifier.read())?(t=t.replace(c.allLineBreaks,"\n"),e.type!==p.DOT&&(e.type!==p.RESERVED||"set"!==e.text&&"get"!==e.text)&&E.test(t)?"in"===t||"of"===t?this._create_token(p.OPERATOR,t):this._create_token(p.RESERVED,t):this._create_token(p.WORD,t)):""!==(t=this.__patterns.number.read())?this._create_token(p.WORD,t):void 0},O.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(p.START_EXPR,e):")"===e||"]"===e?t=this._create_token(p.END_EXPR,e):"{"===e?t=this._create_token(p.START_BLOCK,e):"}"===e?t=this._create_token(p.END_BLOCK,e):";"===e?t=this._create_token(p.SEMICOLON,e):"."===e&&h.test(this._input.peek(1))?t=this._create_token(p.DOT,e):","===e&&(t=this._create_token(p.COMMA,e)),t&&this._input.next(),t},O.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(p.EQUALS,e):"?."===e?this._create_token(p.DOT,e):this._create_token(p.OPERATOR,e)},O.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read()))return this._create_token(p.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read())return this._create_token(p.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(m)){do{n+=e=this._input.next()}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(p.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(c.newline);)t+=this._input.next();return v=!0,this._create_token(p.COMMENT,t)}}else if(v&&"-"===e&&(t=this.__patterns.html_comment_end.read()))return v=!1,this._create_token(p.COMMENT,t);return null},O.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var r=f.get_directives(n);r&&"start"===r.ignore&&(n+=f.readIgnored(this._input)),n=n.replace(c.allLineBreaks,"\n"),(t=this._create_token(p.BLOCK_COMMENT,n)).directives=r}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(p.COMMENT,n))}return t},O.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=function(e){for(var t="",n=0,o=new r(e),i=null;o.hasNext();)if((i=o.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=i[0]),"\\"===o.peek()){if(o.next(),"x"===o.peek())i=o.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==o.peek()){t+="\\",o.hasNext()&&(t+=o.next());continue}i=o.match(/u([0-9A-Fa-f]{4})/g)}if(!i)return e;if((n=parseInt(i[1],16))>126&&n<=255&&0===i[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+i[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(c.allLineBreaks,"\n"),this._create_token(p.STRING,t)}return null},O.prototype._allow_regexp_or_xml=function(e){return e.type===p.RESERVED&&l(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===p.END_EXPR&&")"===e.text&&e.opened.previous.type===p.RESERVED&&l(e.opened.previous.text,["if","while","for"])||l(e.type,[p.COMMENT,p.START_EXPR,p.START_BLOCK,p.START,p.END_BLOCK,p.OPERATOR,p.EQUALS,p.EOF,p.SEMICOLON,p.COMMA])},O.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),r=!1,o=!1;this._input.hasNext()&&(r||o||this._input.peek()!==e)&&!this._input.testChar(c.newline);)n+=this._input.peek(),r?r=!1:(r="\\"===this._input.peek(),"["===this._input.peek()?o=!0:"]"===this._input.peek()&&(o=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(c.identifier)),this._create_token(p.STRING,n)}return null},O.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",r=this.__patterns.xml.read_match();if(r){for(var o=r[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),i=0===o.indexOf("{"),a=0;r;){var s=!!r[1],u=r[2];if(!(r[r.length-1]||"![CDATA["===u.slice(0,8))&&(u===o||i&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(s?--a:++a),n+=r[0],a<=0)break;r=this.__patterns.xml.read_match()}return r||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(c.allLineBreaks,"\n"),this._create_token(p.STRING,n)}}return null},O.prototype._read_string_recursive=function(e,t,n){var r,o;"'"===e?o=this.__patterns.single_quote:'"'===e?o=this.__patterns.double_quote:"`"===e?o=this.__patterns.template_text:"}"===e&&(o=this.__patterns.template_expression);for(var i=o.read(),a="";this._input.hasNext();){if((a=this._input.next())===e||!t&&c.newline.test(a)){this._input.back();break}"\\"===a&&this._input.hasNext()?("x"===(r=this._input.peek())||"u"===r?this.has_char_escapes=!0:"\r"===r&&"\n"===this._input.peek(1)&&this._input.next(),a+=this._input.next()):n&&("${"===n&&"$"===a&&"{"===this._input.peek()&&(a+=this._input.next()),n===a&&(a+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(a+=this._input.next()))),i+=a+=o.read()}return i},e.exports.Tokenizer=O,e.exports.TOKEN=p,e.exports.positionable_operators=y.slice(),e.exports.line_starters=_.slice()},function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function o(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}o.prototype.restart=function(){this.__position=0},o.prototype.back=function(){this.__position>0&&(this.__position-=1)},o.prototype.hasNext=function(){return this.__position<this.__input_length},o.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},o.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},o.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},o.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},o.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},o.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},o.prototype.read=function(e,t,n){var r,o="";return e&&(r=this.match(e))&&(o+=r[0]),!t||!r&&e||(o+=this.readUntil(t,n)),o},o.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var o=e.exec(this.__input);return o?(r=o.index,t&&(r+=o[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},o.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},o.prototype.get_regexp=function(e,t){var n=null,o="g";return t&&r&&(o="y"),"string"==typeof e&&""!==e?n=new RegExp(e,o):e&&(n=new RegExp(e.source,o)),n},o.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},o.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},o.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(3).Token,i=n(10).TokenStream,a=n(11).WhitespacePattern,c={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},s=function(e,t){this._input=new r(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new a(this._input)};s.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new i,this._reset();for(var t=new o(c.START,""),n=null,r=[],a=new i;t.type!==c.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)a.add(e),e=this._get_next_token(t,n);a.isEmpty()||(e.comments_before=a,a=new i),e.parent=n,this._is_opening(e)?(r.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=r.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},s.prototype._is_first_token=function(){return this.__tokens.isEmpty()},s.prototype._reset=function(){},s.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(c.RAW,n):this._create_token(c.EOF,"")},s.prototype._is_comment=function(e){return!1},s.prototype._is_opening=function(e){return!1},s.prototype._is_closing=function(e,t){return!1},s.prototype._create_token=function(e,t){return new o(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},s.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=s,e.exports.TOKEN=c},function(e,t,n){"use strict";function r(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}r.prototype.restart=function(){this.__position=0},r.prototype.isEmpty=function(){return 0===this.__tokens_length},r.prototype.hasNext=function(){return this.__position<this.__tokens_length},r.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},r.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},r.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=r},function(e,t,n){"use strict";var r=n(12).Pattern;function o(e,t){r.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}o.prototype=new r,o.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},o.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},o.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},o.prototype._create=function(){return new o(this._input,this)},o.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,r=[],o=e.exec(t);o;)r.push(t.substring(n,o.index)),n=o.index+o[0].length,o=e.exec(t);return n<t.length?r.push(t.substring(n,t.length)):r.push(""),r},e.exports.WhitespacePattern=o},function(e,t,n){"use strict";function r(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}r.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},r.prototype.read_match=function(){return this._input.match(this._match_pattern)},r.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){},e.exports.Pattern=r},function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},function(e,t,n){"use strict";var r=n(12).Pattern,o={django:!1,erb:!1,handlebars:!1,php:!1};function a(e,t){r.call(this,e,t),this.__template_pattern=null,this._disabled=i({},o),this._excluded=i({},o),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=i(this._excluded,t._excluded),this._disabled=i(this._disabled,t._disabled));var n=new r(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}a.prototype=new r,a.prototype._create=function(){return new a(this._input,this)},a.prototype._update=function(){this.__set_templated_pattern()},a.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},a.prototype.read_options=function(e){var t=this._create();for(var n in o)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},a.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},a.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},a.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},a.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=a}]),o=r,void 0===(n=function(){return{js_beautify:o}}.apply(t,[]))||(e.exports=n)},13204:()=>{var e=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function t(e,t,n,r){t&&(n(e={a:t,d:e}),r.push.apply(r,e.e))}function n(n,r){var o,i={};!function(){for(var t=n.concat(r),a=[],c={},s=0,u=t.length;s<u;++s){var l=t[s],p=l[3];if(p)for(var f=p.length;--f>=0;)i[p.charAt(f)]=l;p=""+(l=l[1]),c.hasOwnProperty(p)||(a.push(l),c[p]=e)}a.push(/[\S\s]/),o=function(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=p[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),o=(e=[],[]),i="^"===r[0],a=i?1:0,c=r.length;a<c;++a){var s,u=r[a];/\\[bdsw]/i.test(u)?e.push(u):(u=t(u),a+2<c&&"-"===r[a+1]?(s=t(r[a+2]),a+=2):s=u,o.push([u,s]),s<65||u>122||(s<65||u>90||o.push([32|Math.max(65,u),32|Math.min(s,90)]),s<97||u>122||o.push([-33&Math.max(97,u),-33&Math.min(s,122)])))}for(o.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]})),r=[],u=[NaN,NaN],a=0;a<o.length;++a)(c=o[a])[0]<=u[1]+1?u[1]=Math.max(u[1],c[1]):r.push(u=c);for(o=["["],i&&o.push("^"),o.push.apply(o,e),a=0;a<r.length;++a)c=r[a],o.push(n(c[0])),c[1]>c[0]&&(c[1]+1>c[0]&&o.push("-"),o.push(n(c[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],c=0,s=0;c<n;++c){var u=t[c];"("===u?++s:"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=s&&(o[u]=-1)}for(c=1;c<o.length;++c)-1===o[c]&&(o[c]=++i);for(s=c=0;c<n;++c)"("===(u=t[c])?void 0===o[++s]&&(t[c]="(?:"):"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=s&&(t[c]="\\"+o[s]);for(s=c=0;c<n;++c)"^"===t[c]&&"^"!==t[c+1]&&(t[c]="");if(e.ignoreCase&&a)for(c=0;c<n;++c)e=(u=t[c]).charAt(0),u.length>=2&&"["===e?t[c]=r(u):"\\"!==e&&(t[c]=u.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return t.join("")}for(var i=0,a=!1,c=!1,s=0,u=e.length;s<u;++s){var l=e[s];if(l.ignoreCase)c=!0;else if(/[a-z]/i.test(l.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0,c=!1;break}}var p={b:8,t:9,n:10,v:11,f:12,r:13},f=[];for(s=0,u=e.length;s<u;++s){if((l=e[s]).global||l.multiline)throw Error(""+l);f.push("(?:"+o(l)+")")}return RegExp(f.join("|"),c?"gi":"g")}(a)}();var c=r.length;return function e(n){for(var s=n.d,u=[s,"pln"],l=0,p=n.a.match(o)||[],f={},d=0,m=p.length;d<m;++d){var h,y=p[d],b=f[y],v=void 0;if("string"==typeof b)h=!1;else{var g=i[y.charAt(0)];if(g)v=y.match(g[1]),b=g[0];else{for(h=0;h<c;++h)if(g=r[h],v=y.match(g[1])){b=g[0];break}v||(b="pln")}!(h=b.length>=5&&"lang-"===b.substring(0,5))||v&&"string"==typeof v[1]||(h=!1,b="src"),h||(f[y]=b)}if(g=l,l+=y.length,h){h=v[1];var _=y.indexOf(h),w=_+h.length;v[2]&&(_=(w=y.length-v[2].length)-h.length),b=b.substring(5),t(s+g,y.substring(0,_),e,u),t(s+g+_,h,a(b,h),u),t(s+g+w,y.substring(w),e,u)}else u.push(s+g,b)}n.e=u}}function r(t){var r=[],o=[];t.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,e,"'\""]):t.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,e,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,e,"\"'"]),t.verbatimStrings&&o.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,e]);var i=t.hashComments;return i&&(t.cStyleComments?(i>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,e,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,e,"#"]),o.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,e])):r.push(["com",/^#[^\n\r]*/,e,"#"])),t.cStyleComments&&(o.push(["com",/^\/\/[^\n\r]*/,e]),o.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,e])),t.regexLiterals&&o.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(i=t.types)&&o.push(["typ",i]),(t=(""+t.keywords).replace(/^ | $/g,"")).length&&o.push(["kwd",RegExp("^(?:"+t.replace(/[\s,]+/g,"|")+")\\b"),e]),r.push(["pln",/^\s+/,e," \r\n\tÂ "]),o.push(["lit",/^@[$_a-z][\w$@]*/i,e],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,e],["pln",/^[$_a-z][\w$@]*/i,e],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,e,"0123456789"],["pln",/^\\[\S\s]?/,e],["pun",/^.[^\s\w"-$'./@\\`]*/,e]),n(r,o)}function o(t,n){function r(e){switch(e.nodeType){case 1:if(a.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(u){var t=e.nodeValue,n=t.match(c);if(n){var i=t.substring(0,n.index);e.nodeValue=i,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(s.createTextNode(t),e.nextSibling),o(e),i||e.parentNode.removeChild(e)}}}}function o(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var t;for(e=function e(t,n){var r=n?t.cloneNode(!1):t;if(o=t.parentNode){var o=e(o,1),i=t.nextSibling;o.appendChild(r);for(var a=i;a;a=i)i=a.nextSibling,o.appendChild(a)}return r}(e.nextSibling,0);(t=e.parentNode)&&1===t.nodeType;)e=t;l.push(e)}var i,a=/(?:^|\s)nocode(?:\s|$)/,c=/\r\n?|\n/,s=t.ownerDocument;t.currentStyle?i=t.currentStyle.whiteSpace:window.getComputedStyle&&(i=s.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var u=i&&"pre"===i.substring(0,3);for(i=s.createElement("LI");t.firstChild;)i.appendChild(t.firstChild);for(var l=[i],p=0;p<l.length;++p)r(l[p]);n===(0|n)&&l[0].setAttribute("value",n);var f=s.createElement("OL");f.className="linenums";for(var d=Math.max(0,n-1|0)||0,m=(p=0,l.length);p<m;++p)(i=l[p]).className="L"+(p+d)%10,i.firstChild||i.appendChild(s.createTextNode("Â ")),f.appendChild(i);t.appendChild(f)}function i(e,t){for(var n=t.length;--n>=0;){var r=t[n];v.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):v[r]=e}}function a(e,t){return e&&v.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),v[e]}function c(t){var n=t.g;try{var r=function(t){var n,r=/(?:^|\s)nocode(?:\s|$)/,o=[],i=0,a=[],c=0;t.currentStyle?n=t.currentStyle.whiteSpace:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,e).getPropertyValue("white-space"));var s=n&&"pre"===n.substring(0,3);return function e(t){switch(t.nodeType){case 1:if(r.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);"BR"!==(n=t.nodeName)&&"LI"!==n||(o[c]="\n",a[c<<1]=i++,a[c++<<1|1]=t);break;case 3:case 4:(n=t.nodeValue).length&&(n=s?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[c]=n,a[c<<1]=i,i+=n.length,a[c++<<1|1]=t)}}(t),{a:o.join("").replace(/\n$/,""),c:a}}(t.h),o=r.a;t.a=o,t.c=r.c,t.d=0,a(n,o)(t);var i,c,s=/\bMSIE\b/.test(navigator.userAgent),u=(n=/\n/g,t.a),l=u.length,p=(r=0,t.c),f=p.length,d=(o=0,t.e),m=d.length;for(t=0,d[m]=l,c=i=0;c<m;)d[c]!==d[c+2]?(d[i++]=d[c++],d[i++]=d[c++]):c+=2;for(m=i,c=i=0;c<m;){for(var h=d[c],y=d[c+1],b=c+2;b+2<=m&&d[b+1]===y;)b+=2;d[i++]=h,d[i++]=y,c=b}for(d.length=i;o<f;){var v,g=p[o+2]||l,_=d[t+2]||l,w=(b=Math.min(g,_),p[o+1]);if(1!==w.nodeType&&(v=u.substring(r,b))){s&&(v=v.replace(n,"\r")),w.nodeValue=v;var E=w.ownerDocument,O=E.createElement("SPAN");O.className=d[t+1];var S=w.parentNode;S.replaceChild(O,w),O.appendChild(w),r<g&&(p[o+1]=w=E.createTextNode(u.substring(b,g)),S.insertBefore(w,O.nextSibling))}(r=b)>=g&&(o+=2),r>=_&&(t+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var s,u,l=[s=[[u=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[s,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],f=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[u,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],m=[u,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],h=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,y=/\S/,b=r({keywords:[l,f,s=[s,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+d,m,u=[u,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),v={};i(b,["default-code"]),i(n([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),i(n([["pln",/^\s+/,e," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,e,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),i(n([],[["atv",/^[\S\s]+/]]),["uq.val"]),i(r({keywords:l,hashComments:!0,cStyleComments:!0,types:h}),["c","cc","cpp","cxx","cyc","m"]),i(r({keywords:"null,true,false"}),["json"]),i(r({keywords:f,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:h}),["cs"]),i(r({keywords:p,cStyleComments:!0}),["java"]),i(r({keywords:u,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),i(r({keywords:d,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),i(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),i(r({keywords:m,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),i(r({keywords:s,cStyleComments:!0,regexLiterals:!0}),["js"]),i(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),i(n([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&o(r,n),c({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(t){for(var n=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],i=0;i<n.length;++i)for(var a=0,s=n[i].length;a<s;++a)r.push(n[i][a]);n=e;var u=Date;u.now||(u={now:function(){return+new Date}});var l=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function e(){for(var n=window.PR_SHOULD_USE_CONTINUATION?u.now()+250:1/0;l<r.length&&u.now()<n;l++){var i=r[l];if((a=i.className).indexOf("prettyprint")>=0){var a,s,f;if(f=!(a=a.match(p))){for(var d=void 0,m=(f=i).firstChild;m;m=m.nextSibling){var h=m.nodeType;d=1===h?d?f:m:3===h&&y.test(m.nodeValue)?f:d}f=(s=d===f?void 0:d)&&"CODE"===s.tagName}for(f&&(a=s.className.match(p)),a&&(a=a[1]),f=!1,d=i.parentNode;d;d=d.parentNode)if(("pre"===d.tagName||"code"===d.tagName||"xmp"===d.tagName)&&d.className&&d.className.indexOf("prettyprint")>=0){f=!0;break}f||((f=!!(f=i.className.match(/\blinenums\b(?::(\d+))?/))&&(!f[1]||!f[1].length||+f[1]))&&o(i,f),c({g:a,h:i,i:f}))}}l<r.length?setTimeout(e,250):t&&t()}()},window.PR={createSimpleLexer:n,registerLangHandler:i,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()},51743:(e,t,n)=>{e.exports=n.p+"dashboard.assets/js/5bfaed866eef8fb20f4d7aef93a0ef14.js"},79246:(e,t,n)=>{e.exports=n.p+"dashboard.assets/js/cb24550074912ba2d7419fd38824e716.js"}},e=>{var t=t=>e(e.s=t);e.O(0,[121],(()=>(t(41371),t(42130),t(18407),t(57197),t(14746),t(6555),t(21239),t(25272)))),e.O()}]);